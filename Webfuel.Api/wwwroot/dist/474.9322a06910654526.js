"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[474],{4474:(be,q,s)=>{s.r(q),s.d(q,{SupportRequestModule:()=>ve});var m=s(177),y=s(2896),u=s(4722),g=s(1725),d=s(5260),t=s(4341),R=s(9636),c=s(5377),e=s(4438),v=s(3548),w=s(6089),k=s(2817),S=s(9463),T=s(1062),I=s(1435),_=s(3376),D=s(1050),A=s(9779);let M=(()=>{class a{constructor(r,i,o,l,p){this.router=r,this.activatedRoute=i,this.supportRequestApi=o,this.staticDataCache=l,this.reportService=p,this.filterForm=new t.gE({number:new t.MJ("",{nonNullable:!0}),fromDate:new t.MJ(null),toDate:new t.MJ(null),statusId:new t.MJ(null),title:new t.MJ("",{nonNullable:!0}),teamContactFullName:new t.MJ("",{nonNullable:!0}),proposedFundingStreamId:new t.MJ(null)})}ngAfterViewInit(){this.activatedRoute.queryParams.subscribe(r=>this.applyFilterParams(r))}resetFilterForm(){this.filterForm.patchValue({number:"",fromDate:null,toDate:null,statusId:null,title:"",teamContactFullName:"",proposedFundingStreamId:null})}add(){window.open("/external/support-request","_blank")}edit(r){this.router.navigate(["support-request/support-request-item",r.id])}export(){this.supportRequestApi.export(R.A.merge(this.filterForm.getRawValue(),{skip:0,take:0})).subscribe(r=>{this.reportService.runReport(r)})}applyFilterParams(r){switch(r.show){case"all":return void this.resetFilterForm();case"to-be-triaged":return this.resetFilterForm(),void this.filterForm.patchValue({statusId:c.iT.ToBeTriaged});case"on-hold":return this.resetFilterForm(),void this.filterForm.patchValue({statusId:c.iT.OnHold});case"referred-to-rss-team":return this.resetFilterForm(),void this.filterForm.patchValue({statusId:c.iT.ReferredToNIHRRSSExpertTeams})}}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(u.Ix),e.rXU(u.nX),e.rXU(d.H),e.rXU(v.t),e.rXU(w.G))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["support-request-list"]],decls:43,vars:12,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/support-request/support-request-list"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[1,"header-buttons"],[1,"button","is-primary",3,"click"],[1,"filter-form"],[1,"form",3,"formGroup"],[1,"flex"],[1,"field","is-4"],["type","text","formControlName","title","placeholder","Title",1,"input"],["type","text","formControlName","teamContactFullName","placeholder","Contact Name",1,"input"],["placeholder","Status","formControlName","statusId",3,"dataSource","enableClear"],["placeholder","Proposed Funding Stream","formControlName","proposedFundingStreamId",3,"dataSource","enableClear"],["placeholder","From Date","formControlName","fromDate",3,"enableClear"],["placeholder","To Date","formControlName","toDate",3,"enableClear"],[1,"is-12","is-right"],[1,"button","is-small",3,"click"],["stateKey","SupportRequestList",3,"dataSource","filterForm"],["name","dateOfRequest","label","Date"],["name","statusId",3,"dataSource"],["name","teamContactFullName","label","Contact Name"],["name","title"],["name","targetSubmissionDate","label","Target Submission Date"],["name","proposedFundingStreamId","label","Proposed Funding Stream",3,"dataSource"],[3,"add","edit","canDelete"]],template:function(i,o){1&i&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",2),e.EFF(6,"Triage Support Requests"),e.k0s()()(),e.j41(7,"div",3)(8,"div",4)(9,"div",5)(10,"h1",6),e.EFF(11,"Triage Support Requests"),e.k0s()(),e.j41(12,"div",5)(13,"div",7)(14,"button",8),e.bIt("click",function(){return o.export()}),e.EFF(15,"Export"),e.k0s()()()(),e.j41(16,"div",9)(17,"form",10)(18,"div",11)(19,"div",12),e.nrm(20,"input",13),e.k0s(),e.j41(21,"div",12),e.nrm(22,"input",14),e.k0s(),e.j41(23,"div",12),e.nrm(24,"dropdown-select",15),e.k0s()(),e.j41(25,"div",11)(26,"div",12),e.nrm(27,"dropdown-select",16),e.k0s(),e.j41(28,"div",12),e.nrm(29,"date-picker",17),e.k0s(),e.j41(30,"div",12),e.nrm(31,"date-picker",18),e.k0s(),e.j41(32,"div",19)(33,"button",20),e.bIt("click",function(){return o.resetFilterForm()}),e.EFF(34,"show all"),e.k0s()()()()(),e.j41(35,"grid",21),e.nrm(36,"grid-date-column",22)(37,"grid-reference-column",23)(38,"grid-column",24)(39,"grid-column",25)(40,"grid-date-column",26)(41,"grid-reference-column",27),e.j41(42,"grid-action-column",28),e.bIt("add",function(){return o.add()})("edit",function(p){return o.edit(p)}),e.k0s()()()),2&i&&(e.R7$(17),e.Y8G("formGroup",o.filterForm),e.R7$(7),e.Y8G("dataSource",o.staticDataCache.supportRequestStatus)("enableClear",!0),e.R7$(3),e.Y8G("dataSource",o.staticDataCache.fundingStream)("enableClear",!0),e.R7$(2),e.Y8G("enableClear",!0),e.R7$(2),e.Y8G("enableClear",!0),e.R7$(4),e.Y8G("dataSource",o.supportRequestApi)("filterForm",o.filterForm),e.R7$(2),e.Y8G("dataSource",o.staticDataCache.supportRequestStatus),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.fundingStream),e.R7$(),e.Y8G("canDelete",!1))},dependencies:[t.qT,t.me,t.BC,t.cb,t.j4,t.JD,u.Wk,k.p,S.I,T._,I.C,_.y,D.u,A.h],encapsulation:2})}}return a})();var G=s(8933);let C=(()=>{class a{constructor(){this.route=(0,e.WQX)(u.nX),this.router=(0,e.WQX)(u.Ix),this.supportRequestApi=(0,e.WQX)(d.H),this.confirmDialog=(0,e.WQX)(G.T),this.staticDataCache=(0,e.WQX)(v.t),this.supportRequestStatus=null}ngOnInit(){this.reset(this.route.snapshot.data.supportRequest)}reset(r){this.item=r,this.resetStatus()}resetStatus(){this.staticDataCache.supportRequestStatus.get({id:this.item.statusId}).subscribe(r=>{this.supportRequestStatus=r,this.locked?this.applyLock():this.clearLock()})}applyLock(){}clearLock(){}get locked(){return this.item.statusId!=c.iT.ToBeTriaged&&this.item.statusId!=c.iT.OnHold}get referred(){return this.item.statusId==c.iT.ReferredToNIHRRSSExpertTeams}unlock(){this.confirmDialog.open({title:"Unlock Support Request",message:"Are you sure you want to return this support request to triage status?"}).subscribe(()=>{this.supportRequestApi.unlock({id:this.item.id},{successGrowl:"Support Request Unlocked"}).subscribe(r=>{this.reset(r)})})}static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["ng-component"]],decls:0,vars:0,template:function(i,o){},encapsulation:2})}}return a})();var J=s(850),f=s(8829),$=s(4877),b=s(7520),N=s(1449);function x(a,n){1&a&&e.EFF(0),2&a&&e.SpI(" ",n.$implicit.name," ")}function L(a,n){1&a&&e.EFF(0),2&a&&e.SpI(" ",n.$implicit.name," ")}function U(a,n){if(1&a&&(e.j41(0,"div",5)(1,"div",14)(2,"div",6)(3,"label",7),e.EFF(4,"Time in hours (0 - 8)"),e.k0s(),e.nrm(5,"input",15),e.k0s(),e.j41(6,"div",6)(7,"label",7),e.EFF(8,"Pre/Post Award"),e.k0s(),e.nrm(9,"dropdown-select",16),e.k0s()(),e.j41(10,"div",6)(11,"label",7),e.EFF(12,"Support provided (include all types of support provided)"),e.k0s(),e.nrm(13,"dropdown-multi-select",17),e.k0s(),e.j41(14,"div",6)(15,"label",7),e.EFF(16,"Description of support provided/requested"),e.k0s(),e.nrm(17,"textarea",18),e.k0s(),e.j41(18,"div",6)(19,"label",7),e.EFF(20,"Request additional support from another team"),e.k0s(),e.j41(21,"dropdown-select",19),e.DNE(22,x,1,1,"ng-template",null,0,e.C5r)(24,L,1,1,"ng-template",null,1,e.C5r),e.k0s()()()),2&a){const r=e.XpG();e.R7$(9),e.Y8G("dataSource",r.staticDataCache.isPrePostAward),e.R7$(4),e.Y8G("dataSource",r.staticDataCache.supportProvided),e.R7$(8),e.Y8G("dataSource",r.staticDataCache.supportTeam)("enableClear",!0)}}function Y(a,n){1&a&&(e.j41(0,"div")(1,"div",6)(2,"label",7),e.EFF(3,"Reason for triage decision"),e.k0s(),e.nrm(4,"input",20),e.k0s()())}let j=(()=>{class a extends b.u{open(r){return this._open(V,r,{disableClose:!0})}static{this.\u0275fac=(()=>{let r;return function(o){return(r||(r=e.xGo(a)))(o||a)}})()}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac})}}return a})(),V=(()=>{class a extends b.V{constructor(r,i,o,l){super(),this.router=r,this.formService=i,this.supportRequestApi=o,this.staticDataCache=l,this.form=new t.gE({id:new t.MJ("",{validators:t.k0.required,nonNullable:!0}),statusId:new t.MJ(null,{validators:t.k0.required,nonNullable:!0}),supportProvidedIds:new t.MJ([],{nonNullable:!0}),description:new t.MJ("",{nonNullable:!0}),workTimeInHours:new t.MJ(null,{nonNullable:!0}),supportRequestedTeamId:new t.MJ(null),isPrePostAwardId:new t.MJ(c.cV.PreAward,{nonNullable:!0}),triageNote:new t.MJ("",{nonNullable:!0})}),this.submitting=0,this.form.patchValue({id:this.data.supportRequest.id,statusId:this.data.supportRequest.statusId,triageNote:this.data.supportRequest.triageNote}),this.staticDataCache.supportProvided.query({skip:0,take:100}).subscribe(p=>{this.form.patchValue({supportProvidedIds:R.A.map(R.A.filter(p.items,h=>h.default),h=>h.id)})}),this.form.controls.statusId.valueChanges.subscribe(p=>{this.form.controls.workTimeInHours.setValidators(p==c.iT.ReferredToNIHRRSSExpertTeams?[t.k0.required,t.k0.min(0),t.k0.max(8)]:[]),this.form.controls.workTimeInHours.updateValueAndValidity()})}get promoting(){return this.form.value.statusId==c.iT.ReferredToNIHRRSSExpertTeams}save(){this.formService.hasErrors(this.form)?this.submitting=0:this.submitting>0||(this.submitting=2,setTimeout(()=>{this.submitting--},1500),this.supportRequestApi.triage(this.form.getRawValue()).subscribe({next:r=>{this.submitting--,this._closeDialog(r),null!=r.projectId&&this.router.navigateByUrl(`/project/project-item/${r.projectId}`)},error:()=>{this.submitting--}}))}cancel(){this._cancelDialog()}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(u.Ix),e.rXU(f.u),e.rXU(d.H),e.rXU(v.t))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["triage-support-request-dialog"]],features:[e.Vt3],decls:16,vars:4,consts:[["optionTemplate",""],["pickedTemplate",""],[1,"form","dialog","is-warning",3,"formGroup"],[1,"dialog-head"],[1,"dialog-body"],[1,"grid"],[1,"field"],[1,"label"],["placeholder","required","formControlName","statusId",3,"dataSource"],["class","grid",4,"ngIf"],[4,"ngIf"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"],[1,"flex"],["type","number","min","0","max","8","formControlName","workTimeInHours","placeholder","required",1,"input"],["placeholder","required","formControlName","isPrePostAwardId",3,"dataSource"],["placeholder","optional","formControlName","supportProvidedIds",3,"dataSource"],["formControlName","description","placeholder","required",1,"textarea",2,"height","150px"],["placeholder","optional","formControlName","supportRequestedTeamId",3,"dataSource","enableClear"],["formControlName","triageNote","placeholder","optional",1,"input"]],template:function(i,o){1&i&&(e.j41(0,"form",2)(1,"div",3),e.EFF(2," Triage Support Request. "),e.k0s(),e.j41(3,"div",4)(4,"div",5)(5,"div",6)(6,"label",7),e.EFF(7,"Please select outcome of triage"),e.k0s(),e.nrm(8,"dropdown-select",8),e.k0s(),e.DNE(9,U,26,4,"div",9)(10,Y,5,0,"div",10),e.k0s()(),e.j41(11,"div",11)(12,"button",12),e.bIt("click",function(){return o.save()}),e.EFF(13,"Save"),e.k0s(),e.j41(14,"button",13),e.bIt("click",function(){return o.cancel()}),e.EFF(15,"Cancel"),e.k0s()()()),2&i&&(e.Y8G("formGroup",o.form),e.R7$(8),e.Y8G("dataSource",o.staticDataCache.supportRequestStatus),e.R7$(),e.Y8G("ngIf",o.promoting),e.R7$(),e.Y8G("ngIf",!o.promoting))},dependencies:[m.bT,t.qT,t.me,t.Q0,t.BC,t.cb,t.VZ,t.zX,t.j4,t.JD,k.p,N.C],encapsulation:2})}}return a})();var X=s(6929),H=s(6434);let E=(()=>{class a extends b.u{open(r){return this._open(P,r,{width:"800px"})}static{this.\u0275fac=(()=>{let r;return function(o){return(r||(r=e.xGo(a)))(o||a)}})()}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac})}}return a})(),P=(()=>{class a extends b.V{constructor(r,i,o,l){super(),this.router=r,this.formService=i,this.sendEmailDialog=o,this.triageTemplateApi=l,this.form=new t.gE({triageTemplateId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0})})}save(){this.formService.hasErrors(this.form)||this.triageTemplateApi.generateEmail({triageTemplateId:this.form.getRawValue().triageTemplateId,supportRequestId:this.data.supportRequest.id}).subscribe(r=>{this.sendEmailDialog.open({request:r}).subscribe(()=>{}),this._cancelDialog()})}cancel(){this._cancelDialog()}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(u.Ix),e.rXU(f.u),e.rXU(X.N),e.rXU(H.H))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["send-triage-template-dialog"]],features:[e.Vt3],decls:18,vars:2,consts:[[1,"form","dialog","is-warning",3,"formGroup"],[1,"dialog-head"],[1,"dialog-body"],[1,"message","is-warning"],[1,"field"],[1,"label"],["placeholder","required","formControlName","triageTemplateId",3,"dataSource"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"form",0)(1,"div",1),e.EFF(2," Send Triage Email "),e.k0s(),e.j41(3,"div",2)(4,"div",3),e.EFF(5," This feature is currently in test. The generated email template will be setup to send to your email address only. "),e.nrm(6,"br")(7,"br"),e.EFF(8," You can edit the template to add additional emails. Please ensure you check the content of the email carefully and add any additional information required before sending. "),e.k0s(),e.j41(9,"div",4)(10,"label",5),e.EFF(11,"Template"),e.k0s(),e.nrm(12,"dropdown-select",6),e.k0s()(),e.j41(13,"div",7)(14,"button",8),e.bIt("click",function(){return o.save()}),e.EFF(15,"Select Template"),e.k0s(),e.j41(16,"button",9),e.bIt("click",function(){return o.cancel()}),e.EFF(17,"Cancel"),e.k0s()()()),2&i&&(e.Y8G("formGroup",o.form),e.R7$(12),e.Y8G("dataSource",o.triageTemplateApi))},dependencies:[t.qT,t.BC,t.cb,t.j4,t.JD,k.p],encapsulation:2})}}return a})();var B=s(2571);let F=(()=>{class a{constructor(r,i){this.route=r,this.router=i}ngOnInit(){this.reset(this.route.snapshot.data.supportRequest)}reset(r){this.item=r}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(u.nX),e.rXU(u.Ix))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["support-request-tabs"]],decls:14,vars:8,consts:[[1,"tabs"],["routerLinkActive","is-active"],[3,"routerLink"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"ul")(2,"li",1)(3,"a",2),e.EFF(4,"Request"),e.k0s()(),e.j41(5,"li",1)(6,"a",2),e.EFF(7,"Researcher"),e.k0s()(),e.j41(8,"li",1)(9,"a",2),e.EFF(10,"Files"),e.k0s()(),e.j41(11,"li",1)(12,"a",2),e.EFF(13,"History"),e.k0s()()()()),2&i&&(e.R7$(3),e.Mz_("routerLink","../../support-request-item/",o.item.id,""),e.R7$(3),e.Mz_("routerLink","../../support-request-researcher/",o.item.id,""),e.R7$(3),e.Mz_("routerLink","../../support-request-files/",o.item.id,""),e.R7$(3),e.Mz_("routerLink","../../support-request-history/",o.item.id,""))},dependencies:[u.Wk,u.wQ],encapsulation:2})}}return a})();function O(a,n){if(1&a){const r=e.RV6();e.j41(0,"div",6)(1,"div",39)(2,"button",40),e.bIt("click",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.sendTriageTemplate())}),e.EFF(3,"Send Triage Email"),e.k0s(),e.j41(4,"button",41),e.bIt("click",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.triage())}),e.EFF(5,"Triage"),e.k0s()()()}}function W(a,n){if(1&a&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&a){const r=e.XpG();e.R7$(),e.SpI(": ",r.item.triageNote,"")}}function z(a,n){if(1&a&&(e.j41(0,"div",42)(1,"a",43),e.nrm(2,"i",44),e.EFF(3," Click here to view the project associated with this support request"),e.k0s()()),2&a){const r=e.XpG();e.R7$(),e.Mz_("href","/project/project-request/",r.item.projectId,"",e.B4B)}}function Q(a,n){if(1&a){const r=e.RV6();e.j41(0,"div",45)(1,"button",46),e.bIt("click",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.save(!1))}),e.EFF(2,"Save"),e.k0s(),e.j41(3,"button",46),e.bIt("click",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.save(!0))}),e.EFF(4,"Save & Close"),e.k0s(),e.j41(5,"button",47),e.bIt("click",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.cancel())}),e.EFF(6,"Cancel"),e.k0s()()}}function Z(a,n){if(1&a){const r=e.RV6();e.j41(0,"button",41),e.bIt("click",function(){e.eBV(r);const o=e.XpG(2);return e.Njj(o.unlock())}),e.EFF(1,"Unlock"),e.k0s()}}function K(a,n){if(1&a){const r=e.RV6();e.j41(0,"div",45),e.DNE(1,Z,2,0,"button",48),e.j41(2,"button",47),e.bIt("click",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.cancel())}),e.EFF(3,"Close"),e.k0s()()}if(2&a){const r=e.XpG();e.R7$(),e.Y8G("ngIf",!r.referred)}}function ee(a,n){1&a&&(e.j41(0,"p"),e.EFF(1,"Enquiry came via NIHR round robin link"),e.k0s())}let te=(()=>{class a extends C{constructor(r,i,o,l){super(),this.formService=r,this.alertDialog=i,this.triageSupportRequestDialog=o,this.sendTriageTemplateDialog=l,this.form=new t.gE({id:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),isThisRequestLinkedToAnExistingProject:new t.MJ(!1,{nonNullable:!0}),title:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),isFellowshipId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0}),nihrApplicationId:new t.MJ("",{nonNullable:!0}),proposedFundingStreamName:new t.MJ("",{nonNullable:!0}),targetSubmissionDate:new t.MJ(null),experienceOfResearchAwards:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),isTeamMembersConsultedId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0}),isResubmissionId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0}),briefDescription:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),supportRequested:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),applicationStageId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0}),applicationStageFreeText:new t.MJ("",{nonNullable:!0}),proposedFundingStreamId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0}),proposedFundingCallTypeId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0}),howDidYouFindUsId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0}),howDidYouFindUsFreeText:new t.MJ("",{nonNullable:!0}),whoElseIsOnTheStudyTeam:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),isCTUAlreadyInvolvedId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0}),isCTUAlreadyInvolvedFreeText:new t.MJ("",{nonNullable:!0}),professionalBackgroundIds:new t.MJ([],{validators:[J.b.minArrayLength(1)],nonNullable:!0}),professionalBackgroundFreeText:new t.MJ("",{nonNullable:!0}),wouldYouLikeToReceiveAGrantsmanshipReviewId:new t.MJ(null),isYourSupportRequestOnlyForAGrantsmanshipReviewId:new t.MJ(null),isRoundRobinEnquiry:new t.MJ(!1,{nonNullable:!0})})}reset(r){super.reset(r),this.form.patchValue(r),this.form.markAsPristine()}applyLock(){this.form.disable()}clearLock(){this.form.enable()}isRoundRobinEnquiry(){return this.form.getRawValue().isRoundRobinEnquiry}save(r){this.formService.hasErrors(this.form)||this.supportRequestApi.update(this.form.getRawValue(),{successGrowl:"Support Request Updated"}).subscribe(i=>{this.reset(i),r&&this.router.navigate(["support-request/support-request-list"])})}cancel(){this.reset(this.item),this.router.navigate(["support-request/support-request-list"])}triage(){this.form.pristine?this.triageSupportRequestDialog.open({supportRequest:this.item}).subscribe(r=>{this.reset(r)}):this.alertDialog.open({title:"Warning",message:"Please save unsaved changes before triaging"})}sendTriageTemplate(){this.sendTriageTemplateDialog.open({supportRequest:this.item}).subscribe(()=>{})}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(f.u),e.rXU($.L),e.rXU(j),e.rXU(E))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["support-request-item"]],features:[e.Vt3],decls:115,vars:32,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/support-request/support-request-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],["class","column",4,"ngIf"],[1,"message","is-primary"],[1,"form",3,"formGroup"],[1,"flex"],["class","is-12",4,"ngIf"],[1,"field","is-12"],[1,"label"],["type","text","placeholder","required","formControlName","title",1,"input"],[1,"checkbox"],["type","checkbox","formControlName","isThisRequestLinkedToAnExistingProject"],[1,"field","is-6"],["placeholder","required","formControlName","applicationStageId",3,"dataSource","freeTextControl"],["placeholder","required","formControlName","isFellowshipId",3,"dataSource"],["placeholder","required","formControlName","proposedFundingStreamId",3,"dataSource"],["type","text","placeholder","optional","formControlName","proposedFundingStreamName",1,"input"],["placeholder","required","formControlName","proposedFundingCallTypeId",3,"dataSource"],["type","text","placeholder","optional","formControlName","nihrApplicationId","maxlength","64",1,"input"],["placeholder","optional","formControlName","targetSubmissionDate"],["placeholder","required","formControlName","isTeamMembersConsultedId",3,"dataSource"],["placeholder","required","formControlName","isResubmissionId",3,"dataSource"],["freeTextPlaceholder","Please specify which CTU is already involved...","placeholder","required","formControlName","isCTUAlreadyInvolvedId",3,"dataSource","freeTextControl"],["placeholder","required","formControlName","howDidYouFindUsId",3,"dataSource","freeTextControl"],["formControlName","experienceOfResearchAwards","placeholder","required"],["formControlName","briefDescription","placeholder","required"],["formControlName","supportRequested","placeholder","required"],["formControlName","whoElseIsOnTheStudyTeam","placeholder","required","maxlength","2000"],["placeholder","required","formControlName","professionalBackgroundIds",3,"dataSource","enableClear","freeTextControl"],["placeholder","optional","formControlName","wouldYouLikeToReceiveAGrantsmanshipReviewId",3,"dataSource","enableClear"],["placeholder","optional","formControlName","isYourSupportRequestOnlyForAGrantsmanshipReviewId",3,"dataSource","enableClear"],["class","floating-buttons",4,"ngIf"],[4,"ngIf"],[1,"header-buttons"],[1,"button","is-primary",3,"click"],[1,"button","is-warning",3,"click"],[1,"is-12"],[1,"link","is-primary",3,"href"],[1,"fas","fa-link"],[1,"floating-buttons"],[1,"button","is-success",3,"click"],[1,"button",3,"click"],["class","button is-warning",3,"click",4,"ngIf"]],template:function(i,o){1&i&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",2),e.EFF(6,"Support Requests"),e.k0s()(),e.j41(7,"li")(8,"a",3),e.EFF(9,"Support Request"),e.k0s()()(),e.j41(10,"div",4)(11,"div",5)(12,"div",6)(13,"h1",7),e.EFF(14,"Support Request"),e.k0s()(),e.DNE(15,O,6,0,"div",8),e.k0s(),e.nrm(16,"support-request-tabs"),e.j41(17,"div",9),e.EFF(18),e.DNE(19,W,2,1,"span"),e.k0s(),e.j41(20,"form",10)(21,"div",11),e.DNE(22,z,4,2,"div",12),e.j41(23,"div",13)(24,"label",14),e.EFF(25,"Working title of the project"),e.k0s(),e.nrm(26,"input",15),e.k0s(),e.j41(27,"div",13)(28,"label",14),e.EFF(29,"Is this request linked to a current project?"),e.k0s(),e.j41(30,"div",16)(31,"label"),e.nrm(32,"input",17),e.EFF(33," Please tick this checkbox if you have already submitted a request in relation to this project."),e.k0s()()(),e.j41(34,"div",18)(35,"label",14),e.EFF(36,"Stage of application"),e.k0s(),e.nrm(37,"dropdown-select",19),e.k0s(),e.j41(38,"div",18)(39,"label",14),e.EFF(40,"Is this application for a fellowship?"),e.k0s(),e.nrm(41,"dropdown-select",20),e.k0s(),e.j41(42,"div",18)(43,"label",14),e.EFF(44,"Proposed funding stream"),e.k0s(),e.nrm(45,"dropdown-select",21),e.k0s(),e.j41(46,"div",18)(47,"label",14),e.EFF(48,"Funding stream name / specialist call if known"),e.k0s(),e.nrm(49,"input",22),e.k0s(),e.j41(50,"div",18)(51,"label",14),e.EFF(52,"Type of call"),e.k0s(),e.nrm(53,"dropdown-select",23),e.k0s(),e.j41(54,"div",18)(55,"label",14),e.EFF(56,"NIHR application ID if known"),e.k0s(),e.nrm(57,"input",24),e.k0s(),e.j41(58,"div",18)(59,"label",14),e.EFF(60,"Target submission date (if known)"),e.k0s(),e.nrm(61,"date-picker",25),e.k0s(),e.j41(62,"div",18)(63,"label",14),e.EFF(64,"Have your team members been consulted for support?"),e.k0s(),e.nrm(65,"dropdown-select",26),e.k0s(),e.j41(66,"div",18)(67,"label",14),e.EFF(68,"Has the application or similar been submitted to a funder before?"),e.k0s(),e.nrm(69,"dropdown-select",27),e.k0s(),e.j41(70,"div",18)(71,"label",14),e.EFF(72,"Have you already got a CTU involved and if so which one?"),e.k0s(),e.nrm(73,"dropdown-select",28),e.k0s(),e.j41(74,"div",18)(75,"label",14),e.EFF(76,"How did you hear about our hub?"),e.k0s(),e.nrm(77,"dropdown-select",29),e.k0s(),e.j41(78,"div",13)(79,"label",14),e.EFF(80,"What is your (or the CIs) experience of securing funding awards?"),e.k0s(),e.nrm(81,"text-area",30),e.k0s(),e.j41(82,"div",13)(83,"label",14),e.EFF(84," Please add a brief description of your proposed study. Where possible include an outline of research question, aims, need and methods (including analysis), potential impact. [max 500 words] "),e.k0s(),e.nrm(85,"text-area",31),e.k0s(),e.j41(86,"div",13)(87,"label",14),e.EFF(88," What support are you looking for from RSS? Eg funding advice, methods advice, PPIE and EDI advice, CTU support, training in methods for grants? "),e.nrm(89,"br"),e.j41(90,"i"),e.EFF(91,"* If you are requesting a grantsmanship review as a standalone service, please state \u2018grantsmanship review service\u2019 below."),e.k0s()(),e.nrm(92,"text-area",32),e.k0s(),e.j41(93,"div",13)(94,"label",14),e.EFF(95," Who else is on your study team and what is their expertise? "),e.k0s(),e.nrm(96,"text-area",33),e.k0s(),e.j41(97,"div",13)(98,"label",14),e.EFF(99,"What is the professional background of all team/applicants? (select all that apply)"),e.k0s(),e.nrm(100,"dropdown-multi-select",34),e.k0s(),e.j41(101,"div",18)(102,"label",14),e.EFF(103,"Would you like to receive a grantsmanship review?"),e.k0s(),e.nrm(104,"dropdown-select",35),e.k0s(),e.j41(105,"div",18)(106,"label",14),e.EFF(107,"Is your support request only for a grantsmanship review?"),e.k0s(),e.nrm(108,"dropdown-select",36),e.k0s()(),e.DNE(109,Q,7,0,"div",37)(110,K,4,1,"div",37),e.k0s(),e.j41(111,"p"),e.EFF(112),e.nI1(113,"date"),e.k0s(),e.DNE(114,ee,2,0,"p",38),e.k0s()),2&i&&(e.R7$(8),e.Mz_("routerLink","/support-request/support-request-item/",o.item.id,""),e.R7$(7),e.Y8G("ngIf",!o.locked),e.R7$(3),e.SpI(" ",null==o.supportRequestStatus?null:o.supportRequestStatus.name," "),e.R7$(),e.vxM(19,o.item.triageNote?19:-1),e.R7$(),e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("ngIf",o.item.projectId),e.R7$(15),e.Y8G("dataSource",o.staticDataCache.applicationStage)("freeTextControl",o.form.controls.applicationStageFreeText),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.isFellowship),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.fundingStream),e.R7$(8),e.Y8G("dataSource",o.staticDataCache.fundingCallType),e.R7$(12),e.Y8G("dataSource",o.staticDataCache.isTeamMembersConsulted),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.isResubmission),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.isCTUAlreadyInvolved)("freeTextControl",o.form.controls.isCTUAlreadyInvolvedFreeText),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.howDidYouFindUs)("freeTextControl",o.form.controls.howDidYouFindUsFreeText),e.R7$(23),e.Y8G("dataSource",o.staticDataCache.professionalBackground)("enableClear",!0)("freeTextControl",o.form.controls.professionalBackgroundFreeText),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.isYesNo)("enableClear",!0),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.isYesNo)("enableClear",!0),e.R7$(),e.Y8G("ngIf",!o.locked),e.R7$(),e.Y8G("ngIf",o.locked),e.R7$(2),e.SpI("Created ",e.i5U(113,29,o.item.createdAt,"dd MMM yy HH:mm"),""),e.R7$(2),e.Y8G("ngIf",o.isRoundRobinEnquiry()))},dependencies:[m.bT,t.qT,t.me,t.Zm,t.BC,t.cb,t.tU,t.j4,t.JD,u.Wk,B.Q,k.p,N.C,S.I,F,m.vh],encapsulation:2})}}return a})();var re=s(6628);let oe=(()=>{class a extends C{constructor(r,i){super(),this.formService=r,this.supportRequestApi=i,this.form=new t.gE({})}cancel(){this.reset(this.item),this.router.navigate(["support-request/support-request-list"])}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(f.u),e.rXU(d.H))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["support-request-files"]],features:[e.Vt3],decls:19,vars:5,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/support-request/support-request-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[1,"message","is-primary"],[3,"fileStorageGroupId","locked"]],template:function(i,o){1&i&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",2),e.EFF(6,"Support Requests"),e.k0s()(),e.j41(7,"li")(8,"a",3),e.EFF(9,"Support Request"),e.k0s()()(),e.j41(10,"div",4)(11,"div",5)(12,"div",6)(13,"h1",7),e.EFF(14,"Support Request"),e.k0s()()(),e.nrm(15,"support-request-tabs"),e.j41(16,"div",8),e.EFF(17),e.k0s(),e.nrm(18,"file-browser",9),e.k0s()),2&i&&(e.R7$(8),e.Mz_("routerLink","/support-request/support-request-item/",o.item.id,""),e.R7$(9),e.JRh(null==o.supportRequestStatus?null:o.supportRequestStatus.name),e.R7$(),e.Y8G("fileStorageGroupId",o.item.fileStorageGroupId)("locked",o.locked))},dependencies:[u.Wk,re.w,F],encapsulation:2})}}return a})();var ae=s(5701);function ie(a,n){if(1&a){const r=e.RV6();e.j41(0,"div",50)(1,"button",51),e.bIt("click",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.save(!1))}),e.EFF(2,"Save"),e.k0s(),e.j41(3,"button",51),e.bIt("click",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.save(!0))}),e.EFF(4,"Save & Close"),e.k0s(),e.j41(5,"button",52),e.bIt("click",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.cancel())}),e.EFF(6,"Cancel"),e.k0s()()}}function se(a,n){if(1&a){const r=e.RV6();e.j41(0,"button",54),e.bIt("click",function(){e.eBV(r);const o=e.XpG(2);return e.Njj(o.unlock())}),e.EFF(1,"Unlock"),e.k0s()}}function ne(a,n){if(1&a){const r=e.RV6();e.j41(0,"div",50),e.DNE(1,se,2,0,"button",53),e.j41(2,"button",52),e.bIt("click",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.cancel())}),e.EFF(3,"Close"),e.k0s()()}if(2&a){const r=e.XpG();e.R7$(),e.Y8G("ngIf",!r.referred)}}let le=(()=>{class a extends C{constructor(r,i){super(),this.formService=r,this.supportRequestApi=i,this.form=new t.gE({id:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),teamContactTitle:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),teamContactFirstName:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),teamContactLastName:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),teamContactEmail:new t.MJ("",{validators:[t.k0.required,t.k0.email],nonNullable:!0}),teamContactAltEmail:new t.MJ("",{validators:[t.k0.email],nonNullable:!0}),teamContactRoleId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0}),teamContactRoleFreeText:new t.MJ("",{nonNullable:!0}),teamContactMailingPermission:new t.MJ(!1,{validators:[t.k0.requiredTrue],nonNullable:!0}),teamContactPrivacyStatementRead:new t.MJ(!1,{validators:[t.k0.requiredTrue],nonNullable:!0}),teamContactServiceAgreementRead:new t.MJ(!1,{validators:[t.k0.requiredTrue],nonNullable:!0}),leadApplicantTitle:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),leadApplicantFirstName:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),leadApplicantLastName:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),leadApplicantEmail:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),leadApplicantJobRole:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),leadApplicantCareerStage:new t.MJ("",{nonNullable:!0}),leadApplicantCareerStageId:new t.MJ(null,{}),leadApplicantOrganisationTypeId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0}),leadApplicantOrganisation:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),leadApplicantDepartment:new t.MJ("",{nonNullable:!0}),leadApplicantLocationId:new t.MJ(null,{}),leadApplicantAddressLine1:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),leadApplicantAddressLine2:new t.MJ("",{nonNullable:!0}),leadApplicantAddressTown:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),leadApplicantAddressCounty:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),leadApplicantAddressCountry:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),leadApplicantAddressPostcode:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),leadApplicantORCID:new t.MJ("",{nonNullable:!0}),isLeadApplicantNHSId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0}),leadApplicantAgeRangeId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0}),leadApplicantGenderId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0}),leadApplicantEthnicityId:new t.MJ(null,{validators:[t.k0.required],nonNullable:!0})})}reset(r){super.reset(r),this.form.patchValue(r),this.form.markAsPristine()}applyLock(){this.form.disable()}clearLock(){this.form.enable()}save(r){this.formService.hasErrors(this.form)||this.supportRequestApi.updateResearcher(this.form.getRawValue(),{successGrowl:"Support Request Updated"}).subscribe(i=>{this.reset(i),r&&this.router.navigate(["support-request/support-request-list"])})}cancel(){this.reset(this.item),this.router.navigate(["support-request/support-request-list"])}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(f.u),e.rXU(d.H))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["support-request-researcher"]],features:[e.Vt3],decls:166,vars:21,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/support-request/support-request-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[1,"message","is-primary"],[1,"form",3,"formGroup"],[1,"flex"],[1,"field","is-4"],[1,"label"],["placeholder","required","formControlName","teamContactTitle",3,"dataSource"],["type","text","placeholder","required","formControlName","teamContactFirstName",1,"input"],["type","text","placeholder","required","formControlName","teamContactLastName",1,"input"],["type","text","placeholder","required","formControlName","teamContactEmail",1,"input"],["type","text","placeholder","optional","formControlName","teamContactAltEmail","maxlength","64",1,"input"],["placeholder","required","formControlName","teamContactRoleId",3,"dataSource","freeTextControl"],[1,"field","is-12"],[1,"checkbox"],["type","checkbox","formControlName","teamContactMailingPermission"],["type","checkbox","formControlName","teamContactPrivacyStatementRead"],["type","checkbox","formControlName","teamContactServiceAgreementRead"],["target","_blank","href","https://www.imperial.ac.uk/nihr-research-support-service/service-agreement/",1,"link","is-primary"],[1,"fas","fa-external-link"],["placeholder","required","formControlName","leadApplicantTitle",3,"dataSource"],["type","text","placeholder","required","formControlName","leadApplicantFirstName",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantLastName",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantEmail","maxlength","64",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantJobRole",1,"input"],["placeholder","required","formControlName","leadApplicantCareerStageId",3,"dataSource"],["placeholder","required","formControlName","leadApplicantOrganisationTypeId",3,"dataSource"],["type","text","placeholder","required","formControlName","leadApplicantOrganisation",1,"input"],["type","text","placeholder","optional","formControlName","leadApplicantDepartment",1,"input"],["type","text","placeholder","optional","formControlName","leadApplicantORCID",1,"input"],["placeholder","required","formControlName","leadApplicantLocationId",3,"dataSource"],[1,"field","is-8"],["placeholder","required","formControlName","isLeadApplicantNHSId",3,"dataSource"],[1,"is-6"],["type","text","placeholder","required","formControlName","leadApplicantAddressLine1",1,"input"],["type","text","placeholder","optional","formControlName","leadApplicantAddressLine2",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantAddressTown",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantAddressCounty",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantAddressCountry",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantAddressPostcode",1,"input"],["placeholder","required","formControlName","leadApplicantAgeRangeId",3,"dataSource"],["placeholder","required","formControlName","leadApplicantGenderId",3,"dataSource"],["placeholder","required","formControlName","leadApplicantEthnicityId",3,"dataSource"],["class","floating-buttons",4,"ngIf"],[1,"floating-buttons"],[1,"button","is-success",3,"click"],[1,"button",3,"click"],["class","button is-warning",3,"click",4,"ngIf"],[1,"button","is-warning",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",2),e.EFF(6,"Support Requests"),e.k0s()(),e.j41(7,"li")(8,"a",3),e.EFF(9,"Support Request"),e.k0s()()(),e.j41(10,"div",4)(11,"div",5)(12,"div",6)(13,"h1",7),e.EFF(14,"Support Request"),e.k0s()()(),e.nrm(15,"support-request-tabs"),e.j41(16,"div",8),e.EFF(17),e.k0s(),e.j41(18,"form",9)(19,"h2"),e.EFF(20,"Contact Details"),e.k0s(),e.j41(21,"div",10)(22,"div",11)(23,"label",12),e.EFF(24,"Title"),e.k0s(),e.nrm(25,"dropdown-text-input",13),e.k0s(),e.j41(26,"div",11)(27,"label",12),e.EFF(28,"First name"),e.k0s(),e.nrm(29,"input",14),e.k0s(),e.j41(30,"div",11)(31,"label",12),e.EFF(32,"Last name"),e.k0s(),e.nrm(33,"input",15),e.k0s(),e.j41(34,"div",11)(35,"label",12),e.EFF(36,"Email"),e.k0s(),e.nrm(37,"input",16),e.k0s(),e.j41(38,"div",11)(39,"label",12),e.EFF(40,"Alternative Email"),e.k0s(),e.nrm(41,"input",17),e.k0s(),e.j41(42,"div",11)(43,"label",12),e.EFF(44,"Role in application"),e.k0s(),e.nrm(45,"dropdown-select",18),e.k0s(),e.j41(46,"div",19)(47,"div",20)(48,"label"),e.nrm(49,"input",21),e.EFF(50," Please tick this checkbox to confirm you give us permission to contact you via email."),e.k0s()()(),e.j41(51,"div",19)(52,"div",20)(53,"label"),e.nrm(54,"input",22),e.EFF(55," Please tick this checkbox to confirm you have read our privacy statement."),e.k0s()()(),e.j41(56,"div",19)(57,"div",20)(58,"label"),e.nrm(59,"input",23),e.EFF(60," Please tick this checkbox to confirm you have read our "),e.j41(61,"a",24),e.EFF(62,"service agreement "),e.nrm(63,"i",25),e.k0s(),e.EFF(64,"."),e.k0s()()()(),e.j41(65,"h2"),e.EFF(66,"Chief Investigator Details"),e.k0s(),e.j41(67,"div",10)(68,"div",11)(69,"label",12),e.EFF(70,"Title"),e.k0s(),e.nrm(71,"dropdown-text-input",26),e.k0s(),e.j41(72,"div",11)(73,"label",12),e.EFF(74,"First name"),e.k0s(),e.nrm(75,"input",27),e.k0s(),e.j41(76,"div",11)(77,"label",12),e.EFF(78,"Last name"),e.k0s(),e.nrm(79,"input",28),e.k0s(),e.j41(80,"div",11)(81,"label",12),e.EFF(82,"Email"),e.k0s(),e.nrm(83,"input",29),e.k0s(),e.j41(84,"div",11)(85,"label",12),e.EFF(86,"Job Role"),e.k0s(),e.nrm(87,"input",30),e.k0s(),e.j41(88,"div",11)(89,"label",12),e.EFF(90,"Career Stage"),e.k0s(),e.nrm(91,"dropdown-select",31),e.k0s(),e.j41(92,"div",11)(93,"label",12),e.EFF(94,"Organisation Type"),e.k0s(),e.nrm(95,"dropdown-select",32),e.k0s(),e.j41(96,"div",11)(97,"label",12),e.EFF(98,"Organisation"),e.k0s(),e.nrm(99,"input",33),e.k0s(),e.j41(100,"div",11)(101,"label",12),e.EFF(102,"Department"),e.k0s(),e.nrm(103,"input",34),e.k0s(),e.j41(104,"div",11)(105,"label",12),e.EFF(106,"ORCID"),e.k0s(),e.nrm(107,"input",35),e.k0s(),e.j41(108,"div",11)(109,"label",12),e.EFF(110,"Where are they located?"),e.k0s(),e.nrm(111,"dropdown-select",36),e.k0s(),e.j41(112,"div",37)(113,"label",12),e.EFF(114," Is the chief investigator an NHS employee seeking RSS support for the first time?\xa0 "),e.k0s(),e.nrm(115,"dropdown-select",38),e.k0s()(),e.j41(116,"div",10)(117,"div",39)(118,"h3"),e.EFF(119,"Work Address"),e.k0s(),e.j41(120,"div",10)(121,"div",19)(122,"label",12),e.EFF(123,"Line 1"),e.k0s(),e.nrm(124,"input",40),e.k0s(),e.j41(125,"div",19)(126,"label",12),e.EFF(127,"Line 2"),e.k0s(),e.nrm(128,"input",41),e.k0s(),e.j41(129,"div",19)(130,"label",12),e.EFF(131,"Town/City"),e.k0s(),e.nrm(132,"input",42),e.k0s(),e.j41(133,"div",19)(134,"label",12),e.EFF(135,"County"),e.k0s(),e.nrm(136,"input",43),e.k0s(),e.j41(137,"div",19)(138,"label",12),e.EFF(139,"Country"),e.k0s(),e.nrm(140,"input",44),e.k0s(),e.j41(141,"div",19)(142,"label",12),e.EFF(143,"Postcode"),e.k0s(),e.nrm(144,"input",45),e.k0s()()(),e.j41(145,"div",39)(146,"h3"),e.EFF(147,"Enthnicity, Diversity & Inclusion"),e.k0s(),e.j41(148,"div",10)(149,"div",19)(150,"label",12),e.EFF(151,"Age Range"),e.k0s(),e.nrm(152,"dropdown-select",46),e.k0s(),e.j41(153,"div",19)(154,"label",12),e.EFF(155,"Gender"),e.k0s(),e.nrm(156,"dropdown-select",47),e.k0s(),e.j41(157,"div",19)(158,"label",12),e.EFF(159,"Ethnicity"),e.k0s(),e.nrm(160,"dropdown-select",48),e.k0s()()()(),e.DNE(161,ie,7,0,"div",49)(162,ne,4,1,"div",49),e.k0s(),e.j41(163,"p"),e.EFF(164),e.nI1(165,"date"),e.k0s()()),2&i&&(e.R7$(8),e.Mz_("routerLink","/support-request/support-request-item/",o.item.id,""),e.R7$(9),e.JRh(null==o.supportRequestStatus?null:o.supportRequestStatus.name),e.R7$(),e.Y8G("formGroup",o.form),e.R7$(7),e.Y8G("dataSource",o.staticDataCache.title),e.R7$(20),e.Y8G("dataSource",o.staticDataCache.researcherRole)("freeTextControl",o.form.controls.teamContactRoleFreeText),e.R7$(26),e.Y8G("dataSource",o.staticDataCache.title),e.R7$(20),e.Y8G("dataSource",o.staticDataCache.researcherCareerStage),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.researcherOrganisationType),e.R7$(16),e.Y8G("dataSource",o.staticDataCache.researcherLocation),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.isLeadApplicantNHS),e.R7$(37),e.Y8G("dataSource",o.staticDataCache.ageRange),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.gender),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.ethnicity),e.R7$(),e.Y8G("ngIf",!o.locked),e.R7$(),e.Y8G("ngIf",o.locked),e.R7$(2),e.SpI("Created ",e.i5U(165,18,o.item.createdAt,"dd MMM yy HH:mm"),""))},dependencies:[m.bT,t.qT,t.me,t.Zm,t.BC,t.cb,t.tU,t.j4,t.JD,u.Wk,k.p,ae.A,F,m.vh],encapsulation:2})}}return a})();var ue=s(2874),pe=s(4312);function de(a,n){1&a&&(e.EFF(0),e.nI1(1,"date")),2&a&&e.SpI(" ",e.i5U(1,1,n.$implicit.createdAt,"dd MMM yyyy HH:mm:ss.SSS")," ")}function ce(a,n){if(1&a&&(e.EFF(0),e.nI1(1,"async")),2&a){const r=n.$implicit,i=e.XpG();e.SpI(" ",e.bMT(1,1,i.userService.formatUser(r.createdByUserId))," ")}}function me(a,n){if(1&a&&(e.j41(0,"pre",15),e.EFF(1),e.k0s()),2&a){const r=n.$implicit;e.R7$(),e.JRh(r.message)}}let he=(()=>{class a{constructor(r,i,o,l,p,h){this.route=r,this.router=i,this.formService=o,this.supportRequestChangeLogApi=l,this.staticDataCache=p,this.userService=h,this.destroyRef=(0,e.WQX)(e.abz),this.form=new t.gE({})}ngOnInit(){this.reset(this.route.snapshot.data.supportRequest)}reset(r){this.item=r}filter(r){r.supportRequestId=this.item.id}cancel(){this.reset(this.item),this.router.navigate(["support-request/support-request-list"])}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(u.nX),e.rXU(u.Ix),e.rXU(f.u),e.rXU(ue.j),e.rXU(v.t),e.rXU(pe.D))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["support-request-history"]],decls:29,vars:3,consts:[["itemTemplate",""],[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/support-request/support-request-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[3,"filter","dataSource"],["name","createdAy"],["name","createdBy"],["name","message"],[1,"floating-buttons"],[1,"button",3,"click"],[1,"grid-pre"]],template:function(i,o){if(1&i){const l=e.RV6();e.j41(0,"ul",1)(1,"li")(2,"a",2),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",3),e.EFF(6,"Support Requests"),e.k0s()(),e.j41(7,"li")(8,"a",4),e.EFF(9,"Support Request"),e.k0s()()(),e.j41(10,"div",5)(11,"div",6)(12,"div",7)(13,"h1",8),e.EFF(14,"SupportRequest"),e.k0s()()(),e.nrm(15,"support-request-tabs"),e.j41(16,"grid",9),e.bIt("filter",function(h){return e.eBV(l),e.Njj(o.filter(h))}),e.j41(17,"grid-column",10),e.DNE(18,de,2,4,"ng-template",null,0,e.C5r),e.k0s(),e.j41(20,"grid-column",11),e.DNE(21,ce,2,3,"ng-template",null,0,e.C5r),e.k0s(),e.j41(23,"grid-column",12),e.DNE(24,me,2,1,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(26,"div",13)(27,"button",14),e.bIt("click",function(){return e.eBV(l),e.Njj(o.cancel())}),e.EFF(28,"Close"),e.k0s()()()}2&i&&(e.R7$(8),e.Mz_("routerLink","/support-request/support-request-item/",o.item.id,""),e.R7$(8),e.Y8G("dataSource",o.supportRequestChangeLogApi))},dependencies:[u.Wk,T._,I.C,F,m.Jj,m.vh],encapsulation:2})}}return a})();const fe=[{path:"support-request-list",component:M,data:{activeSideMenu:"Triage"}},{path:"support-request-item/:id",component:te,resolve:{supportRequest:d.H.supportRequestResolver("id")},canDeactivate:[g.S.isPristine()],data:{activeSideMenu:"Triage"}},{path:"support-request-researcher/:id",component:le,resolve:{supportRequest:d.H.supportRequestResolver("id")},canDeactivate:[g.S.isPristine()],data:{activeSideMenu:"Triage"}},{path:"support-request-files/:id",component:oe,resolve:{supportRequest:d.H.supportRequestResolver("id")},canDeactivate:[g.S.isPristine()],data:{activeSideMenu:"Triage"}},{path:"support-request-history/:id",component:he,resolve:{supportRequest:d.H.supportRequestResolver("id")},data:{activeSideMenu:"Triage"}}];let ke=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[u.iI.forChild(fe),u.iI]})}}return a})(),ve=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({providers:[j,E],imports:[m.MD,y.G,ke]})}}return a})()}}]);