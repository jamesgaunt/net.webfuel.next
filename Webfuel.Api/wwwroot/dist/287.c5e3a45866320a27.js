"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[287],{7287:(gt,T,l)=>{l.r(T),l.d(T,{SupportRequestModule:()=>kt});var d=l(177),U=l(2896),u=l(4722),m=l(5260),j=l(1725),i=l(4341),e=l(4438),c=l(5377),v=l(3548),P=l(8933);let S=(()=>{class r{constructor(){this.route=(0,e.WQX)(u.nX),this.router=(0,e.WQX)(u.Ix),this.supportRequestApi=(0,e.WQX)(m.H),this.confirmDialog=(0,e.WQX)(P.T),this.staticDataCache=(0,e.WQX)(v.t),this.supportRequestStatus=null}ngOnInit(){this.reset(this.route.snapshot.data.supportRequest)}reset(t){this.item=t,this.resetStatus()}resetStatus(){this.staticDataCache.supportRequestStatus.get({id:this.item.statusId}).subscribe(t=>{this.supportRequestStatus=t,this.locked?this.applyLock():this.clearLock()})}applyLock(){}clearLock(){}get locked(){return this.item.statusId!=c.iT.ToBeTriaged&&this.item.statusId!=c.iT.OnHold}get referred(){return this.item.statusId==c.iT.ReferredToNIHRRSSExpertTeams}unlock(){this.confirmDialog.open({title:"Unlock Support Request",message:"Are you sure you want to return this support request to triage status?"}).subscribe(()=>{this.supportRequestApi.unlock({id:this.item.id},{successGrowl:"Support Request Unlocked"}).subscribe(t=>{this.reset(t)})})}static{this.\u0275fac=function(s){return new(s||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["ng-component"]],decls:0,vars:0,template:function(s,o){},encapsulation:2})}}return r})();var f=l(8829),Y=l(6628);let R=(()=>{class r{constructor(t,s){this.route=t,this.router=s}ngOnInit(){this.reset(this.route.snapshot.data.supportRequest)}reset(t){this.item=t}static{this.\u0275fac=function(s){return new(s||r)(e.rXU(u.nX),e.rXU(u.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["support-request-tabs"]],decls:17,vars:10,consts:[[1,"tabs"],["routerLinkActive","is-active"],[3,"routerLink"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"ul")(2,"li",1)(3,"a",2),e.EFF(4,"Request"),e.k0s()(),e.j41(5,"li",1)(6,"a",2),e.EFF(7,"Researcher"),e.k0s()(),e.j41(8,"li",1)(9,"a",2),e.EFF(10,"Support"),e.k0s()(),e.j41(11,"li",1)(12,"a",2),e.EFF(13,"Files"),e.k0s()(),e.j41(14,"li",1)(15,"a",2),e.EFF(16,"History"),e.k0s()()()()),2&s&&(e.R7$(3),e.Mz_("routerLink","../../support-request-item/",o.item.id,""),e.R7$(3),e.Mz_("routerLink","../../support-request-researcher/",o.item.id,""),e.R7$(3),e.Mz_("routerLink","../../support-request-support/",o.item.id,""),e.R7$(3),e.Mz_("routerLink","../../support-request-files/",o.item.id,""),e.R7$(3),e.Mz_("routerLink","../../support-request-history/",o.item.id,""))},dependencies:[u.Wk,u.wQ],encapsulation:2})}}return r})(),V=(()=>{class r extends S{constructor(t,s){super(),this.formService=t,this.supportRequestApi=s,this.form=new i.gE({})}cancel(){this.reset(this.item),this.router.navigate(["support-request/support-request-list"])}static{this.\u0275fac=function(s){return new(s||r)(e.rXU(f.u),e.rXU(m.H))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["support-request-files"]],features:[e.Vt3],decls:19,vars:5,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/support-request/support-request-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[1,"message","is-primary"],[3,"fileStorageGroupId","locked"]],template:function(s,o){1&s&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",2),e.EFF(6,"Support Requests"),e.k0s()(),e.j41(7,"li")(8,"a",3),e.EFF(9,"Support Request"),e.k0s()()(),e.j41(10,"div",4)(11,"div",5)(12,"div",6)(13,"h1",7),e.EFF(14,"Support Request"),e.k0s()()(),e.nrm(15,"support-request-tabs"),e.j41(16,"div",8),e.EFF(17),e.k0s(),e.nrm(18,"file-browser",9),e.k0s()),2&s&&(e.R7$(8),e.Mz_("routerLink","/support-request/support-request-item/",o.item.id,""),e.R7$(9),e.JRh(null==o.supportRequestStatus?null:o.supportRequestStatus.name),e.R7$(),e.Y8G("fileStorageGroupId",o.item.fileStorageGroupId)("locked",o.locked))},dependencies:[u.Wk,Y.w,R],encapsulation:2})}}return r})();var X=l(2874),y=l(4312),w=l(1062),N=l(1435);function L(r,a){1&r&&(e.EFF(0),e.nI1(1,"date")),2&r&&e.SpI(" ",e.i5U(1,1,a.$implicit.createdAt,"dd MMM yyyy HH:mm:ss.SSS")," ")}function B(r,a){if(1&r&&(e.EFF(0),e.nI1(1,"async")),2&r){const t=a.$implicit,s=e.XpG();e.SpI(" ",e.bMT(1,1,s.userService.formatUser(t.createdByUserId))," ")}}function H(r,a){if(1&r&&(e.j41(0,"pre",15),e.EFF(1),e.k0s()),2&r){const t=a.$implicit;e.R7$(),e.JRh(t.message)}}let O=(()=>{class r{constructor(t,s,o,n,p,h){this.route=t,this.router=s,this.formService=o,this.supportRequestChangeLogApi=n,this.staticDataCache=p,this.userService=h,this.destroyRef=(0,e.WQX)(e.abz),this.form=new i.gE({})}ngOnInit(){this.reset(this.route.snapshot.data.supportRequest)}reset(t){this.item=t}filter(t){t.supportRequestId=this.item.id}cancel(){this.reset(this.item),this.router.navigate(["support-request/support-request-list"])}static{this.\u0275fac=function(s){return new(s||r)(e.rXU(u.nX),e.rXU(u.Ix),e.rXU(f.u),e.rXU(X.j),e.rXU(v.t),e.rXU(y.D))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["support-request-history"]],decls:29,vars:3,consts:[["itemTemplate",""],[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/support-request/support-request-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[3,"filter","dataSource"],["name","createdAy"],["name","createdBy"],["name","message"],[1,"floating-buttons"],[1,"button",3,"click"],[1,"grid-pre"]],template:function(s,o){if(1&s){const n=e.RV6();e.j41(0,"ul",1)(1,"li")(2,"a",2),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",3),e.EFF(6,"Support Requests"),e.k0s()(),e.j41(7,"li")(8,"a",4),e.EFF(9,"Support Request"),e.k0s()()(),e.j41(10,"div",5)(11,"div",6)(12,"div",7)(13,"h1",8),e.EFF(14,"SupportRequest"),e.k0s()()(),e.nrm(15,"support-request-tabs"),e.j41(16,"grid",9),e.bIt("filter",function(h){return e.eBV(n),e.Njj(o.filter(h))}),e.j41(17,"grid-column",10),e.DNE(18,L,2,4,"ng-template",null,0,e.C5r),e.k0s(),e.j41(20,"grid-column",11),e.DNE(21,B,2,3,"ng-template",null,0,e.C5r),e.k0s(),e.j41(23,"grid-column",12),e.DNE(24,H,2,1,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(26,"div",13)(27,"button",14),e.bIt("click",function(){return e.eBV(n),e.Njj(o.cancel())}),e.EFF(28,"Close"),e.k0s()()()}2&s&&(e.R7$(8),e.Mz_("routerLink","/support-request/support-request-item/",o.item.id,""),e.R7$(8),e.Y8G("dataSource",o.supportRequestChangeLogApi))},dependencies:[u.Wk,w._,N.C,R,d.Jj,d.vh],encapsulation:2})}}return r})();var k=l(850),W=l(4877),g=l(7520),b=l(9636),F=l(2817),_=l(1449);function z(r,a){1&r&&e.EFF(0),2&r&&e.SpI(" ",a.$implicit.name," ")}function Q(r,a){1&r&&e.EFF(0),2&r&&e.SpI(" ",a.$implicit.name," ")}function Z(r,a){if(1&r&&(e.j41(0,"div",5)(1,"div",14)(2,"div",6)(3,"label",7),e.EFF(4,"Time in hours (0 - 8)"),e.k0s(),e.nrm(5,"input",15),e.k0s(),e.j41(6,"div",6)(7,"label",7),e.EFF(8,"Pre/Post Award"),e.k0s(),e.nrm(9,"dropdown-select",16),e.k0s()(),e.j41(10,"div",6)(11,"label",7),e.EFF(12,"Support provided (include all types of support provided)"),e.k0s(),e.nrm(13,"dropdown-multi-select",17),e.k0s(),e.j41(14,"div",6)(15,"label",7),e.EFF(16,"Description of support provided/requested"),e.k0s(),e.nrm(17,"textarea",18),e.k0s(),e.j41(18,"div",6)(19,"label",7),e.EFF(20,"Request additional support from another team"),e.k0s(),e.j41(21,"dropdown-select",19),e.DNE(22,z,1,1,"ng-template",null,0,e.C5r)(24,Q,1,1,"ng-template",null,1,e.C5r),e.k0s()()()),2&r){const t=e.XpG();e.R7$(9),e.Y8G("dataSource",t.staticDataCache.isPrePostAward),e.R7$(4),e.Y8G("dataSource",t.staticDataCache.supportProvided),e.R7$(8),e.Y8G("dataSource",t.staticDataCache.supportTeam)("enableClear",!0)}}function K(r,a){1&r&&(e.j41(0,"div")(1,"div",6)(2,"label",7),e.EFF(3,"Reason for triage decision"),e.k0s(),e.nrm(4,"input",20),e.k0s()())}let A=(()=>{class r extends g.u{open(t){return this._open(ee,t,{disableClose:!0})}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(r)))(o||r)}})()}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac})}}return r})(),ee=(()=>{class r extends g.V{constructor(t,s,o,n){super(),this.router=t,this.formService=s,this.supportRequestApi=o,this.staticDataCache=n,this.form=new i.gE({id:new i.MJ("",{validators:i.k0.required,nonNullable:!0}),statusId:new i.MJ(null,{validators:i.k0.required,nonNullable:!0}),supportProvidedIds:new i.MJ([],{nonNullable:!0}),description:new i.MJ("",{nonNullable:!0}),workTimeInHours:new i.MJ(null,{nonNullable:!0}),supportRequestedTeamId:new i.MJ(null),isPrePostAwardId:new i.MJ(c.cV.PreAward,{nonNullable:!0}),triageNote:new i.MJ("",{nonNullable:!0})}),this.submitting=0,this.form.patchValue({id:this.data.supportRequest.id,statusId:this.data.supportRequest.statusId,triageNote:this.data.supportRequest.triageNote}),this.staticDataCache.supportProvided.query({skip:0,take:100}).subscribe(p=>{this.form.patchValue({supportProvidedIds:b.A.map(b.A.filter(p.items,h=>h.default),h=>h.id)})}),this.form.controls.statusId.valueChanges.subscribe(p=>{this.form.controls.workTimeInHours.setValidators(p==c.iT.ReferredToNIHRRSSExpertTeams?[i.k0.required,i.k0.min(0),i.k0.max(8)]:[]),this.form.controls.workTimeInHours.updateValueAndValidity()})}get promoting(){return this.form.value.statusId==c.iT.ReferredToNIHRRSSExpertTeams}save(){this.formService.hasErrors(this.form)?this.submitting=0:this.submitting>0||(this.submitting=2,setTimeout(()=>{this.submitting--},1500),this.supportRequestApi.triage(this.form.getRawValue()).subscribe({next:t=>{this.submitting--,this._closeDialog(t),null!=t.projectId&&this.router.navigateByUrl(`/project/project-item/${t.projectId}`)},error:()=>{this.submitting--}}))}cancel(){this._cancelDialog()}static{this.\u0275fac=function(s){return new(s||r)(e.rXU(u.Ix),e.rXU(f.u),e.rXU(m.H),e.rXU(v.t))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["triage-support-request-dialog"]],features:[e.Vt3],decls:16,vars:4,consts:[["optionTemplate",""],["pickedTemplate",""],[1,"form","dialog","is-warning",3,"formGroup"],[1,"dialog-head"],[1,"dialog-body"],[1,"grid"],[1,"field"],[1,"label"],["placeholder","required","formControlName","statusId",3,"dataSource"],["class","grid",4,"ngIf"],[4,"ngIf"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"],[1,"flex"],["type","number","min","0","max","8","formControlName","workTimeInHours","placeholder","required",1,"input"],["placeholder","required","formControlName","isPrePostAwardId",3,"dataSource"],["placeholder","optional","formControlName","supportProvidedIds",3,"dataSource"],["formControlName","description","placeholder","required",1,"textarea",2,"height","150px"],["placeholder","optional","formControlName","supportRequestedTeamId",3,"dataSource","enableClear"],["formControlName","triageNote","placeholder","optional",1,"input"]],template:function(s,o){1&s&&(e.j41(0,"form",2)(1,"div",3),e.EFF(2," Triage Support Request. "),e.k0s(),e.j41(3,"div",4)(4,"div",5)(5,"div",6)(6,"label",7),e.EFF(7,"Please select outcome of triage"),e.k0s(),e.nrm(8,"dropdown-select",8),e.k0s(),e.DNE(9,Z,26,4,"div",9)(10,K,5,0,"div",10),e.k0s()(),e.j41(11,"div",11)(12,"button",12),e.bIt("click",function(){return o.save()}),e.EFF(13,"Save"),e.k0s(),e.j41(14,"button",13),e.bIt("click",function(){return o.cancel()}),e.EFF(15,"Cancel"),e.k0s()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(8),e.Y8G("dataSource",o.staticDataCache.supportRequestStatus),e.R7$(),e.Y8G("ngIf",o.promoting),e.R7$(),e.Y8G("ngIf",!o.promoting))},dependencies:[d.bT,i.qT,i.me,i.Q0,i.BC,i.cb,i.VZ,i.zX,i.j4,i.JD,F.p,_.C],encapsulation:2})}}return r})();var te=l(6929),re=l(6434);let D=(()=>{class r extends g.u{open(t){return this._open(ie,t,{width:"800px"})}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(r)))(o||r)}})()}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac})}}return r})(),ie=(()=>{class r extends g.V{constructor(t,s,o,n){super(),this.router=t,this.formService=s,this.sendEmailDialog=o,this.triageTemplateApi=n,this.form=new i.gE({triageTemplateId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0})})}save(){this.formService.hasErrors(this.form)||this.triageTemplateApi.generateEmail({triageTemplateId:this.form.getRawValue().triageTemplateId,supportRequestId:this.data.supportRequest.id}).subscribe(t=>{this.sendEmailDialog.open({request:t}).subscribe(()=>{}),this._cancelDialog()})}cancel(){this._cancelDialog()}static{this.\u0275fac=function(s){return new(s||r)(e.rXU(u.Ix),e.rXU(f.u),e.rXU(te.N),e.rXU(re.H))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["send-triage-template-dialog"]],features:[e.Vt3],decls:18,vars:2,consts:[[1,"form","dialog","is-warning",3,"formGroup"],[1,"dialog-head"],[1,"dialog-body"],[1,"message","is-warning"],[1,"field"],[1,"label"],["placeholder","required","formControlName","triageTemplateId",3,"dataSource"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"]],template:function(s,o){1&s&&(e.j41(0,"form",0)(1,"div",1),e.EFF(2," Send Triage Email "),e.k0s(),e.j41(3,"div",2)(4,"div",3),e.EFF(5," This feature is currently in test. The generated email template will be setup to send to your email address only. "),e.nrm(6,"br")(7,"br"),e.EFF(8," You can edit the template to add additional emails. Please ensure you check the content of the email carefully and add any additional information required before sending. "),e.k0s(),e.j41(9,"div",4)(10,"label",5),e.EFF(11,"Template"),e.k0s(),e.nrm(12,"dropdown-select",6),e.k0s()(),e.j41(13,"div",7)(14,"button",8),e.bIt("click",function(){return o.save()}),e.EFF(15,"Select Template"),e.k0s(),e.j41(16,"button",9),e.bIt("click",function(){return o.cancel()}),e.EFF(17,"Cancel"),e.k0s()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(12),e.Y8G("dataSource",o.triageTemplateApi))},dependencies:[i.qT,i.BC,i.cb,i.j4,i.JD,F.p],encapsulation:2})}}return r})();var oe=l(2571),C=l(9463);function se(r,a){if(1&r){const t=e.RV6();e.j41(0,"button",9),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.sendTriageTemplate())}),e.EFF(1,"Send Triage Email"),e.k0s()}}function ae(r,a){if(1&r){const t=e.RV6();e.j41(0,"button",42),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.triage())}),e.EFF(1,"Triage"),e.k0s()}}function ne(r,a){if(1&r&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.SpI(": ",t.item.triageNote,"")}}function le(r,a){if(1&r&&(e.j41(0,"div",43)(1,"a",44),e.nrm(2,"i",45),e.EFF(3," Click here to view the project associated with this support request"),e.k0s()()),2&r){const t=e.XpG();e.R7$(),e.Mz_("href","/project/project-request/",t.item.projectId,"",e.B4B)}}function pe(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",46)(1,"button",47),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.save(!1))}),e.EFF(2,"Save"),e.k0s(),e.j41(3,"button",47),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.save(!0))}),e.EFF(4,"Save & Close"),e.k0s(),e.j41(5,"button",48),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.cancel())}),e.EFF(6,"Cancel"),e.k0s()()}}function ue(r,a){if(1&r){const t=e.RV6();e.j41(0,"button",42),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.unlock())}),e.EFF(1,"Unlock"),e.k0s()}}function de(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",46),e.DNE(1,ue,2,0,"button",11),e.j41(2,"button",48),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.cancel())}),e.EFF(3,"Close"),e.k0s()()}if(2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.referred)}}function ce(r,a){1&r&&(e.j41(0,"p"),e.EFF(1,"Enquiry came via NIHR round robin link"),e.k0s())}let me=(()=>{class r extends S{constructor(t,s,o,n){super(),this.formService=t,this.alertDialog=s,this.triageSupportRequestDialog=o,this.sendTriageTemplateDialog=n,this.form=new i.gE({id:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),isThisRequestLinkedToAnExistingProject:new i.MJ(!1,{nonNullable:!0}),title:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),isFellowshipId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0}),nihrApplicationId:new i.MJ("",{nonNullable:!0}),proposedFundingStreamName:new i.MJ("",{nonNullable:!0}),targetSubmissionDate:new i.MJ(null),experienceOfResearchAwards:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),isTeamMembersConsultedId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0}),isResubmissionId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0}),briefDescription:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),supportRequested:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),applicationStageId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0}),applicationStageFreeText:new i.MJ("",{nonNullable:!0}),proposedFundingStreamId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0}),proposedFundingCallTypeId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0}),howDidYouFindUsId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0}),howDidYouFindUsFreeText:new i.MJ("",{nonNullable:!0}),whoElseIsOnTheStudyTeam:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),isCTUAlreadyInvolvedId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0}),isCTUAlreadyInvolvedFreeText:new i.MJ("",{nonNullable:!0}),professionalBackgroundIds:new i.MJ([],{validators:[k.b.minArrayLength(1)],nonNullable:!0}),professionalBackgroundFreeText:new i.MJ("",{nonNullable:!0}),wouldYouLikeToReceiveAGrantsmanshipReviewId:new i.MJ(null),isYourSupportRequestOnlyForAGrantsmanshipReviewId:new i.MJ(null),isRoundRobinEnquiry:new i.MJ(!1,{nonNullable:!0})})}reset(t){super.reset(t),this.form.patchValue(t),this.form.markAsPristine()}applyLock(){this.form.disable()}clearLock(){this.form.enable()}isRoundRobinEnquiry(){return this.form.getRawValue().isRoundRobinEnquiry}save(t){this.formService.hasErrors(this.form)||this.supportRequestApi.update(this.form.getRawValue(),{successGrowl:"Support Request Updated"}).subscribe(s=>{this.reset(s),t&&this.router.navigate(["support-request/support-request-list"])})}cancel(){this.reset(this.item),this.router.navigate(["support-request/support-request-list"])}printout(){this.router.navigate(["support-request/support-request-printout",this.item.id])}triage(){this.form.pristine?this.triageSupportRequestDialog.open({supportRequest:this.item}).subscribe(t=>{this.reset(t)}):this.alertDialog.open({title:"Warning",message:"Please save unsaved changes before triaging"})}sendTriageTemplate(){this.sendTriageTemplateDialog.open({supportRequest:this.item}).subscribe(()=>{})}static{this.\u0275fac=function(s){return new(s||r)(e.rXU(f.u),e.rXU(W.L),e.rXU(A),e.rXU(D))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["support-request-item"]],features:[e.Vt3],decls:120,vars:33,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/support-request/support-request-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[1,"header-buttons"],[1,"button","is-primary",3,"click"],["class","button is-primary",3,"click",4,"ngIf"],["class","button is-warning",3,"click",4,"ngIf"],[1,"message","is-primary"],[1,"form",3,"formGroup"],[1,"flex"],["class","is-12",4,"ngIf"],[1,"field","is-12"],[1,"label"],["type","text","placeholder","required","formControlName","title",1,"input"],[1,"checkbox"],["type","checkbox","formControlName","isThisRequestLinkedToAnExistingProject"],[1,"field","is-6"],["placeholder","required","formControlName","applicationStageId",3,"dataSource","freeTextControl"],["placeholder","required","formControlName","isFellowshipId",3,"dataSource"],["placeholder","required","formControlName","proposedFundingStreamId",3,"dataSource"],["type","text","placeholder","optional","formControlName","proposedFundingStreamName",1,"input"],["placeholder","required","formControlName","proposedFundingCallTypeId",3,"dataSource"],["type","text","placeholder","optional","formControlName","nihrApplicationId","maxlength","64",1,"input"],["placeholder","optional","formControlName","targetSubmissionDate"],["placeholder","required","formControlName","isTeamMembersConsultedId",3,"dataSource"],["placeholder","required","formControlName","isResubmissionId",3,"dataSource"],["freeTextPlaceholder","Please specify which CTU is already involved...","placeholder","required","formControlName","isCTUAlreadyInvolvedId",3,"dataSource","freeTextControl"],["placeholder","required","formControlName","howDidYouFindUsId",3,"dataSource","freeTextControl"],["formControlName","experienceOfResearchAwards","placeholder","required"],["formControlName","briefDescription","placeholder","required"],["formControlName","supportRequested","placeholder","required"],["formControlName","whoElseIsOnTheStudyTeam","placeholder","required","maxlength","2000"],["placeholder","required","formControlName","professionalBackgroundIds",3,"dataSource","enableClear","freeTextControl"],["placeholder","optional","formControlName","wouldYouLikeToReceiveAGrantsmanshipReviewId",3,"dataSource","enableClear"],["placeholder","optional","formControlName","isYourSupportRequestOnlyForAGrantsmanshipReviewId",3,"dataSource","enableClear"],["class","floating-buttons",4,"ngIf"],[4,"ngIf"],[1,"button","is-warning",3,"click"],[1,"is-12"],[1,"link","is-primary",3,"href"],[1,"fas","fa-link"],[1,"floating-buttons"],[1,"button","is-success",3,"click"],[1,"button",3,"click"]],template:function(s,o){1&s&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",2),e.EFF(6,"Support Requests"),e.k0s()(),e.j41(7,"li")(8,"a",3),e.EFF(9,"Support Request"),e.k0s()()(),e.j41(10,"div",4)(11,"div",5)(12,"div",6)(13,"h1",7),e.EFF(14,"Support Request"),e.k0s()(),e.j41(15,"div",6)(16,"div",8)(17,"button",9),e.bIt("click",function(){return o.printout()}),e.EFF(18,"Print View"),e.k0s(),e.DNE(19,se,2,0,"button",10)(20,ae,2,0,"button",11),e.k0s()()(),e.nrm(21,"support-request-tabs"),e.j41(22,"div",12),e.EFF(23),e.DNE(24,ne,2,1,"span"),e.k0s(),e.j41(25,"form",13)(26,"div",14),e.DNE(27,le,4,2,"div",15),e.j41(28,"div",16)(29,"label",17),e.EFF(30,"Working title of the project"),e.k0s(),e.nrm(31,"input",18),e.k0s(),e.j41(32,"div",16)(33,"label",17),e.EFF(34,"Is this request linked to a current project?"),e.k0s(),e.j41(35,"div",19)(36,"label"),e.nrm(37,"input",20),e.EFF(38," Please tick this checkbox if you have already submitted a request in relation to this project."),e.k0s()()(),e.j41(39,"div",21)(40,"label",17),e.EFF(41,"Stage of application"),e.k0s(),e.nrm(42,"dropdown-select",22),e.k0s(),e.j41(43,"div",21)(44,"label",17),e.EFF(45,"Is this application for a fellowship?"),e.k0s(),e.nrm(46,"dropdown-select",23),e.k0s(),e.j41(47,"div",21)(48,"label",17),e.EFF(49,"Proposed funding stream"),e.k0s(),e.nrm(50,"dropdown-select",24),e.k0s(),e.j41(51,"div",21)(52,"label",17),e.EFF(53,"Funding stream name / specialist call if known"),e.k0s(),e.nrm(54,"input",25),e.k0s(),e.j41(55,"div",21)(56,"label",17),e.EFF(57,"Type of call"),e.k0s(),e.nrm(58,"dropdown-select",26),e.k0s(),e.j41(59,"div",21)(60,"label",17),e.EFF(61,"NIHR application ID if known"),e.k0s(),e.nrm(62,"input",27),e.k0s(),e.j41(63,"div",21)(64,"label",17),e.EFF(65,"Target submission date (if known)"),e.k0s(),e.nrm(66,"date-picker",28),e.k0s(),e.j41(67,"div",21)(68,"label",17),e.EFF(69,"Have your team members been consulted for support?"),e.k0s(),e.nrm(70,"dropdown-select",29),e.k0s(),e.j41(71,"div",21)(72,"label",17),e.EFF(73,"Has the application or similar been submitted to a funder before?"),e.k0s(),e.nrm(74,"dropdown-select",30),e.k0s(),e.j41(75,"div",21)(76,"label",17),e.EFF(77,"Have you already got a CTU involved and if so which one?"),e.k0s(),e.nrm(78,"dropdown-select",31),e.k0s(),e.j41(79,"div",21)(80,"label",17),e.EFF(81,"How did you hear about our hub?"),e.k0s(),e.nrm(82,"dropdown-select",32),e.k0s(),e.j41(83,"div",16)(84,"label",17),e.EFF(85,"What is your (or the CIs) experience of securing funding awards?"),e.k0s(),e.nrm(86,"text-area",33),e.k0s(),e.j41(87,"div",16)(88,"label",17),e.EFF(89," Please add a brief description of your proposed study. Where possible include an outline of research question, aims, need and methods (including analysis), potential impact. [max 500 words] "),e.k0s(),e.nrm(90,"text-area",34),e.k0s(),e.j41(91,"div",16)(92,"label",17),e.EFF(93," What support are you looking for from RSS? Eg funding advice, methods advice, PPIE and EDI advice, CTU support, training in methods for grants? "),e.nrm(94,"br"),e.j41(95,"i"),e.EFF(96,"* If you are requesting a grantsmanship review as a standalone service, please state \u2018grantsmanship review service\u2019 below."),e.k0s()(),e.nrm(97,"text-area",35),e.k0s(),e.j41(98,"div",16)(99,"label",17),e.EFF(100," Who else is on your study team and what is their expertise? "),e.k0s(),e.nrm(101,"text-area",36),e.k0s(),e.j41(102,"div",16)(103,"label",17),e.EFF(104,"What is the professional background of all team/applicants? (select all that apply)"),e.k0s(),e.nrm(105,"dropdown-multi-select",37),e.k0s(),e.j41(106,"div",21)(107,"label",17),e.EFF(108,"Would you like to receive a grantsmanship review?"),e.k0s(),e.nrm(109,"dropdown-select",38),e.k0s(),e.j41(110,"div",21)(111,"label",17),e.EFF(112,"Is your support request only for a grantsmanship review?"),e.k0s(),e.nrm(113,"dropdown-select",39),e.k0s()(),e.DNE(114,pe,7,0,"div",40)(115,de,4,1,"div",40),e.k0s(),e.j41(116,"p"),e.EFF(117),e.nI1(118,"date"),e.k0s(),e.DNE(119,ce,2,0,"p",41),e.k0s()),2&s&&(e.R7$(8),e.Mz_("routerLink","/support-request/support-request-item/",o.item.id,""),e.R7$(11),e.Y8G("ngIf",!0),e.R7$(),e.Y8G("ngIf",!o.locked),e.R7$(3),e.SpI(" ",null==o.supportRequestStatus?null:o.supportRequestStatus.name," "),e.R7$(),e.vxM(24,o.item.triageNote?24:-1),e.R7$(),e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("ngIf",o.item.projectId),e.R7$(15),e.Y8G("dataSource",o.staticDataCache.applicationStage)("freeTextControl",o.form.controls.applicationStageFreeText),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.isFellowship),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.fundingStream),e.R7$(8),e.Y8G("dataSource",o.staticDataCache.fundingCallType),e.R7$(12),e.Y8G("dataSource",o.staticDataCache.isTeamMembersConsulted),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.isResubmission),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.isCTUAlreadyInvolved)("freeTextControl",o.form.controls.isCTUAlreadyInvolvedFreeText),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.howDidYouFindUs)("freeTextControl",o.form.controls.howDidYouFindUsFreeText),e.R7$(23),e.Y8G("dataSource",o.staticDataCache.researcherProfessionalBackground)("enableClear",!0)("freeTextControl",o.form.controls.professionalBackgroundFreeText),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.isYesNo)("enableClear",!0),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.isYesNo)("enableClear",!0),e.R7$(),e.Y8G("ngIf",!o.locked),e.R7$(),e.Y8G("ngIf",o.locked),e.R7$(2),e.SpI("Created ",e.i5U(118,30,o.item.createdAt,"dd MMM yy HH:mm"),""),e.R7$(2),e.Y8G("ngIf",o.isRoundRobinEnquiry()))},dependencies:[d.bT,i.qT,i.me,i.Zm,i.BC,i.cb,i.tU,i.j4,i.JD,u.Wk,oe.Q,F.p,_.C,C.I,R,d.vh],encapsulation:2})}}return r})();var fe=l(6089),he=l(3376),Fe=l(1050),ve=l(9779);let ke=(()=>{class r{constructor(t,s,o,n,p){this.router=t,this.activatedRoute=s,this.supportRequestApi=o,this.staticDataCache=n,this.reportService=p,this.filterForm=new i.gE({number:new i.MJ("",{nonNullable:!0}),fromDate:new i.MJ(null),toDate:new i.MJ(null),statusId:new i.MJ(null),title:new i.MJ("",{nonNullable:!0}),teamContactFullName:new i.MJ("",{nonNullable:!0}),proposedFundingStreamId:new i.MJ(null)})}ngAfterViewInit(){this.activatedRoute.queryParams.subscribe(t=>this.applyFilterParams(t))}resetFilterForm(){this.filterForm.patchValue({number:"",fromDate:null,toDate:null,statusId:null,title:"",teamContactFullName:"",proposedFundingStreamId:null})}add(){window.open("/external/support-request","_blank")}edit(t){this.router.navigate(["support-request/support-request-item",t.id])}export(){this.supportRequestApi.export(b.A.merge(this.filterForm.getRawValue(),{skip:0,take:0})).subscribe(t=>{this.reportService.runReport(t)})}applyFilterParams(t){switch(t.show){case"all":return void this.resetFilterForm();case"to-be-triaged":return this.resetFilterForm(),void this.filterForm.patchValue({statusId:c.iT.ToBeTriaged});case"on-hold":return this.resetFilterForm(),void this.filterForm.patchValue({statusId:c.iT.OnHold});case"referred-to-rss-team":return this.resetFilterForm(),void this.filterForm.patchValue({statusId:c.iT.ReferredToNIHRRSSExpertTeams})}}static{this.\u0275fac=function(s){return new(s||r)(e.rXU(u.Ix),e.rXU(u.nX),e.rXU(m.H),e.rXU(v.t),e.rXU(fe.G))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["support-request-list"]],decls:43,vars:12,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/support-request/support-request-list"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[1,"header-buttons"],[1,"button","is-primary",3,"click"],[1,"filter-form"],[1,"form",3,"formGroup"],[1,"flex"],[1,"field","is-4"],["type","text","formControlName","title","placeholder","Title",1,"input"],["type","text","formControlName","teamContactFullName","placeholder","Contact Name",1,"input"],["placeholder","Status","formControlName","statusId",3,"dataSource","enableClear"],["placeholder","Proposed Funding Stream","formControlName","proposedFundingStreamId",3,"dataSource","enableClear"],["placeholder","From Date","formControlName","fromDate",3,"enableClear"],["placeholder","To Date","formControlName","toDate",3,"enableClear"],[1,"is-12","is-right"],[1,"button","is-small",3,"click"],["stateKey","SupportRequestList",3,"dataSource","filterForm"],["name","dateOfRequest","label","Date"],["name","statusId",3,"dataSource"],["name","teamContactFullName","label","Contact Name"],["name","title"],["name","targetSubmissionDate","label","Target Submission Date"],["name","proposedFundingStreamId","label","Proposed Funding Stream",3,"dataSource"],[3,"add","edit","canDelete"]],template:function(s,o){1&s&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",2),e.EFF(6,"Triage Support Requests"),e.k0s()()(),e.j41(7,"div",3)(8,"div",4)(9,"div",5)(10,"h1",6),e.EFF(11,"Triage Support Requests"),e.k0s()(),e.j41(12,"div",5)(13,"div",7)(14,"button",8),e.bIt("click",function(){return o.export()}),e.EFF(15,"Export"),e.k0s()()()(),e.j41(16,"div",9)(17,"form",10)(18,"div",11)(19,"div",12),e.nrm(20,"input",13),e.k0s(),e.j41(21,"div",12),e.nrm(22,"input",14),e.k0s(),e.j41(23,"div",12),e.nrm(24,"dropdown-select",15),e.k0s()(),e.j41(25,"div",11)(26,"div",12),e.nrm(27,"dropdown-select",16),e.k0s(),e.j41(28,"div",12),e.nrm(29,"date-picker",17),e.k0s(),e.j41(30,"div",12),e.nrm(31,"date-picker",18),e.k0s(),e.j41(32,"div",19)(33,"button",20),e.bIt("click",function(){return o.resetFilterForm()}),e.EFF(34,"show all"),e.k0s()()()()(),e.j41(35,"grid",21),e.nrm(36,"grid-date-column",22)(37,"grid-reference-column",23)(38,"grid-column",24)(39,"grid-column",25)(40,"grid-date-column",26)(41,"grid-reference-column",27),e.j41(42,"grid-action-column",28),e.bIt("add",function(){return o.add()})("edit",function(p){return o.edit(p)}),e.k0s()()()),2&s&&(e.R7$(17),e.Y8G("formGroup",o.filterForm),e.R7$(7),e.Y8G("dataSource",o.staticDataCache.supportRequestStatus)("enableClear",!0),e.R7$(3),e.Y8G("dataSource",o.staticDataCache.fundingStream)("enableClear",!0),e.R7$(2),e.Y8G("enableClear",!0),e.R7$(2),e.Y8G("enableClear",!0),e.R7$(4),e.Y8G("dataSource",o.supportRequestApi)("filterForm",o.filterForm),e.R7$(2),e.Y8G("dataSource",o.staticDataCache.supportRequestStatus),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.fundingStream),e.R7$(),e.Y8G("canDelete",!1))},dependencies:[i.qT,i.me,i.BC,i.cb,i.j4,i.JD,u.Wk,F.p,C.I,w._,N.C,he.y,Fe.u,ve.h],encapsulation:2})}}return r})();var ge=l(7852);function Re(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e.EFF(4,"Support Request Print View"),e.k0s()(),e.j41(5,"div",2)(6,"div",4)(7,"button",5),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.print())}),e.EFF(8,"Print"),e.k0s(),e.j41(9,"button",5),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.back())}),e.EFF(10,"Back"),e.k0s()()()(),e.j41(11,"div",6),e.nrm(12,"img",7),e.j41(13,"h1"),e.EFF(14,"Imperial College London and Partners Hub"),e.k0s(),e.nrm(15,"hr"),e.j41(16,"h2"),e.EFF(17,"Research Support Service request form"),e.k0s(),e.j41(18,"h2"),e.EFF(19,"Project Details"),e.k0s(),e.j41(20,"p"),e.EFF(21,"Please tell us more about your project. Please complete all required fields, selecting 'Not Known' if necessary."),e.k0s(),e.j41(22,"div",8)(23,"label",9),e.EFF(24,"Working title of the project"),e.k0s(),e.EFF(25),e.k0s(),e.j41(26,"div",10)(27,"label",9),e.EFF(28,"Stage of application"),e.k0s(),e.j41(29,"div"),e.EFF(30),e.k0s(),e.j41(31,"div"),e.EFF(32),e.k0s()(),e.j41(33,"div",10)(34,"label",9),e.EFF(35,"Is this application for a fellowship?"),e.k0s(),e.j41(36,"div"),e.EFF(37),e.k0s()(),e.j41(38,"div",10)(39,"label",9),e.EFF(40,"Proposed funding stream"),e.k0s(),e.j41(41,"div"),e.EFF(42),e.k0s()(),e.j41(43,"div",10)(44,"label",9),e.EFF(45,"Funding stream name / specialist call if known"),e.k0s(),e.j41(46,"div"),e.EFF(47),e.k0s()(),e.j41(48,"div",10)(49,"label",9),e.EFF(50,"Type of call"),e.k0s(),e.j41(51,"div"),e.EFF(52),e.k0s()(),e.j41(53,"div",10)(54,"label",9),e.EFF(55,"NIHR application ID if known"),e.k0s(),e.j41(56,"div"),e.EFF(57),e.k0s()(),e.j41(58,"div",10)(59,"label",9),e.EFF(60,"Target submission date (if known)"),e.k0s(),e.j41(61,"div"),e.EFF(62),e.nI1(63,"date"),e.k0s()(),e.j41(64,"div",10)(65,"label",9),e.EFF(66,"Have your team members been consulted for support?"),e.k0s(),e.j41(67,"div"),e.EFF(68),e.k0s()(),e.j41(69,"div",10)(70,"label",9),e.EFF(71,"Has the application or similar been submitted to a funder before?"),e.k0s(),e.j41(72,"div"),e.EFF(73),e.k0s()(),e.j41(74,"div",10)(75,"label",9),e.EFF(76,"Have you already got a CTU involved and if so which one?"),e.k0s(),e.j41(77,"div"),e.EFF(78),e.k0s(),e.j41(79,"div"),e.EFF(80),e.k0s()(),e.j41(81,"div",10)(82,"label",9),e.EFF(83,"How did you hear about our hub?"),e.k0s(),e.j41(84,"div"),e.EFF(85),e.k0s(),e.j41(86,"div"),e.EFF(87),e.k0s()(),e.j41(88,"div",8)(89,"label",9),e.EFF(90,"What is your (or the CIs) experience of securing funding awards?"),e.k0s(),e.j41(91,"div"),e.EFF(92),e.k0s()(),e.j41(93,"div",8)(94,"label",9),e.EFF(95," Please add a brief description of your proposed study. Where possible include an outline of research question, aims, need and methods (you can also upload additional information below). [max 500 words] "),e.k0s(),e.j41(96,"div"),e.EFF(97),e.k0s()(),e.j41(98,"div",8)(99,"label",9),e.EFF(100," What support are you looking for from RSS? Eg funding advice, methods advice, PPIE and EDI advice, CTU support, training in methods for grants, plain english summary review? "),e.nrm(101,"br"),e.j41(102,"i"),e.EFF(103,"* If you are requesting a grantsmanship review as a standalone service, please state \u2018grantsmanship review service\u2019 below."),e.k0s()(),e.j41(104,"div"),e.EFF(105),e.k0s()(),e.j41(106,"div",8)(107,"label",9),e.EFF(108," Who else is on your study team and what is their expertise? "),e.k0s(),e.j41(109,"div"),e.EFF(110),e.k0s()(),e.j41(111,"div",8)(112,"label",9),e.EFF(113,"What is the professional background of all team/applicants? (select all that apply)"),e.k0s(),e.j41(114,"div"),e.EFF(115),e.k0s(),e.j41(116,"div"),e.EFF(117),e.k0s()(),e.j41(118,"div",10)(119,"label",9),e.EFF(120,"Would you like to receive a grantsmanship review?"),e.k0s(),e.j41(121,"div"),e.EFF(122),e.k0s()(),e.j41(123,"div",10)(124,"label",9),e.EFF(125,"Is your support request only for a grantsmanship review?"),e.k0s(),e.j41(126,"div"),e.EFF(127),e.k0s()(),e.nrm(128,"hr",11),e.j41(129,"h2"),e.EFF(130,"Contact Details"),e.k0s(),e.j41(131,"p"),e.EFF(132,"Please enter the details for the person we will contact regarding this project (this may or may not be the chief investigator)."),e.k0s(),e.j41(133,"div",8)(134,"label",9),e.EFF(135,"Title"),e.k0s(),e.j41(136,"div"),e.EFF(137),e.k0s()(),e.j41(138,"div",8)(139,"label",9),e.EFF(140,"First name"),e.k0s(),e.j41(141,"div"),e.EFF(142),e.k0s()(),e.j41(143,"div",8)(144,"label",9),e.EFF(145,"Last name"),e.k0s(),e.j41(146,"div"),e.EFF(147),e.k0s()(),e.j41(148,"div",8)(149,"label",9),e.EFF(150,"Email"),e.k0s(),e.j41(151,"div"),e.EFF(152),e.k0s()(),e.j41(153,"div",8)(154,"label",9),e.EFF(155,"Alternative Email"),e.k0s(),e.j41(156,"div"),e.EFF(157),e.k0s()(),e.j41(158,"div",8)(159,"label",9),e.EFF(160,"Role in application"),e.k0s(),e.j41(161,"div"),e.EFF(162),e.k0s(),e.j41(163,"div"),e.EFF(164),e.k0s()(),e.nrm(165,"hr",11),e.j41(166,"h2"),e.EFF(167,"Chief Investigator / Fellowship Applicant / Lead Applicant Details"),e.k0s(),e.j41(168,"p"),e.EFF(169," Please enter the details for the chief investigator for this project. If you are not a CI (i.e, you are an applicant from a company), please add the lead applicant\u2019s name and details here. "),e.k0s(),e.j41(170,"div",8)(171,"label",9),e.EFF(172,"Title"),e.k0s(),e.j41(173,"div"),e.EFF(174),e.k0s()(),e.j41(175,"div",8)(176,"label",9),e.EFF(177,"First name"),e.k0s(),e.j41(178,"div"),e.EFF(179),e.k0s()(),e.j41(180,"div",8)(181,"label",9),e.EFF(182,"Last name"),e.k0s(),e.j41(183,"div"),e.EFF(184),e.k0s()(),e.j41(185,"div",8)(186,"label",9),e.EFF(187,"Email"),e.k0s(),e.j41(188,"div"),e.EFF(189),e.k0s()(),e.j41(190,"div",8)(191,"label",9),e.EFF(192,"Job Role"),e.k0s(),e.j41(193,"div"),e.EFF(194),e.k0s()(),e.j41(195,"div",8)(196,"label",9),e.EFF(197,"Career Stage"),e.k0s(),e.j41(198,"div"),e.EFF(199),e.k0s()(),e.j41(200,"div",8)(201,"label",9),e.EFF(202,"Organisation Type"),e.k0s(),e.j41(203,"div"),e.EFF(204),e.k0s()(),e.j41(205,"div",8)(206,"label",9),e.EFF(207,"Organisation"),e.k0s(),e.j41(208,"div"),e.EFF(209),e.k0s()(),e.j41(210,"div",8)(211,"label",9),e.EFF(212,"Department"),e.k0s(),e.j41(213,"div"),e.EFF(214),e.k0s()(),e.j41(215,"div",8)(216,"label",9),e.EFF(217,"ORCID"),e.k0s(),e.j41(218,"div"),e.EFF(219),e.k0s()(),e.j41(220,"div",8)(221,"label",9),e.EFF(222,"Where are they located?"),e.k0s(),e.j41(223,"div"),e.EFF(224),e.k0s()(),e.j41(225,"div",8)(226,"label",9),e.EFF(227,"Is the chief investigator / fellowship applicant an NHS employee seeking RSS support for the first time?\xa0"),e.k0s(),e.j41(228,"div"),e.EFF(229),e.k0s()(),e.j41(230,"div",12)(231,"h3"),e.EFF(232,"Work Address"),e.k0s(),e.j41(233,"div",8)(234,"label",9),e.EFF(235,"Line 1"),e.k0s(),e.j41(236,"div"),e.EFF(237),e.k0s()(),e.j41(238,"div",8)(239,"label",9),e.EFF(240,"Line 2"),e.k0s(),e.j41(241,"div"),e.EFF(242),e.k0s()(),e.j41(243,"div",8)(244,"label",9),e.EFF(245,"Town/City"),e.k0s(),e.j41(246,"div"),e.EFF(247),e.k0s()(),e.j41(248,"div",8)(249,"label",9),e.EFF(250,"County"),e.k0s(),e.j41(251,"div"),e.EFF(252),e.k0s()(),e.j41(253,"div",8)(254,"label",9),e.EFF(255,"Country"),e.k0s(),e.j41(256,"div"),e.EFF(257),e.k0s()(),e.j41(258,"div",8)(259,"label",9),e.EFF(260,"Postcode"),e.k0s(),e.j41(261,"div"),e.EFF(262),e.k0s()()()()()}if(2&r){const t=e.XpG();e.R7$(25),e.SpI(" ",t.item.title," "),e.R7$(5),e.JRh(t.single(t.item.applicationStageId,t.s.applicationStage)),e.R7$(2),e.JRh(t.item.applicationStageFreeText),e.R7$(5),e.JRh(t.single(t.item.isFellowshipId,t.s.isFellowship)),e.R7$(5),e.JRh(t.single(t.item.proposedFundingStreamId,t.s.fundingStream)),e.R7$(5),e.JRh(t.item.proposedFundingStreamName),e.R7$(5),e.JRh(t.single(t.item.proposedFundingCallTypeId,t.s.fundingCallType)),e.R7$(5),e.JRh(t.item.nihrApplicationId),e.R7$(5),e.JRh(e.i5U(63,48,t.item.targetSubmissionDate,"dd MMM yyy")),e.R7$(6),e.JRh(t.single(t.item.isTeamMembersConsultedId,t.s.isTeamMembersConsulted)),e.R7$(5),e.JRh(t.single(t.item.isResubmissionId,t.s.isResubmission)),e.R7$(5),e.JRh(t.single(t.item.isCTUAlreadyInvolvedId,t.s.isCTUAlreadyInvolved)),e.R7$(2),e.JRh(t.item.isCTUAlreadyInvolvedFreeText),e.R7$(5),e.JRh(t.single(t.item.howDidYouFindUsId,t.s.howDidYouFindUs)),e.R7$(2),e.JRh(t.item.howDidYouFindUsFreeText),e.R7$(5),e.JRh(t.item.experienceOfResearchAwards),e.R7$(5),e.JRh(t.item.briefDescription),e.R7$(8),e.JRh(t.item.supportRequested),e.R7$(5),e.JRh(t.item.whoElseIsOnTheStudyTeam),e.R7$(5),e.JRh(t.multiple(t.item.professionalBackgroundIds,t.s.professionalBackground)),e.R7$(2),e.JRh(t.item.professionalBackgroundFreeText),e.R7$(5),e.JRh(t.single(t.item.wouldYouLikeToReceiveAGrantsmanshipReviewId,t.s.isYesNo)),e.R7$(5),e.JRh(t.single(t.item.isYourSupportRequestOnlyForAGrantsmanshipReviewId,t.s.isYesNo)),e.R7$(10),e.JRh(t.item.teamContactTitle),e.R7$(5),e.JRh(t.item.teamContactFirstName),e.R7$(5),e.JRh(t.item.teamContactLastName),e.R7$(5),e.JRh(t.item.teamContactEmail),e.R7$(5),e.JRh(t.item.teamContactAltEmail),e.R7$(5),e.JRh(t.single(t.item.teamContactRoleId,t.s.researcherRole)),e.R7$(2),e.JRh(t.item.teamContactRoleFreeText),e.R7$(10),e.JRh(t.item.leadApplicantTitle),e.R7$(5),e.JRh(t.item.leadApplicantFirstName),e.R7$(5),e.JRh(t.item.leadApplicantLastName),e.R7$(5),e.JRh(t.item.leadApplicantEmail),e.R7$(5),e.JRh(t.item.leadApplicantJobRole),e.R7$(5),e.JRh(t.single(t.item.leadApplicantCareerStageId,t.s.researcherCareerStage)),e.R7$(5),e.JRh(t.single(t.item.leadApplicantOrganisationTypeId,t.s.researcherOrganisationType)),e.R7$(5),e.JRh(t.item.leadApplicantOrganisation),e.R7$(5),e.JRh(t.item.leadApplicantDepartment),e.R7$(5),e.JRh(t.item.leadApplicantORCID),e.R7$(5),e.JRh(t.single(t.item.leadApplicantLocationId,t.s.researcherLocation)),e.R7$(5),e.JRh(t.single(t.item.isLeadApplicantNHSId,t.s.isLeadApplicantNHS)),e.R7$(8),e.JRh(t.item.leadApplicantAddressLine1),e.R7$(5),e.JRh(t.item.leadApplicantAddressLine2),e.R7$(5),e.JRh(t.item.leadApplicantAddressTown),e.R7$(5),e.JRh(t.item.leadApplicantAddressCounty),e.R7$(5),e.JRh(t.item.leadApplicantAddressCountry),e.R7$(5),e.JRh(t.item.leadApplicantAddressPostcode)}}function be(r,a){1&r&&(e.j41(0,"div",0)(1,"p"),e.EFF(2,"Loading..."),e.k0s()())}let Se=(()=>{class r{constructor(){this.route=(0,e.WQX)(u.nX),this.router=(0,e.WQX)(u.Ix),this.staticDataService=(0,e.WQX)(ge.a)}ngOnInit(){this.item=this.route.snapshot.data.supportRequest,this.staticDataService.staticData.subscribe(t=>{this.s=t})}back(){this.router.navigate(["support-request/support-request-item",this.item.id])}print(){window.print()}single(t,s){if(!t)return"Not Specified";const o=s.find(n=>n.id===t);return o?o.name:""}multiple(t,s){return t&&0!==t.length?t.map(o=>{const n=s.find(p=>p.id===o);return n?n.name:""}).filter(o=>o).join(", "):"Not Specified"}static{this.\u0275fac=function(s){return new(s||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["support-request-printout"]],decls:2,vars:1,consts:[[1,"container"],[1,"columns","noprint"],[1,"column"],[1,"title"],[1,"header-buttons"],[1,"button","is-primary",3,"click"],[1,"printout"],["src","https://www.webfuel.com/external/rss.png","alt","NIHR Research Support Service",2,"width","550px"],[1,"field"],[1,"label"],[1,"field","is-6"],[1,"external-form-divider"],[1,"is-6"]],template:function(s,o){1&s&&e.DNE(0,Re,263,51,"div",0)(1,be,3,0),2&s&&e.vxM(0,null!==o.item&&null!==o.s?0:1)},dependencies:[d.vh],encapsulation:2})}}return r})();var _e=l(5701);function Ce(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",50)(1,"button",51),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.save(!1))}),e.EFF(2,"Save"),e.k0s(),e.j41(3,"button",51),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.save(!0))}),e.EFF(4,"Save & Close"),e.k0s(),e.j41(5,"button",52),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.cancel())}),e.EFF(6,"Cancel"),e.k0s()()}}function je(r,a){if(1&r){const t=e.RV6();e.j41(0,"button",54),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.unlock())}),e.EFF(1,"Unlock"),e.k0s()}}function qe(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",50),e.DNE(1,je,2,0,"button",53),e.j41(2,"button",52),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.cancel())}),e.EFF(3,"Close"),e.k0s()()}if(2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.referred)}}let Ee=(()=>{class r extends S{constructor(t,s){super(),this.formService=t,this.supportRequestApi=s,this.form=new i.gE({id:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),teamContactTitle:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),teamContactFirstName:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),teamContactLastName:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),teamContactEmail:new i.MJ("",{validators:[i.k0.required,i.k0.email],nonNullable:!0}),teamContactAltEmail:new i.MJ("",{validators:[i.k0.email],nonNullable:!0}),teamContactRoleId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0}),teamContactRoleFreeText:new i.MJ("",{nonNullable:!0}),teamContactMailingPermission:new i.MJ(!1,{validators:[i.k0.requiredTrue],nonNullable:!0}),teamContactPrivacyStatementRead:new i.MJ(!1,{validators:[i.k0.requiredTrue],nonNullable:!0}),teamContactServiceAgreementRead:new i.MJ(!1,{validators:[i.k0.requiredTrue],nonNullable:!0}),leadApplicantTitle:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),leadApplicantFirstName:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),leadApplicantLastName:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),leadApplicantEmail:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),leadApplicantJobRole:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),leadApplicantCareerStage:new i.MJ("",{nonNullable:!0}),leadApplicantCareerStageId:new i.MJ(null,{}),leadApplicantOrganisationTypeId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0}),leadApplicantOrganisation:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),leadApplicantDepartment:new i.MJ("",{nonNullable:!0}),leadApplicantLocationId:new i.MJ(null,{}),leadApplicantAddressLine1:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),leadApplicantAddressLine2:new i.MJ("",{nonNullable:!0}),leadApplicantAddressTown:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),leadApplicantAddressCounty:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),leadApplicantAddressCountry:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),leadApplicantAddressPostcode:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),leadApplicantORCID:new i.MJ("",{nonNullable:!0}),isLeadApplicantNHSId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0}),leadApplicantAgeRangeId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0}),leadApplicantGenderId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0}),leadApplicantEthnicityId:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0})})}reset(t){super.reset(t),this.form.patchValue(t),this.form.markAsPristine()}applyLock(){this.form.disable()}clearLock(){this.form.enable()}save(t){this.formService.hasErrors(this.form)||this.supportRequestApi.updateResearcher(this.form.getRawValue(),{successGrowl:"Support Request Updated"}).subscribe(s=>{this.reset(s),t&&this.router.navigate(["support-request/support-request-list"])})}cancel(){this.reset(this.item),this.router.navigate(["support-request/support-request-list"])}static{this.\u0275fac=function(s){return new(s||r)(e.rXU(f.u),e.rXU(m.H))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["support-request-researcher"]],features:[e.Vt3],decls:166,vars:21,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/support-request/support-request-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[1,"message","is-primary"],[1,"form",3,"formGroup"],[1,"flex"],[1,"field","is-4"],[1,"label"],["placeholder","required","formControlName","teamContactTitle",3,"dataSource"],["type","text","placeholder","required","formControlName","teamContactFirstName",1,"input"],["type","text","placeholder","required","formControlName","teamContactLastName",1,"input"],["type","text","placeholder","required","formControlName","teamContactEmail",1,"input"],["type","text","placeholder","optional","formControlName","teamContactAltEmail","maxlength","64",1,"input"],["placeholder","required","formControlName","teamContactRoleId",3,"dataSource","freeTextControl"],[1,"field","is-12"],[1,"checkbox"],["type","checkbox","formControlName","teamContactMailingPermission"],["type","checkbox","formControlName","teamContactPrivacyStatementRead"],["type","checkbox","formControlName","teamContactServiceAgreementRead"],["target","_blank","href","https://www.imperial.ac.uk/nihr-research-support-service/service-agreement/",1,"link","is-primary"],[1,"fas","fa-external-link"],["placeholder","required","formControlName","leadApplicantTitle",3,"dataSource"],["type","text","placeholder","required","formControlName","leadApplicantFirstName",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantLastName",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantEmail","maxlength","64",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantJobRole",1,"input"],["placeholder","required","formControlName","leadApplicantCareerStageId",3,"dataSource"],["placeholder","required","formControlName","leadApplicantOrganisationTypeId",3,"dataSource"],["type","text","placeholder","required","formControlName","leadApplicantOrganisation",1,"input"],["type","text","placeholder","optional","formControlName","leadApplicantDepartment",1,"input"],["type","text","placeholder","optional","formControlName","leadApplicantORCID",1,"input"],["placeholder","required","formControlName","leadApplicantLocationId",3,"dataSource"],[1,"field","is-8"],["placeholder","required","formControlName","isLeadApplicantNHSId",3,"dataSource"],[1,"is-6"],["type","text","placeholder","required","formControlName","leadApplicantAddressLine1",1,"input"],["type","text","placeholder","optional","formControlName","leadApplicantAddressLine2",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantAddressTown",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantAddressCounty",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantAddressCountry",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantAddressPostcode",1,"input"],["placeholder","required","formControlName","leadApplicantAgeRangeId",3,"dataSource"],["placeholder","required","formControlName","leadApplicantGenderId",3,"dataSource"],["placeholder","required","formControlName","leadApplicantEthnicityId",3,"dataSource"],["class","floating-buttons",4,"ngIf"],[1,"floating-buttons"],[1,"button","is-success",3,"click"],[1,"button",3,"click"],["class","button is-warning",3,"click",4,"ngIf"],[1,"button","is-warning",3,"click"]],template:function(s,o){1&s&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",2),e.EFF(6,"Support Requests"),e.k0s()(),e.j41(7,"li")(8,"a",3),e.EFF(9,"Support Request"),e.k0s()()(),e.j41(10,"div",4)(11,"div",5)(12,"div",6)(13,"h1",7),e.EFF(14,"Support Request"),e.k0s()()(),e.nrm(15,"support-request-tabs"),e.j41(16,"div",8),e.EFF(17),e.k0s(),e.j41(18,"form",9)(19,"h2"),e.EFF(20,"Contact Details"),e.k0s(),e.j41(21,"div",10)(22,"div",11)(23,"label",12),e.EFF(24,"Title"),e.k0s(),e.nrm(25,"dropdown-text-input",13),e.k0s(),e.j41(26,"div",11)(27,"label",12),e.EFF(28,"First name"),e.k0s(),e.nrm(29,"input",14),e.k0s(),e.j41(30,"div",11)(31,"label",12),e.EFF(32,"Last name"),e.k0s(),e.nrm(33,"input",15),e.k0s(),e.j41(34,"div",11)(35,"label",12),e.EFF(36,"Email"),e.k0s(),e.nrm(37,"input",16),e.k0s(),e.j41(38,"div",11)(39,"label",12),e.EFF(40,"Alternative Email"),e.k0s(),e.nrm(41,"input",17),e.k0s(),e.j41(42,"div",11)(43,"label",12),e.EFF(44,"Role in application"),e.k0s(),e.nrm(45,"dropdown-select",18),e.k0s(),e.j41(46,"div",19)(47,"div",20)(48,"label"),e.nrm(49,"input",21),e.EFF(50," Please tick this checkbox to confirm you give us permission to contact you via email."),e.k0s()()(),e.j41(51,"div",19)(52,"div",20)(53,"label"),e.nrm(54,"input",22),e.EFF(55," Please tick this checkbox to confirm you have read our privacy statement."),e.k0s()()(),e.j41(56,"div",19)(57,"div",20)(58,"label"),e.nrm(59,"input",23),e.EFF(60," Please tick this checkbox to confirm you have read our "),e.j41(61,"a",24),e.EFF(62,"service agreement "),e.nrm(63,"i",25),e.k0s(),e.EFF(64,"."),e.k0s()()()(),e.j41(65,"h2"),e.EFF(66,"Chief Investigator Details"),e.k0s(),e.j41(67,"div",10)(68,"div",11)(69,"label",12),e.EFF(70,"Title"),e.k0s(),e.nrm(71,"dropdown-text-input",26),e.k0s(),e.j41(72,"div",11)(73,"label",12),e.EFF(74,"First name"),e.k0s(),e.nrm(75,"input",27),e.k0s(),e.j41(76,"div",11)(77,"label",12),e.EFF(78,"Last name"),e.k0s(),e.nrm(79,"input",28),e.k0s(),e.j41(80,"div",11)(81,"label",12),e.EFF(82,"Email"),e.k0s(),e.nrm(83,"input",29),e.k0s(),e.j41(84,"div",11)(85,"label",12),e.EFF(86,"Job Role"),e.k0s(),e.nrm(87,"input",30),e.k0s(),e.j41(88,"div",11)(89,"label",12),e.EFF(90,"Career Stage"),e.k0s(),e.nrm(91,"dropdown-select",31),e.k0s(),e.j41(92,"div",11)(93,"label",12),e.EFF(94,"Organisation Type"),e.k0s(),e.nrm(95,"dropdown-select",32),e.k0s(),e.j41(96,"div",11)(97,"label",12),e.EFF(98,"Organisation"),e.k0s(),e.nrm(99,"input",33),e.k0s(),e.j41(100,"div",11)(101,"label",12),e.EFF(102,"Department"),e.k0s(),e.nrm(103,"input",34),e.k0s(),e.j41(104,"div",11)(105,"label",12),e.EFF(106,"ORCID"),e.k0s(),e.nrm(107,"input",35),e.k0s(),e.j41(108,"div",11)(109,"label",12),e.EFF(110,"Where are they located?"),e.k0s(),e.nrm(111,"dropdown-select",36),e.k0s(),e.j41(112,"div",37)(113,"label",12),e.EFF(114," Is the chief investigator an NHS employee seeking RSS support for the first time?\xa0 "),e.k0s(),e.nrm(115,"dropdown-select",38),e.k0s()(),e.j41(116,"div",10)(117,"div",39)(118,"h3"),e.EFF(119,"Work Address"),e.k0s(),e.j41(120,"div",10)(121,"div",19)(122,"label",12),e.EFF(123,"Line 1"),e.k0s(),e.nrm(124,"input",40),e.k0s(),e.j41(125,"div",19)(126,"label",12),e.EFF(127,"Line 2"),e.k0s(),e.nrm(128,"input",41),e.k0s(),e.j41(129,"div",19)(130,"label",12),e.EFF(131,"Town/City"),e.k0s(),e.nrm(132,"input",42),e.k0s(),e.j41(133,"div",19)(134,"label",12),e.EFF(135,"County"),e.k0s(),e.nrm(136,"input",43),e.k0s(),e.j41(137,"div",19)(138,"label",12),e.EFF(139,"Country"),e.k0s(),e.nrm(140,"input",44),e.k0s(),e.j41(141,"div",19)(142,"label",12),e.EFF(143,"Postcode"),e.k0s(),e.nrm(144,"input",45),e.k0s()()(),e.j41(145,"div",39)(146,"h3"),e.EFF(147,"Enthnicity, Diversity & Inclusion"),e.k0s(),e.j41(148,"div",10)(149,"div",19)(150,"label",12),e.EFF(151,"Age Range"),e.k0s(),e.nrm(152,"dropdown-select",46),e.k0s(),e.j41(153,"div",19)(154,"label",12),e.EFF(155,"Gender"),e.k0s(),e.nrm(156,"dropdown-select",47),e.k0s(),e.j41(157,"div",19)(158,"label",12),e.EFF(159,"Ethnicity"),e.k0s(),e.nrm(160,"dropdown-select",48),e.k0s()()()(),e.DNE(161,Ce,7,0,"div",49)(162,qe,4,1,"div",49),e.k0s(),e.j41(163,"p"),e.EFF(164),e.nI1(165,"date"),e.k0s()()),2&s&&(e.R7$(8),e.Mz_("routerLink","/support-request/support-request-item/",o.item.id,""),e.R7$(9),e.JRh(null==o.supportRequestStatus?null:o.supportRequestStatus.name),e.R7$(),e.Y8G("formGroup",o.form),e.R7$(7),e.Y8G("dataSource",o.staticDataCache.title),e.R7$(20),e.Y8G("dataSource",o.staticDataCache.researcherRole)("freeTextControl",o.form.controls.teamContactRoleFreeText),e.R7$(26),e.Y8G("dataSource",o.staticDataCache.title),e.R7$(20),e.Y8G("dataSource",o.staticDataCache.researcherCareerStage),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.researcherOrganisationType),e.R7$(16),e.Y8G("dataSource",o.staticDataCache.researcherLocation),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.isLeadApplicantNHS),e.R7$(37),e.Y8G("dataSource",o.staticDataCache.ageRange),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.gender),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.ethnicity),e.R7$(),e.Y8G("ngIf",!o.locked),e.R7$(),e.Y8G("ngIf",o.locked),e.R7$(2),e.SpI("Created ",e.i5U(165,18,o.item.createdAt,"dd MMM yy HH:mm"),""))},dependencies:[d.bT,i.qT,i.me,i.Zm,i.BC,i.cb,i.tU,i.j4,i.JD,u.Wk,F.p,_e.A,R,d.vh],encapsulation:2})}}return r})();var q=l(9079),E=l(152),Ie=l(5312),Te=l(4247),$=l(9438),G=l(6540),ye=l(8651),J=l(5820);function we(r,a){1&r&&e.EFF(0),2&r&&e.SpI(" ",a.$implicit.name," ")}function Ne(r,a){1&r&&e.EFF(0),2&r&&e.SpI(" ",a.$implicit.name," ")}function Ae(r,a){1&r&&e.EFF(0),2&r&&e.SpI(" ",a.$implicit.fullName," ")}function De(r,a){1&r&&e.EFF(0),2&r&&e.SpI(" ",a.$implicit.fullName," ")}function $e(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",29),e.EFF(1),e.j41(2,"a",30),e.bIt("click",function(o){const n=e.eBV(t).$implicit,p=e.XpG();return e.Njj(p.removeExistingFile(n,o))}),e.nrm(3,"i",31),e.k0s()()}if(2&r){const t=a.$implicit;e.R7$(),e.SpI(" ",t.fileName,"\xa0\xa0\xa0")}}function Ge(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",32),e.EFF(1),e.j41(2,"a",30),e.bIt("click",function(o){const n=e.eBV(t).$implicit,p=e.XpG();return e.Njj(p.removeUploadedFile(n,o))}),e.nrm(3,"i",31),e.k0s()()}if(2&r){const t=a.$implicit;e.R7$(),e.SpI(" ",t.name,"\xa0\xa0\xa0")}}let M=(()=>{class r extends g.u{open(t){return this._open(Je,t,{width:"1000px",disableClose:!0})}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(r)))(o||r)}})()}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac})}}return r})(),Je=(()=>{class r extends $.J{constructor(t,s,o,n){super(),this.formService=t,this.userApi=s,this.staticDataCache=o,this.configurationService=n,this.form=new i.gE({projectSupportGroupId:new i.MJ("",{nonNullable:!0}),date:new i.MJ(null),teamIds:new i.MJ([],{validators:[k.b.minArrayLength(1)],nonNullable:!0}),adviserIds:new i.MJ([],{validators:[k.b.minArrayLength(1)],nonNullable:!0}),supportProvidedIds:new i.MJ([],{validators:[k.b.minArrayLength(1)],nonNullable:!0}),description:new i.MJ("",{validators:[i.k0.required],nonNullable:!0}),workTimeInHours:new i.MJ(null,{validators:[i.k0.required,i.k0.min(0),i.k0.max(8)],nonNullable:!0}),supportRequestedTeamId:new i.MJ(null),isPrePostAwardId:new i.MJ(c.cV.PreAward,{nonNullable:!0}),files:new i.MJ([],{nonNullable:!0})}),this.form.patchValue({projectSupportGroupId:this.data.projectSupportGroupId}),this.configurationService.configuration.subscribe(p=>{this.form.patchValue({adviserIds:null==p?.userId?[]:[p.userId]})})}save(){this.submitting||(this.submitting=!0,!1===this.form.valid?this.deferredSubmitFiles():this.submitFiles())}deferredSubmitFiles(){setTimeout(()=>{this.formService.hasErrors(this.form)?this.submitting=!1:this.submitFiles()},250)}cancel(){this._cancelDialog()}submitForm(){this.form.patchValue({files:this.existingFiles}),this.projectSupportApi.create(this.form.getRawValue(),{successGrowl:"Support Added"}).subscribe(t=>{this.submitting=!1,this._closeDialog(t)},t=>{this.submitting=!1})}static{this.\u0275fac=function(s){return new(s||r)(e.rXU(f.u),e.rXU(G.i),e.rXU(v.t),e.rXU(ye.s))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["create-support-request-support-dialog"]],features:[e.Vt3],decls:62,vars:13,consts:[["optionTemplate",""],["pickedTemplate",""],[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[2,"float","right"],[3,"click"],[1,"fas","fa-upload"],[1,"fas","fa-file-plus"],[1,"dialog-body"],[1,"grid"],[1,"flex"],[1,"field","is-6"],[1,"label"],["placeholder","optional (defaults to today)","formControlName","date"],["type","number","min","0","max","8","formControlName","workTimeInHours","placeholder","required",1,"input"],["placeholder","required","formControlName","isPrePostAwardId",3,"dataSource"],["placeholder","required","formControlName","teamIds",3,"dataSource"],["placeholder","required","formControlName","adviserIds",3,"dataSource"],["placeholder","required","formControlName","supportProvidedIds",3,"dataSource","closeOnSelect"],[1,"field","is-12"],["formControlName","description","placeholder","required",3,"height"],[2,"font-size","0.8em","text-align","right","margin-top","4px"],[1,"file-attachments"],[1,"tags"],["class","tag is-primary",4,"ngFor","ngForOf"],["class","tag is-success",4,"ngFor","ngForOf"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"],[1,"tag","is-primary"],[1,"link",2,"font-size","1.2em",3,"click"],[1,"fas","fa-times"],[1,"tag","is-success"]],template:function(s,o){if(1&s){const n=e.RV6();e.j41(0,"form",2)(1,"div",3),e.EFF(2," Add Project Support "),e.j41(3,"span",4)(4,"a",5),e.bIt("click",function(){return e.eBV(n),e.Njj(o.addUploadedFiles())}),e.nrm(5,"i",6),e.EFF(6," Upload Files"),e.k0s(),e.EFF(7," \xa0\xa0\xa0 "),e.j41(8,"a",5),e.bIt("click",function(){return e.eBV(n),e.Njj(o.addAttachedFiles())}),e.nrm(9,"i",7),e.EFF(10," Attach Existing Files"),e.k0s()()(),e.j41(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"label",12),e.EFF(16,"Date of support"),e.k0s(),e.nrm(17,"date-picker",13),e.k0s(),e.j41(18,"div",11)(19,"label",12),e.EFF(20,"Time in hours per adviser (0 - 8)"),e.k0s(),e.nrm(21,"input",14),e.k0s(),e.j41(22,"div",11)(23,"label",12),e.EFF(24,"Pre/Post Award"),e.k0s(),e.nrm(25,"dropdown-select",15),e.k0s(),e.j41(26,"div",11)(27,"label",12),e.EFF(28,"Teams (include all teams providing support)"),e.k0s(),e.j41(29,"dropdown-multi-select",16),e.DNE(30,we,1,1,"ng-template",null,0,e.C5r)(32,Ne,1,1,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(34,"div",11)(35,"label",12),e.EFF(36,"Advisers (include all advisers providing support)"),e.k0s(),e.j41(37,"dropdown-multi-select",17),e.DNE(38,Ae,1,1,"ng-template",null,0,e.C5r)(40,De,1,1,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(42,"div",11)(43,"label",12),e.EFF(44,"Support provided (include all types of support provided)"),e.k0s(),e.nrm(45,"dropdown-multi-select",18),e.k0s(),e.j41(46,"div",19)(47,"label",12),e.EFF(48,"Description of support provided"),e.k0s(),e.nrm(49,"html-editor",20),e.j41(50,"div",21),e.EFF(51),e.nI1(52,"number"),e.k0s()()(),e.j41(53,"div",22)(54,"div",23),e.DNE(55,$e,4,1,"div",24)(56,Ge,4,1,"div",25),e.k0s()()()(),e.j41(57,"div",26)(58,"button",27),e.bIt("click",function(){return e.eBV(n),e.Njj(o.save())}),e.EFF(59,"Add"),e.k0s(),e.j41(60,"button",28),e.bIt("click",function(){return e.eBV(n),e.Njj(o.cancel())}),e.EFF(61,"Cancel"),e.k0s()()()}2&s&&(e.Y8G("formGroup",o.form),e.R7$(25),e.Y8G("dataSource",o.staticDataCache.isPrePostAward),e.R7$(4),e.Y8G("dataSource",o.staticDataCache.supportTeam),e.R7$(8),e.Y8G("dataSource",o.userApi),e.R7$(8),e.Y8G("dataSource",o.staticDataCache.supportProvided)("closeOnSelect",!1),e.R7$(4),e.Y8G("height",300),e.R7$(2),e.SpI(" ",e.i5U(52,10,o.form.getRawValue().description.length||0,"1.0-0")," / 20,000 characters of html "),e.R7$(4),e.Y8G("ngForOf",o.existingFiles),e.R7$(),e.Y8G("ngForOf",o.uploadedFiles))},dependencies:[d.Sq,i.qT,i.me,i.Q0,i.BC,i.cb,i.VZ,i.zX,i.j4,i.JD,F.p,_.C,C.I,J.S,d.QX],encapsulation:2})}}return r})();function Me(r,a){1&r&&e.EFF(0),2&r&&e.SpI(" ",a.$implicit.name," ")}function xe(r,a){1&r&&e.EFF(0),2&r&&e.SpI(" ",a.$implicit.name," ")}function Ue(r,a){1&r&&e.EFF(0),2&r&&e.SpI(" ",a.$implicit.fullName," ")}function Pe(r,a){1&r&&e.EFF(0),2&r&&e.SpI(" ",a.$implicit.fullName," ")}function Ye(r,a){if(1&r&&(e.j41(0,"div",10)(1,"div",22)(2,"label",12),e.EFF(3,"Date of support"),e.k0s(),e.nrm(4,"date-picker",23),e.k0s(),e.j41(5,"div",22)(6,"label",12),e.EFF(7,"Time in hours per adviser (0 - 8)"),e.k0s(),e.nrm(8,"input",24),e.k0s(),e.j41(9,"div",22)(10,"label",12),e.EFF(11,"Pre/Post Award"),e.k0s(),e.nrm(12,"dropdown-select",25),e.k0s(),e.j41(13,"div",22)(14,"label",12),e.EFF(15,"Teams (include all teams providing support)"),e.k0s(),e.j41(16,"dropdown-multi-select",26),e.DNE(17,Me,1,1,"ng-template",null,0,e.C5r)(19,xe,1,1,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(21,"div",22)(22,"label",12),e.EFF(23,"Advisers (include all advisers providing support)"),e.k0s(),e.j41(24,"dropdown-multi-select",27),e.DNE(25,Ue,1,1,"ng-template",null,0,e.C5r)(27,Pe,1,1,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(29,"div",22)(30,"label",12),e.EFF(31,"Support provided (include all types of support provided)"),e.k0s(),e.nrm(32,"dropdown-multi-select",28),e.k0s()()),2&r){const t=e.XpG();e.R7$(12),e.Y8G("dataSource",t.staticDataCache.isPrePostAward),e.R7$(4),e.Y8G("dataSource",t.staticDataCache.supportTeam),e.R7$(8),e.Y8G("dataSource",t.userApi),e.R7$(8),e.Y8G("dataSource",t.staticDataCache.supportProvided)("closeOnSelect",!1)}}function Ve(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",29),e.EFF(1),e.j41(2,"a",30),e.bIt("click",function(o){const n=e.eBV(t).$implicit,p=e.XpG();return e.Njj(p.removeExistingFile(n,o))}),e.nrm(3,"i",31),e.k0s()()}if(2&r){const t=a.$implicit;e.R7$(),e.SpI(" ",t.fileName,"\xa0\xa0\xa0")}}function Xe(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",32),e.EFF(1),e.j41(2,"a",30),e.bIt("click",function(o){const n=e.eBV(t).$implicit,p=e.XpG();return e.Njj(p.removeUploadedFile(n,o))}),e.nrm(3,"i",31),e.k0s()()}if(2&r){const t=a.$implicit;e.R7$(),e.SpI(" ",t.name,"\xa0\xa0\xa0")}}let x=(()=>{class r extends g.u{open(t){return this._open(Le,t,{width:"1000px",disableClose:!0})}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=e.xGo(r)))(o||r)}})()}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac})}}return r})(),Le=(()=>{class r extends $.J{constructor(t,s,o){super(),this.formService=t,this.userApi=s,this.staticDataCache=o,this.form=new i.gE({id:new i.MJ("",{nonNullable:!0}),date:new i.MJ(null,{validators:[i.k0.required],nonNullable:!0}),teamIds:new i.MJ([],{validators:[k.b.minArrayLength(1)],nonNullable:!0}),adviserIds:new i.MJ([],{validators:[k.b.minArrayLength(1)],nonNullable:!0}),supportProvidedIds:new i.MJ([],{nonNullable:!0}),description:new i.MJ("",{nonNullable:!0}),workTimeInHours:new i.MJ(null,{validators:[i.k0.required,i.k0.min(0),i.k0.max(8)],nonNullable:!0}),supportRequestedTeamId:new i.MJ(null),isPrePostAwardId:new i.MJ(c.cV.PreAward,{nonNullable:!0}),files:new i.MJ([],{nonNullable:!0})}),this.form.patchValue(this.data.projectSupport),this.existingFiles=this.data.projectSupport.files}save(){this.submitting||this.formService.hasErrors(this.form)||(this.submitting=!0,this.submitFiles())}cancel(){this._cancelDialog()}submitForm(){this.form.patchValue({files:this.existingFiles}),this.projectSupportApi.update(this.form.getRawValue(),{successGrowl:"Support Updated"}).subscribe(t=>{this.submitting=!1,this._closeDialog(t)},t=>{this.submitting=!1})}static{this.\u0275fac=function(s){return new(s||r)(e.rXU(f.u),e.rXU(G.i),e.rXU(v.t))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["update-support-request-support-dialog"]],features:[e.Vt3],decls:30,vars:9,consts:[["optionTemplate",""],["pickedTemplate",""],[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[2,"float","right"],[3,"click"],[1,"fas","fa-upload"],[1,"fas","fa-file-plus"],[1,"dialog-body"],["class","flex",4,"ngIf"],[1,"flex"],[1,"field","is-12"],[1,"label"],["formControlName","description","placeholder","required",3,"height"],[2,"font-size","0.8em","text-align","right","margin-top","4px"],[1,"file-attachments"],[1,"tags"],["class","tag is-primary",4,"ngFor","ngForOf"],["class","tag is-success",4,"ngFor","ngForOf"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"],[1,"field","is-6"],["placeholder","required","formControlName","date"],["type","number","min","0","max","8","formControlName","workTimeInHours","placeholder","required",1,"input"],["placeholder","required","formControlName","isPrePostAwardId",3,"dataSource"],["placeholder","required","formControlName","teamIds",3,"dataSource"],["placeholder","required","formControlName","adviserIds",3,"dataSource"],["placeholder","required","formControlName","supportProvidedIds",3,"dataSource","closeOnSelect"],[1,"tag","is-primary"],[1,"link",2,"font-size","1.2em",3,"click"],[1,"fas","fa-times"],[1,"tag","is-success"]],template:function(s,o){1&s&&(e.j41(0,"form",2)(1,"div",3),e.EFF(2," Update Project Support "),e.j41(3,"span",4)(4,"a",5),e.bIt("click",function(){return o.addUploadedFiles()}),e.nrm(5,"i",6),e.EFF(6," Upload Files"),e.k0s(),e.EFF(7," \xa0\xa0\xa0 "),e.j41(8,"a",5),e.bIt("click",function(){return o.addAttachedFiles()}),e.nrm(9,"i",7),e.EFF(10," Attach Existing Files"),e.k0s()()(),e.j41(11,"div",8),e.DNE(12,Ye,33,5,"div",9),e.j41(13,"div",10)(14,"div",11)(15,"label",12),e.EFF(16,"Description of support provided"),e.k0s(),e.nrm(17,"html-editor",13),e.j41(18,"div",14),e.EFF(19),e.nI1(20,"number"),e.k0s()()(),e.j41(21,"div",15)(22,"div",16),e.DNE(23,Ve,4,1,"div",17)(24,Xe,4,1,"div",18),e.k0s()()(),e.j41(25,"div",19)(26,"button",20),e.bIt("click",function(){return o.save()}),e.EFF(27,"Save"),e.k0s(),e.j41(28,"button",21),e.bIt("click",function(){return o.cancel()}),e.EFF(29,"Cancel"),e.k0s()()()),2&s&&(e.Y8G("formGroup",o.form),e.R7$(12),e.Y8G("ngIf",!0!==o.data.requestTeamSupport),e.R7$(5),e.Y8G("height",300),e.R7$(2),e.SpI(" ",e.i5U(20,6,o.form.getRawValue().description.length||0,"1.0-0")," / 20,000 characters of html "),e.R7$(4),e.Y8G("ngForOf",o.existingFiles),e.R7$(),e.Y8G("ngForOf",o.uploadedFiles))},dependencies:[d.Sq,d.bT,i.qT,i.me,i.Q0,i.BC,i.cb,i.VZ,i.zX,i.j4,i.JD,F.p,_.C,C.I,J.S,d.QX],encapsulation:2})}}return r})();var Be=l(8304);const He=(r,a)=>a.id,Oe=(r,a)=>({"is-warning":r,"is-success":a}),I=r=>({id:r});function We(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",6)(1,"div",13)(2,"button",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.addProjectSupport())}),e.EFF(3,"Add Support"),e.k0s()()()}}function ze(r,a){1&r&&(e.j41(0,"div")(1,"p"),e.EFF(2,"Loading..."),e.k0s()())}function Qe(r,a){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"div",15),e.nrm(2,"span",16),e.j41(3,"span",17)(4,"div",18),e.nrm(5,"input",19),e.j41(6,"div",20),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.clearFilename())}),e.nrm(7,"i",21),e.k0s()()()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.filterForm),e.R7$(),e.Y8G("formGroup",t.clientFilterForm)}}function Ze(r,a){1&r&&(e.j41(0,"div")(1,"div",22),e.EFF(2,"No items to display"),e.k0s()())}function Ke(r,a){if(1&r&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"async"),e.k0s()),2&r){let t;const s=a.$implicit,o=e.XpG(3);e.R7$(),e.SpI("\xa0|\xa0",null==(t=e.bMT(2,1,o.staticDataCache.supportTeam.get(e.eq3(3,I,s))))?null:t.name,"")}}function et(r,a){if(1&r&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.Lme("",t.workTimeInHours," hour",1==t.workTimeInHours?"":"s"," |")}}function tt(r,a){1&r&&(e.j41(0,"span"),e.EFF(1,"\xa0|\xa0"),e.k0s())}function rt(r,a){if(1&r&&(e.j41(0,"span"),e.DNE(1,tt,2,0,"span",9),e.EFF(2),e.nI1(3,"async"),e.k0s()),2&r){const t=a.$implicit,s=a.index,o=e.XpG(3);e.R7$(),e.Y8G("ngIf",s>0),e.R7$(),e.JRh(e.bMT(3,2,o.userService.formatUser(t)))}}function it(r,a){if(1&r&&(e.j41(0,"span",33),e.EFF(1),e.nI1(2,"async"),e.k0s()),2&r){let t;const s=a.$implicit,o=e.XpG(3);e.R7$(),e.JRh(null==(t=e.bMT(2,1,o.staticDataCache.supportProvided.get(e.eq3(3,I,s))))?null:t.name)}}function ot(r,a){if(1&r&&(e.j41(0,"div",34),e.nrm(1,"div",35),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.Y8G("innerHtml",t.description,e.npT)}}function st(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",36)(1,"button",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.editProjectSupport(o))}),e.EFF(2,"edit"),e.k0s(),e.j41(3,"button",37),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.deleteProjectSupport(o))}),e.EFF(4,"delete"),e.k0s()()}}function at(r,a){1&r&&(e.j41(0,"div",42),e.EFF(1,"open"),e.k0s())}function nt(r,a){1&r&&(e.j41(0,"div",43),e.EFF(1,"complete"),e.k0s())}function lt(r,a){if(1&r&&(e.j41(0,"b",41),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&r){const t=e.XpG(2).$implicit;e.R7$(),e.SpI("Completed ",e.i5U(2,1,t.supportRequestedCompletedDate,"dd-MMM-yy"),"")}}function pt(r,a){if(1&r&&(e.j41(0,"pre",34),e.EFF(1),e.k0s()),2&r){const t=e.XpG(2).$implicit;e.R7$(),e.JRh(t.supportRequestedCompletedNotes)}}function ut(r,a){if(1&r&&(e.j41(0,"div")(1,"div",38),e.DNE(2,at,2,0,"div",39)(3,nt,2,0,"div",40),e.j41(4,"b"),e.EFF(5),e.nI1(6,"async"),e.nI1(7,"date"),e.k0s(),e.DNE(8,lt,3,4,"b",41),e.k0s(),e.DNE(9,pt,2,1,"pre",30),e.k0s()),2&r){let t;const s=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.Y8G("ngIf",null===s.supportRequestedCompletedAt),e.R7$(),e.Y8G("ngIf",null!==s.supportRequestedCompletedAt),e.R7$(2),e.Lme("Support requested from ",null==(t=e.bMT(6,6,o.staticDataCache.supportTeam.get(e.eq3(11,I,s.supportRequestedTeamId))))?null:t.name," at ",e.i5U(7,8,null==s?null:s.supportRequestedAt,"dd-MMM-yy"),"."),e.R7$(3),e.vxM(8,s.supportRequestedCompletedDate?8:-1),e.R7$(),e.Y8G("ngIf",s.supportRequestedCompletedNotes)}}function dt(r,a){if(1&r&&(e.j41(0,"a",46),e.nrm(1,"i",47),e.EFF(2),e.k0s()),2&r){const t=a.$implicit,s=e.XpG(4);e.FS9("href",s.sasRedirect(t),e.B4B),e.R7$(2),e.SpI("\xa0",(null==t?null:t.fileName)||"NULL"," ")}}function ct(r,a){if(1&r&&(e.j41(0,"div",44),e.DNE(1,dt,3,2,"a",45),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",t.files)}}function mt(r,a){if(1&r&&(e.j41(0,"div",24)(1,"div",25)(2,"span"),e.EFF(3),e.nI1(4,"date"),e.k0s(),e.DNE(5,Ke,3,5,"span",26),e.j41(6,"span",27),e.DNE(7,et,2,2,"span",9),e.EFF(8),e.k0s()(),e.j41(9,"div",28),e.DNE(10,rt,4,4,"span",26),e.k0s(),e.j41(11,"div",28),e.DNE(12,it,3,5,"span",29),e.k0s(),e.DNE(13,ot,2,1,"div",30)(14,st,5,0,"div",31)(15,ut,10,13,"div",9)(16,ct,2,1,"div",32),e.k0s()),2&r){const t=a.$implicit,s=e.XpG(2);e.Y8G("ngClass",e.l_i(14,Oe,s.isOpen(t),s.isComplete(t))),e.R7$(3),e.JRh(e.i5U(4,11,t.date,"dd-MMM-yy")),e.R7$(2),e.Y8G("ngForOf",t.teamIds),e.R7$(2),e.Y8G("ngIf",t.workTimeInHours),e.R7$(),e.SpI(" ",t.isPrePostAwardId==s.IsPrePostAwardEnum.PreAward?"Pre-Award":"Post-Award"," "),e.R7$(2),e.Y8G("ngForOf",t.adviserIds),e.R7$(2),e.Y8G("ngForOf",t.supportProvidedIds),e.R7$(),e.Y8G("ngIf",t.description),e.R7$(),e.Y8G("ngIf",!s.locked),e.R7$(),e.Y8G("ngIf",null!==t.supportRequestedTeamId),e.R7$(),e.Y8G("ngIf",t.files.length>0)}}function ft(r,a){if(1&r&&(e.j41(0,"div",23),e.Z7z(1,mt,17,17,"div",24,He),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Dyx(t.clientItems)}}let ht=(()=>{class r extends S{constructor(t,s,o,n,p,h){super(),this.formService=t,this.userService=s,this.confirmDeleteDialog=o,this.createSupportRequestSupportDialog=n,this.updateSupportRequestSupportDialog=p,this.projectSupportApi=h,this.destroyRef=(0,e.WQX)(e.abz),this.filterForm=new i.gE({openTeamSupportOnly:new i.MJ(!1,{nonNullable:!0})}),this.clientFilterForm=new i.gE({filename:new i.MJ("",{nonNullable:!0})}),this.IsPrePostAwardEnum=c.cV,this.serverItems=null,this.clientItems=null}ngOnInit(){super.ngOnInit(),this.loadProjectSupport(),this.projectSupportApi.changed.pipe((0,E.B)(200),(0,q.pQ)(this.destroyRef)).subscribe(()=>this.loadProjectSupport()),this.filterForm.valueChanges.pipe((0,E.B)(200),(0,q.pQ)(this.destroyRef)).subscribe(()=>this.loadProjectSupport()),this.clientFilterForm.valueChanges.pipe((0,E.B)(200),(0,q.pQ)(this.destroyRef)).subscribe(()=>this.filterClientItems());var t=b.A.getLocalStorage("SupportFileSearch");t&&(this.clientFilterForm.patchValue({filename:t}),b.A.setLocalStorage("SupportFileSearch",null))}applyLock(){}clearLock(){}reset(t){super.reset(t)}cancel(){this.reset(this.item),this.router.navigate(["project/project-list"])}isOpen(t){return null!==t.supportRequestedTeamId&&null===t.supportRequestedCompletedAt}isComplete(t){return null!==t.supportRequestedTeamId&&null!==t.supportRequestedCompletedAt}passesClientFilter(t){return!this.clientFilterForm.value.filename||t.files.some(s=>s.fileName.toLowerCase().includes(this.clientFilterForm.getRawValue().filename.toLowerCase()))}clearFilename(){this.clientFilterForm.patchValue({filename:""})}loadProjectSupport(){this.projectSupportApi.query({projectSupportGroupId:this.item.projectSupportGroupId,openTeamSupportOnly:this.filterForm.value.openTeamSupportOnly??!1,skip:0,take:100}).subscribe(t=>{this.serverItems=t.items,this.filterClientItems()})}filterClientItems(){this.clientItems=null===this.serverItems?null:this.serverItems.filter(t=>this.passesClientFilter(t))}addProjectSupport(){this.locked||this.createSupportRequestSupportDialog.open({projectSupportGroupId:this.item.projectSupportGroupId})}editProjectSupport(t){this.locked||this.updateSupportRequestSupportDialog.open({projectSupportGroupId:t.projectSupportGroupId,projectSupport:t})}deleteProjectSupport(t){this.locked||this.confirmDeleteDialog.open({title:"Project Support"}).subscribe(()=>{this.projectSupportApi.delete({id:t.id},{successGrowl:"Project Support Deleted"}).subscribe()})}summariseProjectSupport(){}sasRedirect(t){return t?Ie.c.apiHost+"api/file-storage-entry/sas-redirect/"+t.id:""}static{this.\u0275fac=function(s){return new(s||r)(e.rXU(f.u),e.rXU(y.D),e.rXU(Te.K),e.rXU(M),e.rXU(x),e.rXU(Be.n))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["support-request-support"]],features:[e.Vt3],decls:24,vars:7,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/support-request/support-request-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],["class","column",4,"ngIf"],[4,"ngIf"],["class","project-support-list",4,"ngIf"],[1,"floating-buttons"],[1,"button",3,"click"],[1,"header-buttons"],[1,"button","is-primary",3,"click"],[2,"padding","0.5rem 0 0.5rem 0","display","flex"],[2,"margin-left","auto",3,"formGroup"],[2,"margin-left","1rem",3,"formGroup"],[1,"control"],["type","text","placeholder","Search by file name","formControlName","filename",1,"input",2,"width","350px"],[1,"icon","is-secondary",3,"click"],[1,"fas","fa-times"],[1,"message","is-primary"],[1,"project-support-list"],[1,"card",3,"ngClass"],[1,"card-title",2,"font-weight","bold"],[4,"ngFor","ngForOf"],[2,"flex-grow","1","text-align","right"],[1,"card-title"],["class","tag",4,"ngFor","ngForOf"],["class","card-narrative",4,"ngIf"],["class","card-buttons",4,"ngIf"],["class","file-links",4,"ngIf"],[1,"tag"],[1,"card-narrative"],[1,"typeography-content",3,"innerHtml"],[1,"card-buttons"],[1,"button","is-danger",3,"click"],[1,"card-title",2,"display","flex","align-items","center"],["class","tag is-warning",4,"ngIf"],["class","tag is-success",4,"ngIf"],[2,"margin-left","auto"],[1,"tag","is-warning"],[1,"tag","is-success"],[1,"file-links"],["class","link is-primary","target","_blank",3,"href",4,"ngFor","ngForOf"],["target","_blank",1,"link","is-primary",3,"href"],[1,"fas","fa-link"]],template:function(s,o){1&s&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",2),e.EFF(6,"Support Requests"),e.k0s()(),e.j41(7,"li")(8,"a",3),e.EFF(9,"Support Request"),e.k0s()()(),e.j41(10,"div",4)(11,"div",5)(12,"div",6)(13,"h1",7),e.EFF(14,"Support Request"),e.k0s()(),e.DNE(15,We,4,0,"div",8),e.k0s(),e.nrm(16,"support-request-tabs"),e.DNE(17,ze,3,0,"div",9)(18,Qe,8,2,"div",9)(19,Ze,3,0,"div",9)(20,ft,3,0,"div",10),e.j41(21,"div",11)(22,"button",12),e.bIt("click",function(){return o.cancel()}),e.EFF(23,"Close"),e.k0s()()()),2&s&&(e.R7$(8),e.Mz_("routerLink","/support-request/support-request-item/",o.item.id,""),e.R7$(7),e.Y8G("ngIf",!o.locked),e.R7$(2),e.Y8G("ngIf",null===o.clientItems),e.R7$(),e.Y8G("ngIf",null!==o.clientItems),e.R7$(),e.Y8G("ngIf",null!==o.clientItems&&0==o.clientItems.length),e.R7$(),e.Y8G("ngIf",null!==o.clientItems&&o.clientItems.length>0))},dependencies:[d.YU,d.Sq,d.bT,i.me,i.BC,i.cb,i.j4,i.JD,u.Wk,R,d.Jj,d.vh],encapsulation:2})}}return r})();const Ft=[{path:"support-request-list",component:ke,data:{activeSideMenu:"Triage"}},{path:"support-request-item/:id",component:me,resolve:{supportRequest:m.H.supportRequestResolver("id")},canDeactivate:[j.S.isPristine()],data:{activeSideMenu:"Triage"}},{path:"support-request-printout/:id",component:Se,resolve:{supportRequest:m.H.supportRequestResolver("id")},data:{activeSideMenu:"Triage"}},{path:"support-request-researcher/:id",component:Ee,resolve:{supportRequest:m.H.supportRequestResolver("id")},canDeactivate:[j.S.isPristine()],data:{activeSideMenu:"Triage"}},{path:"support-request-support/:id",component:ht,resolve:{supportRequest:m.H.supportRequestResolver("id")},data:{activeSideMenu:"Triage"}},{path:"support-request-files/:id",component:V,resolve:{supportRequest:m.H.supportRequestResolver("id")},canDeactivate:[j.S.isPristine()],data:{activeSideMenu:"Triage"}},{path:"support-request-history/:id",component:O,resolve:{supportRequest:m.H.supportRequestResolver("id")},data:{activeSideMenu:"Triage"}}];let vt=(()=>{class r{static{this.\u0275fac=function(s){return new(s||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[u.iI.forChild(Ft),u.iI]})}}return r})(),kt=(()=>{class r{static{this.\u0275fac=function(s){return new(s||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({providers:[A,D,M,x],imports:[d.MD,U.G,vt]})}}return r})()}}]);