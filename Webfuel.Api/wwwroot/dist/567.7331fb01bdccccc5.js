"use strict";(self.webpackChunkWebfuel_App=self.webpackChunkWebfuel_App||[]).push([[567],{8567:(ie,w,c)=>{c.r(w),c.d(w,{ReportingModule:()=>Ft});var l=c(6814),U=c(7453),d=c(3399),e=c(9212),r=c(95),m=c(7333),v=c(4821),Z=c(4201);let D=(()=>{class i extends m.M{open(){return this._open(f,void 0)}static#e=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=e.n5z(i)))(n||i)}})();static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac})}return i})(),f=(()=>{class i extends m.X{constructor(t,o){super(),this.formService=t,this.reportGroupApi=o,this.form=new r.cw({name:new r.NI("",{validators:[r.kI.required],nonNullable:!0})})}save(){this.formService.hasErrors(this.form)||this.reportGroupApi.create(this.form.getRawValue(),{successGrowl:"Report Group Created"}).subscribe(t=>{this._closeDialog(t)})}cancel(){this._cancelDialog()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(v.o),e.Y36(Z.p))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["create-report-group-dialog"]],features:[e.qOj],decls:14,vars:1,consts:[[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[1,"dialog-body"],[1,"grid"],[1,"field"],[1,"label"],["type","text","placeholder","required","formControlName","name",1,"input"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"form",0)(1,"div",1),e._uU(2," Create Report Group "),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Name"),e.qZA(),e._UZ(8,"input",6),e.qZA()()(),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return n.save()}),e._uU(11,"Add"),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return n.cancel()}),e._uU(13,"Cancel"),e.qZA()()()),2&o&&e.Q6J("formGroup",n.form)},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],encapsulation:2})}return i})();var y=c(8819),h=c(3993),b=c(7147),T=c(1986);let q=(()=>{class i{constructor(t,o,n,s){this.router=t,this.createReportGroupDialog=o,this.confirmDeleteDialog=n,this.reportGroupApi=s}add(){this.createReportGroupDialog.open()}edit(t){this.router.navigate(["reporting/report-group-item",t.id])}delete(t){this.confirmDeleteDialog.open({title:"Report Group"}).subscribe(()=>{this.reportGroupApi.delete({id:t.id},{successGrowl:"Report Group Deleted"}).subscribe()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(d.F0),e.Y36(D),e.Y36(y.h),e.Y36(Z.p))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["report-group-list"]],decls:16,vars:2,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/configuration/configuration-menu"],["routerLink","/report/report-group-list"],[1,"container"],[1,"title"],[3,"dataSource","search"],["name","name"],[3,"add","edit","delete"]],template:function(o,n){1&o&&(e.TgZ(0,"ul",0)(1,"li")(2,"a",1),e._uU(3,"Home"),e.qZA()(),e.TgZ(4,"li")(5,"a",2),e._uU(6,"Configuration"),e.qZA()(),e.TgZ(7,"li")(8,"a",3),e._uU(9,"Reports Groups"),e.qZA()()(),e.TgZ(10,"div",4)(11,"h1",5),e._uU(12,"Report Groups"),e.qZA(),e.TgZ(13,"grid",6),e._UZ(14,"grid-column",7),e.TgZ(15,"grid-action-column",8),e.NdJ("add",function(){return n.add()})("edit",function(u){return n.edit(u)})("delete",function(u){return n.delete(u)}),e.qZA()()()),2&o&&(e.xp6(13),e.Q6J("dataSource",n.reportGroupApi)("search",!0))},dependencies:[d.rH,h.M,b.I,T.k],encapsulation:2})}return i})(),oe=(()=>{class i{constructor(t,o){this.route=t,this.router=o}ngOnInit(){this.reset(this.route.snapshot.data.reportGroup)}reset(t){this.item=t}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(d.gz),e.Y36(d.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["report-group-tabs"]],decls:5,vars:1,consts:[[1,"tabs"],["routerLinkActive","is-active"],[3,"routerLink"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"ul")(2,"li",1)(3,"a",2),e._uU(4,"Report Group"),e.qZA()()()()),2&o&&(e.xp6(3),e.MGl("routerLink","../../report-group-item/",n.item.id,""))},dependencies:[d.rH,d.Od],encapsulation:2})}return i})(),re=(()=>{class i{constructor(t,o,n,s){this.route=t,this.router=o,this.formService=n,this.reportGroupApi=s,this.form=new r.cw({id:new r.NI("",{validators:[r.kI.required],nonNullable:!0}),name:new r.NI("",{validators:[r.kI.required],nonNullable:!0})})}ngOnInit(){this.reset(this.route.snapshot.data.reportGroup)}reset(t){this.item=t,this.form.patchValue(t),this.form.markAsPristine()}save(t){this.formService.hasErrors(this.form)||this.reportGroupApi.update(this.form.getRawValue(),{successGrowl:"Report Group Updated"}).subscribe(o=>{this.reset(o),t&&this.router.navigate(["reporting/report-group-list"])})}cancel(){this.reset(this.item),this.router.navigate(["reporting/report-group-list"])}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(d.gz),e.Y36(d.F0),e.Y36(v.o),e.Y36(Z.p))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["report-group-item"]],decls:34,vars:2,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/configuration/configuration-menu"],["routerLink","/report/report-group-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[1,"buttons","is-right"],[1,"form",3,"formGroup"],[1,"grid"],[1,"field"],[1,"label"],["type","text","placeholder","required","formControlName","name",1,"input"],[1,"floating-buttons"],[1,"button","is-success",3,"click"],[1,"button",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"ul",0)(1,"li")(2,"a",1),e._uU(3,"Home"),e.qZA()(),e.TgZ(4,"li")(5,"a",2),e._uU(6,"Configuration"),e.qZA()(),e.TgZ(7,"li")(8,"a",3),e._uU(9,"Report Groups"),e.qZA()(),e.TgZ(10,"li")(11,"a",4),e._uU(12,"Report Group"),e.qZA()()(),e.TgZ(13,"div",5)(14,"div",6)(15,"div",7)(16,"h1",8),e._uU(17,"Report Group"),e.qZA()(),e.TgZ(18,"div",7),e._UZ(19,"div",9),e.qZA()(),e._UZ(20,"report-group-tabs"),e.TgZ(21,"form",10)(22,"div",11)(23,"div",12)(24,"label",13),e._uU(25,"Name"),e.qZA(),e._UZ(26,"input",14),e.qZA()(),e.TgZ(27,"div",15)(28,"button",16),e.NdJ("click",function(){return n.save(!1)}),e._uU(29,"Save"),e.qZA(),e.TgZ(30,"button",16),e.NdJ("click",function(){return n.save(!0)}),e._uU(31,"Save & Close"),e.qZA(),e.TgZ(32,"button",17),e.NdJ("click",function(){return n.cancel()}),e._uU(33,"Cancel"),e.qZA()()()()),2&o&&(e.xp6(11),e.MGl("routerLink","/report/report-group-item/",n.item.id,""),e.xp6(10),e.Q6J("formGroup",n.form))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,d.rH,oe],encapsulation:2})}return i})();var A=c(3620),p=c(7003),C=c(1993),L=c(5619);class Q{constructor(a){this.query=t=>this.dataSource.query(t),this.get=t=>{if(null==this._getCache[t.id]){if(this._getCache[t.id]=new L.X(null),!this.dataSource)return new L.X(null);this.dataSource.get?this.dataSource.get({id:t.id}).subscribe(o=>{this._getCache[t.id].next(o)}):this.dataSource.query({skip:0,take:1,filters:[{field:"id",op:"eq",value:t.id}]}).subscribe(o=>{1==o.items.length&&this._getCache[t.id].next(o.items[0])})}return this._getCache[t.id]},this._getCache={},this.dataSource=a}}var I=c(3371),G=c(3180),J=c(356);let M=(()=>{class i extends m.M{open(){return this._open(ne,void 0)}static#e=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=e.n5z(i)))(n||i)}})();static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac})}return i})(),ne=(()=>{class i extends m.X{constructor(t,o,n,s){super(),this.formService=t,this.reportApi=o,this.reportGroupApi=n,this.staticDataCache=s,this.form=new r.cw({name:new r.NI("",{validators:[r.kI.required],nonNullable:!0}),reportGroupId:new r.NI("",{validators:[r.kI.required],nonNullable:!0}),reportProviderId:new r.NI("",{validators:[r.kI.required],nonNullable:!0})})}save(){this.formService.hasErrors(this.form)||this.reportApi.create(this.form.getRawValue(),{successGrowl:"Report  Created"}).subscribe(t=>{this._closeDialog(t)})}cancel(){this._cancelDialog()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(v.o),e.Y36(I.b),e.Y36(Z.p),e.Y36(G.U))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["create-report-dialog"]],features:[e.qOj],decls:22,vars:3,consts:[[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[1,"dialog-body"],[1,"grid"],[1,"field"],[1,"label"],["type","text","placeholder","required","formControlName","name",1,"input"],["formControlName","reportProviderId","placeholder","required",3,"dataSource"],["formControlName","reportGroupId","placeholder","required",3,"dataSource"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"form",0)(1,"div",1),e._uU(2," Create Report "),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Name"),e.qZA(),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"div",4)(10,"label",5),e._uU(11,"Data Type"),e.qZA(),e._UZ(12,"dropdown-select",7),e.qZA(),e.TgZ(13,"div",4)(14,"label",5),e._uU(15,"Report Group"),e.qZA(),e._UZ(16,"dropdown-select",8),e.qZA()()(),e.TgZ(17,"div",9)(18,"button",10),e.NdJ("click",function(){return n.save()}),e._uU(19,"Add"),e.qZA(),e.TgZ(20,"button",11),e.NdJ("click",function(){return n.cancel()}),e._uU(21,"Cancel"),e.qZA()()()),2&o&&(e.Q6J("formGroup",n.form),e.xp6(12),e.Q6J("dataSource",n.staticDataCache.reportProvider),e.xp6(4),e.Q6J("dataSource",n.reportGroupApi))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,J.B],encapsulation:2})}return i})(),V=(()=>{class i extends m.M{open(t){return this._open(se,t)}static#e=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=e.n5z(i)))(n||i)}})();static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac})}return i})(),se=(()=>{class i extends m.X{constructor(t,o,n,s){super(),this.formService=t,this.reportApi=o,this.reportGroupApi=n,this.staticDataCache=s,this.form=new r.cw({id:new r.NI("",{nonNullable:!0}),name:new r.NI("",{validators:[r.kI.required],nonNullable:!0})}),this.form.patchValue({id:this.data.id,name:this.data.name})}save(){this.formService.hasErrors(this.form)||this.reportApi.copy(this.form.getRawValue(),{successGrowl:"Report  Copied"}).subscribe(t=>{this._closeDialog(t)})}cancel(){this._cancelDialog()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(v.o),e.Y36(I.b),e.Y36(Z.p),e.Y36(G.U))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["copy-report-dialog"]],features:[e.qOj],decls:14,vars:1,consts:[[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[1,"dialog-body"],[1,"grid"],[1,"field"],[1,"label"],["type","text","placeholder","required","formControlName","name",1,"input"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"form",0)(1,"div",1),e._uU(2," Create a copy of this report that you will own and be able to edit "),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Name"),e.qZA(),e._UZ(8,"input",6),e.qZA()()(),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return n.save()}),e._uU(11,"Copy"),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return n.cancel()}),e._uU(13,"Cancel"),e.qZA()()()),2&o&&e.Q6J("formGroup",n.form)},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],encapsulation:2})}return i})();var le=c(9663),E=c(5949),ae=c(6648);function ce(i,a){1&i&&(e.TgZ(0,"span",35),e._uU(1,"Public"),e.qZA())}function pe(i,a){1&i&&(e.TgZ(0,"span",36),e._uU(1,"Private"),e.qZA())}function ue(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"span")(1,"a",37),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.edit(n))}),e._UZ(2,"i",38),e._uU(3,"\xa0Edit"),e.qZA(),e._uU(4,"\xa0\xa0|\xa0\xa0"),e.qZA()}}const P=i=>({id:i});function de(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",25)(1,"div",4)(2,"div",20)(3,"h3",21),e._UZ(4,"i",26),e._uU(5),e.qZA()(),e.TgZ(6,"div",20)(7,"b",21),e._uU(8),e.ALo(9,"async"),e.ALo(10,"async"),e.qZA()(),e.TgZ(11,"div",20)(12,"b",21),e._uU(13),e.ALo(14,"async"),e.qZA()(),e.TgZ(15,"div",20)(16,"b",21),e._uU(17),e.ALo(18,"async"),e.qZA()()(),e.TgZ(19,"p",27),e._uU(20),e.qZA(),e.TgZ(21,"div",4)(22,"div",5),e._uU(23),e.ALo(24,"date"),e.YNc(25,ce,2,0,"span",28)(26,pe,2,0,"span",29),e.qZA(),e.TgZ(27,"div",5)(28,"div",30),e.YNc(29,ue,5,0,"span",22),e.TgZ(30,"a",31),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.copy(s))}),e._UZ(31,"i",32),e._uU(32,"\xa0Copy"),e.qZA(),e._uU(33,"\xa0\xa0|\xa0\xa0 "),e.TgZ(34,"a",33),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.run(s))}),e._UZ(35,"i",34),e._uU(36,"\xa0Run"),e.qZA()()()()()}if(2&i){const t=a.$implicit,o=e.oxw(2);let n,s;e.xp6(5),e.hij(" ",t.name,""),e.xp6(3),e.Oqu("James Gaunt"==e.lcZ(9,9,o.userService.formatUser(t.ownerUserId))?"System":e.lcZ(10,11,o.userService.formatUser(t.ownerUserId))),e.xp6(5),e.Oqu(null==(n=e.lcZ(14,13,o.reportGroupLookup.get(e.VKq(20,P,t.reportGroupId))))?null:n.name),e.xp6(4),e.Oqu(null==(s=e.lcZ(18,15,o.reportProviderLookup.get(e.VKq(22,P,t.reportProviderId))))?null:s.name),e.xp6(3),e.hij("",t.description,"\xa0"),e.xp6(3),e.hij(" ",e.xi3(24,17,t.createdAt,"dd/MM/yyyy")," \xa0|\xa0 "),e.xp6(2),e.Q6J("ngIf",t.isPublic),e.xp6(),e.Q6J("ngIf",!t.isPublic),e.xp6(3),e.Q6J("ngIf",o.canEditReport(t))}}function me(i,a){if(1&i&&(e.TgZ(0,"div")(1,"div",23),e.YNc(2,de,37,24,"div",24),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.reports)}}function fe(i,a){1&i&&(e.TgZ(0,"div")(1,"p"),e._uU(2,"No reports found."),e.qZA()())}let ge=(()=>{class i{constructor(t,o,n,s,u,k,Y,S,te){this.router=t,this.createReportDialog=o,this.copyReportDialog=n,this.reportApi=s,this.reportGroupApi=u,this.userService=k,this.staticDataCache=Y,this.reportLauncherDialog=S,this.configurationService=te,this.destroyRef=(0,e.f3M)(e.ktI),this.reports=[],this.filterForm=new r.cw({reportGroupId:new r.NI(null),name:new r.NI("",{nonNullable:!0}),ownReportsOnly:new r.NI("NO",{nonNullable:!0})}),this.reportGroupLookup=new Q(this.reportGroupApi),this.reportProviderLookup=new Q(this.staticDataCache.reportProvider),this.ownReportsOnlyItems=[{name:"All Reports",id:"NO"},{name:"Own Reports Only",id:"YES"}],this.configuration=te.configuration,this.loadReports(),this.filterForm.valueChanges.pipe((0,A.b)(250),(0,C.sL)(this.destroyRef)).subscribe(()=>this.loadReports())}canEditReport(t){return null!=this.configuration.value&&t.ownerUserId==this.configuration.value.userId}loadReports(){var t=p.Z.merge({skip:0,take:100},this.filterForm.getRawValue());this.reportApi.query(t).subscribe(o=>this.reports=p.Z.sortBy(o.items,n=>n.name))}resetFilterForm(){this.filterForm.patchValue({name:"",reportGroupId:null,ownReportsOnly:"NO"})}add(){this.createReportDialog.open().subscribe(t=>{this.router.navigate(["reporting/report-item",t.id])})}copy(t){this.copyReportDialog.open(t).subscribe(o=>{this.router.navigate(["reporting/report-item",o.id])})}edit(t){this.router.navigate(["reporting/report-item",t.id])}run(t){this.reportLauncherDialog.open({reportId:t.id})}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(d.F0),e.Y36(M),e.Y36(V),e.Y36(I.b),e.Y36(Z.p),e.Y36(le.K),e.Y36(G.U),e.Y36(E.P),e.Y36(ae.e))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["report-list"]],decls:44,vars:6,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/reporting/report-list"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[1,"header-buttons"],[1,"button","is-success",3,"click"],[1,"filter-form"],[1,"form",3,"formGroup"],[1,"flex"],[1,"field","is-6"],["type","text","formControlName","name","placeholder","Name",1,"input"],[1,"field","is-3"],["placeholder","Report Group","formControlName","reportGroupId",3,"dataSource","enableClear"],["placeholder","optional","formControlName","ownReportsOnly",3,"items"],[1,"is-12","is-right"],[1,"button","is-small",3,"click"],[1,"card","header"],[1,"column","is-3"],[2,"margin","0"],[4,"ngIf"],[1,"card-set"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"fas","fa-file-spreadsheet"],[2,"margin","8px 0 8px 0"],["class","text is-success is-bold",4,"ngIf"],["class","text is-warning is-bold",4,"ngIf"],[1,"text","is-right-aligned"],[1,"link","is-success",3,"click"],[1,"fas","fa-fw","fa-copy"],[1,"link","is-warning",3,"click"],[1,"fas","fa-fw","fa-cogs"],[1,"text","is-success","is-bold"],[1,"text","is-warning","is-bold"],[1,"link","is-primary",3,"click"],[1,"fas","fa-fw","fa-pencil"]],template:function(o,n){1&o&&(e.TgZ(0,"ul",0)(1,"li")(2,"a",1),e._uU(3,"Home"),e.qZA()(),e.TgZ(4,"li")(5,"a",2),e._uU(6,"Reports"),e.qZA()()(),e.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"h1",6),e._uU(11,"Reports"),e.qZA()(),e.TgZ(12,"div",5)(13,"div",7)(14,"button",8),e.NdJ("click",function(){return n.add()}),e._uU(15,"Add Report"),e.qZA()()()(),e.TgZ(16,"div",9)(17,"form",10)(18,"div",11)(19,"div",12),e._UZ(20,"input",13),e.qZA(),e.TgZ(21,"div",14),e._UZ(22,"dropdown-select",15),e.qZA(),e.TgZ(23,"div",14),e._UZ(24,"dropdown-select",16),e.qZA(),e.TgZ(25,"div",17)(26,"button",18),e.NdJ("click",function(){return n.resetFilterForm()}),e._uU(27,"show all"),e.qZA()()()()(),e.TgZ(28,"div",19)(29,"div",4)(30,"div",20)(31,"h3",21),e._uU(32,"Report Name"),e.qZA()(),e.TgZ(33,"div",20)(34,"h3",21),e._uU(35,"Owner"),e.qZA()(),e.TgZ(36,"div",20)(37,"h3",21),e._uU(38,"Report Group"),e.qZA()(),e.TgZ(39,"div",20)(40,"h3",21),e._uU(41,"Data Type"),e.qZA()()()(),e.YNc(42,me,3,1,"div",22)(43,fe,3,0,"div",22),e.qZA()),2&o&&(e.xp6(17),e.Q6J("formGroup",n.filterForm),e.xp6(5),e.Q6J("dataSource",n.reportGroupApi)("enableClear",!0),e.xp6(2),e.Q6J("items",n.ownReportsOnlyItems),e.xp6(18),e.Q6J("ngIf",n.reports.length>0),e.xp6(),e.Q6J("ngIf",0==n.reports.length))},dependencies:[l.sg,l.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,d.rH,J.B,l.Ov,l.uU],encapsulation:2})}return i})();var N=c(3038),F=c(6411),g=c(8581),_=c(2420),x=c(6765);function he(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",14),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.toggleField(s))}),e._UZ(1,"i"),e._uU(2),e.qZA()}if(2&i){const t=a.$implicit;e.xp6(),e.Gre("far ",t.selected?"fa-check-square":"fa-square",""),e.xp6(),e.hij("\xa0",t.name,"")}}let B=(()=>{class i extends m.M{open(t){return this._open(_e,t)}static#e=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=e.n5z(i)))(n||i)}})();static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac})}return i})(),_e=(()=>{class i extends m.X{constructor(t,o){super(),this.formService=t,this.reportDesignApi=o,this.form=new r.cw({reportProviderId:new r.NI("",{validators:[r.kI.required],nonNullable:!0}),design:new r.NI(null,{validators:[r.kI.required],nonNullable:!0}),fieldIds:new r.NI([],{nonNullable:!0})}),this.fields=[],this.form.patchValue({reportProviderId:this.data.schema.reportProviderId,design:this.data.design}),p.Z.forEach(this.data.schema.fields,n=>{this.fields.push({id:n.id,name:n.name,selected:!1})})}save(){this.formService.hasErrors(this.form)||(this.form.patchValue({fieldIds:p.Z.map(p.Z.filter(this.fields,t=>t.selected),t=>t.id)}),this.reportDesignApi.insertReportColumn(this.form.getRawValue()).subscribe(t=>this._closeDialog(t)))}cancel(){this._cancelDialog()}toggleField(t){t.selected=!t.selected}selectAll(){p.Z.forEach(this.fields,t=>t.selected=!0)}selectNone(){p.Z.forEach(this.fields,t=>t.selected=!1)}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(v.o),e.Y36(N.k))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["insert-report-column-dialog"]],features:[e.qOj],decls:21,vars:2,consts:[[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[1,"dialog-body"],[1,"grid"],[1,"field"],[1,"label"],[2,"float","right"],[1,"link","is-success",3,"click"],[1,"link","is-warning",3,"click"],[1,"checklist"],[3,"click",4,"ngFor","ngForOf"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"],[3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"form",0)(1,"div",1),e._uU(2," Add Column "),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7," Select columns to add "),e.TgZ(8,"span",6)(9,"a",7),e.NdJ("click",function(){return n.selectAll()}),e._uU(10,"all"),e.qZA(),e._uU(11," \xa0 "),e.TgZ(12,"a",8),e.NdJ("click",function(){return n.selectNone()}),e._uU(13,"none"),e.qZA()()(),e.TgZ(14,"div",9),e.YNc(15,he,3,4,"a",10),e.qZA()()()(),e.TgZ(16,"div",11)(17,"button",12),e.NdJ("click",function(){return n.save()}),e._uU(18,"Add"),e.qZA(),e.TgZ(19,"button",13),e.NdJ("click",function(){return n.cancel()}),e._uU(20,"Cancel"),e.qZA()()()),2&o&&(e.Q6J("formGroup",n.form),e.xp6(15),e.Q6J("ngForOf",n.fields))},dependencies:[l.sg,r._Y,r.JL,r.sg],encapsulation:2})}return i})(),X=(()=>{class i extends m.M{open(t){return this._open(ve,t)}static#e=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=e.n5z(i)))(n||i)}})();static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac})}return i})(),ve=(()=>{class i extends m.X{constructor(t,o){super(),this.formService=t,this.reportDesignApi=o,this.form=new r.cw({reportProviderId:new r.NI("",{validators:[r.kI.required],nonNullable:!0}),design:new r.NI(null,{validators:[r.kI.required],nonNullable:!0}),fieldId:new r.NI("",{validators:[r.kI.required],nonNullable:!0}),parentId:new r.NI(null)}),this.fields=[],this.form.patchValue({reportProviderId:this.data.schema.reportProviderId,design:this.data.design,parentId:this.data.parentId}),p.Z.forEach(this.data.schema.fields,n=>{n.filterable&&this.fields.push(n)}),this.fields.push({id:x.T3.Group,name:"Condition Group"})}save(){this.formService.hasErrors(this.form)||this.reportDesignApi.insertReportFilter(this.form.getRawValue()).subscribe(t=>this._closeDialog(t))}cancel(){this._cancelDialog()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(v.o),e.Y36(N.k))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["insert-report-filter-dialog"]],features:[e.qOj],decls:14,vars:2,consts:[[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[1,"dialog-body"],[1,"grid"],[1,"field"],[1,"label"],["placeholder","required","formControlName","fieldId",3,"items"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"form",0)(1,"div",1),e._uU(2," Add Filter "),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Filter Type"),e.qZA(),e._UZ(8,"dropdown-select",6),e.qZA()()(),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return n.save()}),e._uU(11,"Add"),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return n.cancel()}),e._uU(13,"Cancel"),e.qZA()()()),2&o&&(e.Q6J("formGroup",n.form),e.xp6(8),e.Q6J("items",n.fields))},dependencies:[r._Y,r.JJ,r.JL,r.sg,r.u,J.B],encapsulation:2})}return i})();function Ze(i,a){if(1&i&&(e.TgZ(0,"option",16),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("ngValue",t.id),e.xp6(),e.Oqu(t.name)}}function Ce(i,a){if(1&i&&(e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Combine Multiple Values Using"),e.qZA(),e.TgZ(3,"select",14),e.YNc(4,Ze,2,2,"option",15),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.collectionOptions)}}let j=(()=>{class i extends m.M{open(t){return this._open(be,t,{})}static#e=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=e.n5z(i)))(n||i)}})();static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac})}return i})(),be=(()=>{class i extends m.X{constructor(t,o){super(),this.formService=t,this.reportDesignApi=o,this.form=new r.cw({reportProviderId:new r.NI("",{validators:[r.kI.required],nonNullable:!0}),design:new r.NI(null,{validators:[r.kI.required],nonNullable:!0}),id:new r.NI("",{validators:[r.kI.required],nonNullable:!0}),title:new r.NI("",{nonNullable:!0}),bold:new r.NI(!1,{nonNullable:!0}),width:new r.NI(null),collection:new r.NI(0,{nonNullable:!0})}),this.collectionOptions=[],this.form.patchValue({reportProviderId:this.data.schema.reportProviderId,design:this.data.design}),this.form.patchValue(this.data.column),this.enumerateCollectionOptions()}save(){this.formService.hasErrors(this.form)||this.reportDesignApi.updateReportColumn(this.form.getRawValue()).subscribe(t=>this._closeDialog(t))}cancel(){this._cancelDialog()}enumerateCollectionOptions(){!1!==this.data.column.multiValued&&(this.collectionOptions.push({id:g.pq.Default,name:"Default"}),this.data.column.fieldType==g.VR.Number&&(this.collectionOptions.push({id:g.pq.Sum,name:"Sum"}),this.collectionOptions.push({id:g.pq.Avg,name:"Average"}),this.collectionOptions.push({id:g.pq.Min,name:"Min"}),this.collectionOptions.push({id:g.pq.Max,name:"Max"})),this.collectionOptions.push({id:g.pq.Count,name:"Count"}),this.collectionOptions.push({id:g.pq.List,name:"List"}),this.collectionOptions.push({id:g.pq.ListDistinct,name:"List Distinct"}))}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(v.o),e.Y36(N.k))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["update-report-column-dialog"]],features:[e.qOj],decls:24,vars:3,consts:[[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[1,"dialog-body"],[1,"grid"],[1,"field"],[1,"label"],["type","text","placeholder","required","formControlName","title",1,"input"],[1,"grid","has-columns-2"],["type","number","formControlName","width","placeholder","Size to contents",1,"input"],["formControlName","bold"],["class","field",4,"ngIf"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"],["formControlName","collection",1,"select"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(o,n){1&o&&(e.TgZ(0,"form",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Title"),e.qZA(),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"div",7)(10,"div",4)(11,"label",5),e._uU(12,"Width"),e.qZA(),e._UZ(13,"input",8),e.qZA(),e.TgZ(14,"div",4)(15,"label",5),e._uU(16,"Bold"),e.qZA(),e._UZ(17,"toggle-input",9),e.qZA()(),e.YNc(18,Ce,5,1,"div",10),e.qZA()(),e.TgZ(19,"div",11)(20,"button",12),e.NdJ("click",function(){return n.save()}),e._uU(21,"Save"),e.qZA(),e.TgZ(22,"button",13),e.NdJ("click",function(){return n.cancel()}),e._uU(23,"Cancel"),e.qZA()()()),2&o&&(e.Q6J("formGroup",n.form),e.xp6(2),e.hij(" Edit Column [Field = ",n.data.column.fieldName,"] "),e.xp6(16),e.Q6J("ngIf",n.collectionOptions.length>0))},dependencies:[l.sg,l.O5,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.sg,r.u,F.g],encapsulation:2})}return i})();var R=c(9397),Te=c(8484),Ae=c(3834),Ne=c(9594),Re=c(649),ye=c(3588);const Fe=["popupTemplate"],xe=["popupAnchor"];function ke(i,a){if(1&i&&(e.TgZ(0,"option",13),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("ngValue",t.value),e.xp6(),e.Oqu(t.description)}}function qe(i,a){if(1&i&&(e.TgZ(0,"div",3)(1,"div",4)(2,"label",5),e._uU(3,"Condition"),e.qZA(),e.TgZ(4,"select",11),e.YNc(5,ke,2,2,"option",12),e.qZA()()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.filter.conditions)}}function Ie(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"label",5),e._uU(3,"Value"),e.qZA(),e.TgZ(4,"dropdown-text-input",14),e.NdJ("callback",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onCallback())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("items",t.options)}}function we(i,a){if(1&i&&(e.TgZ(0,"div",15),e._UZ(1,"date-calendar",16),e.qZA()),2&i){const t=e.oxw();e.xp6(),e.Q6J("formControl",t.popupFormControl)}}let Ue=(()=>{class i{constructor(t,o){this.overlay=t,this.viewContainerRef=o,this.cd=(0,e.f3M)(e.sBO),this.destroyRef=(0,e.f3M)(e.ktI),this.popupFormControl=new r.NI(null),this.form=new r.cw({name:new r.NI("",{nonNullable:!0}),editable:new r.NI(!1,{nonNullable:!0}),condition:new r.NI(g.Vc.EqualTo),value:new r.NI("")}),this.options=[{id:"today",name:"today"},{id:"yesterday",name:"yesterday"},{id:"start of month",name:"start of month"},{id:"end of month",name:"end of month"},{id:"start of year",name:"start of year"},{id:"end of year",name:"end of year"}],this.popupRef=null,this.onChange=_.Z,this.onTouched=_.Z,this.popupFormControl.valueChanges.pipe((0,R.b)(n=>{this.form.patchValue({value:this.formatValue(n)}),this.closePopup()}),(0,C.sL)(this.destroyRef)).subscribe()}formatValue(t){var o=Ae.J.parse(t);return null==o?null:o.format("dd MMM yyyy")}ngOnInit(){this.form.valueChanges.pipe((0,A.b)(200),(0,R.b)(t=>{this.filter=p.Z.merge(this.filter,t),this.emitChanges()}),(0,C.sL)(this.destroyRef)).subscribe()}reset(t){this.filter=t,this.form.patchValue(t)}get unary(){var t=this.filter.conditions.find(o=>o.value==this.form.value.condition);return null!=t&&t.unary}onCallback(){this.openPopup()}get popupOpen(){return null!==this.popupRef}openPopup(){if(this.popupRef)return;this.popupRef=this.overlay.create({scrollStrategy:this.overlay.scrollStrategies.reposition({scrollThrottle:50}),positionStrategy:this.overlay.position().flexibleConnectedTo(this.popupAnchor).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}]).withFlexibleDimensions(!0).withPush(!1),hasBackdrop:!0}),this.popupRef.backdropClick().subscribe(()=>this.closePopup());const t=new Te.UE(this.popupTemplate,this.viewContainerRef);this.popupRef.attach(t)}closePopup(){this.popupOpen&&(this.popupRef.detach(),this.popupRef=null,this.onTouched(),this.cd.detectChanges())}emitChanges(){this.cd.detectChanges(),this.onChange(p.Z.deepClone(this.filter))}writeValue(t){this.reset(p.Z.deepClone(t))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.form.disable():this.form.enable()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(Ne.aV),e.Y36(e.s_b))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["report-filter-date"]],viewQuery:function(o,n){if(1&o&&(e.Gf(Fe,5),e.Gf(xe,5)),2&o){let s;e.iGM(s=e.CRH())&&(n.popupTemplate=s.first),e.iGM(s=e.CRH())&&(n.popupAnchor=s.first)}},features:[e._Bn([{provide:r.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0}])],decls:18,vars:4,consts:[[1,"grid",3,"formGroup"],["popupAnchor",""],[1,"columns"],[1,"column"],[1,"field"],[1,"label"],["type","text","formControlName","name",1,"input",3,"placeholder"],[1,"column","is-narrow"],["formControlName","editable"],["class","column",4,"ngIf"],["popupTemplate",""],["formControlName","condition",1,"select"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["formControlName","value","placeholder","optional","callbackIcon","far fa-calendar",3,"items","callback"],[1,"date-picker-popup"],[3,"formControl"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),e._uU(6,"Name"),e.qZA(),e._UZ(7,"input",6),e.qZA()(),e.TgZ(8,"div",7)(9,"div",4)(10,"label",5),e._uU(11,"Editable"),e.qZA(),e._UZ(12,"toggle-input",8),e.qZA()()(),e.TgZ(13,"div",2),e.YNc(14,qe,6,1,"div",9)(15,Ie,5,1,"div",9),e.qZA()(),e.YNc(16,we,2,1,"ng-template",null,10,e.W1O)),2&o&&(e.Q6J("formGroup",n.form),e.xp6(7),e.Q6J("placeholder",n.filter.fieldName),e.xp6(7),e.Q6J("ngIf",n.filter.conditions.length>0),e.xp6(),e.Q6J("ngIf",!n.unary))},dependencies:[l.sg,l.O5,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.oH,r.sg,r.u,Re._,ye.O,F.g],encapsulation:2,changeDetection:0})}return i})();function De(i,a){if(1&i&&(e.TgZ(0,"option",6),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("ngValue",t.value),e.xp6(),e.Oqu(t.description)}}function Je(i,a){if(1&i&&(e.TgZ(0,"div",2)(1,"label",3),e._uU(2,"Condition"),e.qZA(),e.TgZ(3,"select",4),e.YNc(4,De,2,2,"option",5),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.filter.conditions)}}let Ge=(()=>{class i{constructor(){this.cd=(0,e.f3M)(e.sBO),this.destroyRef=(0,e.f3M)(e.ktI),this.form=new r.cw({condition:new r.NI(x.X5.All,{nonNullable:!0})}),this.onChange=_.Z,this.onTouched=_.Z}ngOnInit(){this.form.valueChanges.pipe((0,A.b)(200),(0,R.b)(t=>{this.filter=p.Z.merge(this.filter,t),this.emitChanges()}),(0,C.sL)(this.destroyRef)).subscribe()}reset(t){this.filter=t,this.form.patchValue(t)}emitChanges(){this.cd.detectChanges(),this.onChange(p.Z.deepClone(this.filter))}writeValue(t){this.reset(p.Z.deepClone(t))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.form.disable():this.form.enable()}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["report-filter-group"]],features:[e._Bn([{provide:r.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0}])],decls:2,vars:2,consts:[[1,"grid",3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],[1,"label"],["formControlName","condition",1,"select"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Je,5,1,"div",1),e.qZA()),2&o&&(e.Q6J("formGroup",n.form),e.xp6(),e.Q6J("ngIf",n.filter.conditions.length>0))},dependencies:[l.sg,l.O5,r.YN,r.Kr,r.EJ,r.JJ,r.JL,r.sg,r.u],encapsulation:2,changeDetection:0})}return i})();function Oe(i,a){if(1&i&&(e.TgZ(0,"option",11),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("ngValue",t.value),e.xp6(),e.Oqu(t.description)}}function Ye(i,a){if(1&i&&(e.TgZ(0,"div",2)(1,"div",3)(2,"label",4),e._uU(3,"Condition"),e.qZA(),e.TgZ(4,"select",9),e.YNc(5,Oe,2,2,"option",10),e.qZA()()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.filter.conditions)}}function Se(i,a){1&i&&(e.TgZ(0,"div",2)(1,"div",3)(2,"label",4),e._uU(3,"Value"),e.qZA(),e._UZ(4,"input",12),e.qZA()())}let Le=(()=>{class i{constructor(){this.cd=(0,e.f3M)(e.sBO),this.destroyRef=(0,e.f3M)(e.ktI),this.form=new r.cw({name:new r.NI("",{nonNullable:!0}),editable:new r.NI(!1,{nonNullable:!0}),condition:new r.NI(x.kQ.EqualTo),value:new r.NI(0,{validators:[r.kI.required],nonNullable:!0})}),this.onChange=_.Z,this.onTouched=_.Z}ngOnInit(){this.form.valueChanges.pipe((0,A.b)(200),(0,R.b)(t=>{this.filter=p.Z.merge(this.filter,t),this.emitChanges()}),(0,C.sL)(this.destroyRef)).subscribe()}reset(t){this.filter=t,this.form.patchValue(t)}get unary(){var t=this.filter.conditions.find(o=>o.value==this.form.value.condition);return null!=t&&t.unary}emitChanges(){this.cd.detectChanges(),this.onChange(p.Z.deepClone(this.filter))}writeValue(t){this.reset(p.Z.deepClone(t))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.form.disable():this.form.enable()}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["report-filter-number"]],features:[e._Bn([{provide:r.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0}])],decls:15,vars:4,consts:[[1,"grid",3,"formGroup"],[1,"columns"],[1,"column"],[1,"field"],[1,"label"],["type","text","formControlName","name",1,"input",3,"placeholder"],[1,"column","is-narrow"],["formControlName","editable"],["class","column",4,"ngIf"],["formControlName","condition",1,"select"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","number","placeholder","required","formControlName","value",1,"input"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Name"),e.qZA(),e._UZ(6,"input",5),e.qZA()(),e.TgZ(7,"div",6)(8,"div",3)(9,"label",4),e._uU(10,"Editable"),e.qZA(),e._UZ(11,"toggle-input",7),e.qZA()()(),e.TgZ(12,"div",1),e.YNc(13,Ye,6,1,"div",8)(14,Se,5,0,"div",8),e.qZA()()),2&o&&(e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("placeholder",n.filter.fieldName),e.xp6(7),e.Q6J("ngIf",n.filter.conditions.length>0),e.xp6(),e.Q6J("ngIf",!n.unary))},dependencies:[l.sg,l.O5,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.sg,r.u,F.g],encapsulation:2,changeDetection:0})}return i})();function Qe(i,a){if(1&i&&(e.TgZ(0,"option",11),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("ngValue",t.value),e.xp6(),e.Oqu(t.description)}}function Me(i,a){if(1&i&&(e.TgZ(0,"div",2)(1,"div",3)(2,"label",4),e._uU(3,"Condition"),e.qZA(),e.TgZ(4,"select",9),e.YNc(5,Qe,2,2,"option",10),e.qZA()()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.filter.conditions)}}function Ve(i,a){1&i&&(e.TgZ(0,"div",2)(1,"div",3)(2,"label",4),e._uU(3,"Value"),e.qZA(),e._UZ(4,"input",12),e.qZA()())}let Ee=(()=>{class i{constructor(){this.cd=(0,e.f3M)(e.sBO),this.destroyRef=(0,e.f3M)(e.ktI),this.form=new r.cw({name:new r.NI("",{nonNullable:!0}),editable:new r.NI(!1,{nonNullable:!0}),condition:new r.NI(x.ux.Contains),value:new r.NI("")}),this.onChange=_.Z,this.onTouched=_.Z}ngOnInit(){this.form.valueChanges.pipe((0,A.b)(200),(0,R.b)(t=>{this.filter=p.Z.merge(this.filter,t),this.emitChanges()}),(0,C.sL)(this.destroyRef)).subscribe()}reset(t){this.filter=t,this.form.patchValue(t)}get unary(){var t=this.filter.conditions.find(o=>o.value==this.form.value.condition);return null!=t&&t.unary}emitChanges(){this.cd.detectChanges(),this.onChange(p.Z.deepClone(this.filter))}writeValue(t){this.reset(p.Z.deepClone(t))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.form.disable():this.form.enable()}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["report-filter-string"]],features:[e._Bn([{provide:r.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0}])],decls:15,vars:4,consts:[[1,"grid",3,"formGroup"],[1,"columns"],[1,"column"],[1,"field"],[1,"label"],["type","text","formControlName","name",1,"input",3,"placeholder"],[1,"column","is-narrow"],["formControlName","editable"],["class","column",4,"ngIf"],["formControlName","condition",1,"select"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","text","placeholder","optional","formControlName","value",1,"input"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Name"),e.qZA(),e._UZ(6,"input",5),e.qZA()(),e.TgZ(7,"div",6)(8,"div",3)(9,"label",4),e._uU(10,"Editable"),e.qZA(),e._UZ(11,"toggle-input",7),e.qZA()()(),e.TgZ(12,"div",1),e.YNc(13,Me,6,1,"div",8)(14,Ve,5,0,"div",8),e.qZA()()),2&o&&(e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("placeholder",n.filter.fieldName),e.xp6(7),e.Q6J("ngIf",n.filter.conditions.length>0),e.xp6(),e.Q6J("ngIf",!n.unary))},dependencies:[l.sg,l.O5,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u,F.g],encapsulation:2,changeDetection:0})}return i})();function Pe(i,a){if(1&i&&(e.TgZ(0,"option",11),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("ngValue",t.value),e.xp6(),e.Oqu(t.description)}}function Be(i,a){if(1&i&&(e.TgZ(0,"div",2)(1,"div",3)(2,"label",4),e._uU(3,"Condition"),e.qZA(),e.TgZ(4,"select",9),e.YNc(5,Pe,2,2,"option",10),e.qZA()()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.filter.conditions)}}let Xe=(()=>{class i{constructor(){this.cd=(0,e.f3M)(e.sBO),this.destroyRef=(0,e.f3M)(e.ktI),this.form=new r.cw({name:new r.NI("",{nonNullable:!0}),editable:new r.NI(!1,{nonNullable:!0}),condition:new r.NI(g.Z1.True)}),this.onChange=_.Z,this.onTouched=_.Z}ngOnInit(){this.form.valueChanges.pipe((0,A.b)(200),(0,R.b)(t=>{this.filter=p.Z.merge(this.filter,t),this.emitChanges()}),(0,C.sL)(this.destroyRef)).subscribe()}reset(t){this.filter=t,this.form.patchValue(t)}emitChanges(){this.cd.detectChanges(),this.onChange(p.Z.deepClone(this.filter))}writeValue(t){this.reset(p.Z.deepClone(t))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.form.disable():this.form.enable()}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["report-filter-boolean"]],features:[e._Bn([{provide:r.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0}])],decls:14,vars:3,consts:[[1,"grid",3,"formGroup"],[1,"columns"],[1,"column"],[1,"field"],[1,"label"],["type","text","formControlName","name",1,"input",3,"placeholder"],[1,"column","is-narrow"],["formControlName","editable"],["class","column",4,"ngIf"],["formControlName","condition",1,"select"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Name"),e.qZA(),e._UZ(6,"input",5),e.qZA()(),e.TgZ(7,"div",6)(8,"div",3)(9,"label",4),e._uU(10,"Editable"),e.qZA(),e._UZ(11,"toggle-input",7),e.qZA()()(),e.TgZ(12,"div",1),e.YNc(13,Be,6,1,"div",8),e.qZA()()),2&o&&(e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("placeholder",n.filter.fieldName),e.xp6(7),e.Q6J("ngIf",n.filter.conditions.length>0))},dependencies:[l.sg,l.O5,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u,F.g],encapsulation:2,changeDetection:0})}return i})();var je=c(6963);function Ke(i,a){if(1&i&&(e.TgZ(0,"option",11),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("ngValue",t.value),e.xp6(),e.Oqu(t.description)}}function He(i,a){if(1&i&&(e.TgZ(0,"div",2)(1,"div",3)(2,"label",4),e._uU(3,"Condition"),e.qZA(),e.TgZ(4,"select",9),e.YNc(5,Ke,2,2,"option",10),e.qZA()()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.filter.conditions)}}function $e(i,a){if(1&i&&(e.TgZ(0,"div",2)(1,"div",3)(2,"label",4),e._uU(3,"Value"),e.qZA(),e._UZ(4,"dropdown-multi-select",12),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("closeOnSelect",!1)("dataSource",t.referenceDataSource)("enableSearch",!0)("enableClear",!0)}}let ze=(()=>{class i{constructor(t){this.reportDesignApi=t,this.cd=(0,e.f3M)(e.sBO),this.destroyRef=(0,e.f3M)(e.ktI),this.referenceDataSource={query:o=>this.reportDesignApi.lookupReferenceField({query:o,fieldId:this.filter.fieldId,reportProviderId:this.schema.reportProviderId})},this.form=new r.cw({name:new r.NI("",{nonNullable:!0}),editable:new r.NI(!1,{nonNullable:!0}),condition:new r.NI(x.K6.OneOf,{validators:[r.kI.required],nonNullable:!0}),value:new r.NI([])}),this.onChange=_.Z,this.onTouched=_.Z}ngOnInit(){this.form.valueChanges.pipe((0,A.b)(200),(0,R.b)(t=>{this.filter=p.Z.merge(this.filter,t),this.emitChanges()}),(0,C.sL)(this.destroyRef)).subscribe()}reset(t){this.filter=t,this.form.patchValue(t)}get unary(){var t=this.filter.conditions.find(o=>o.value==this.form.value.condition);return null!=t&&t.unary}emitChanges(){this.cd.detectChanges(),this.onChange(p.Z.deepClone(this.filter))}writeValue(t){this.reset(p.Z.deepClone(t))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.form.disable():this.form.enable()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(N.k))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["report-filter-reference"]],inputs:{schema:"schema"},features:[e._Bn([{provide:r.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0}])],decls:16,vars:4,consts:[[1,"grid",3,"formGroup"],[1,"columns"],[1,"column"],[1,"field"],[1,"label"],["type","text","formControlName","name",1,"input",3,"placeholder"],[1,"column","is-narrow"],["formControlName","editable"],["class","column",4,"ngIf"],["formControlName","condition",1,"select"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["formControlName","value","placeholder","optional",3,"closeOnSelect","dataSource","enableSearch","enableClear"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Name"),e.qZA(),e._UZ(6,"input",5),e.qZA()(),e.TgZ(7,"div",6)(8,"div",3)(9,"label",4),e._uU(10,"Editable"),e.qZA(),e._UZ(11,"toggle-input",7),e.qZA()()(),e.TgZ(12,"div",1),e.YNc(13,He,6,1,"div",8),e.qZA(),e.TgZ(14,"div",1),e.YNc(15,$e,5,4,"div",8),e.qZA()()),2&o&&(e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("placeholder",n.filter.fieldName),e.xp6(7),e.Q6J("ngIf",n.filter.conditions.length>0),e.xp6(2),e.Q6J("ngIf",!n.unary))},dependencies:[l.sg,l.O5,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u,je.O,F.g],encapsulation:2,changeDetection:0})}return i})(),We=(()=>{class i{constructor(){this.cd=(0,e.f3M)(e.sBO),this.destroyRef=(0,e.f3M)(e.ktI),this.form=new r.cw({expression:new r.NI("")}),this.onChange=_.Z,this.onTouched=_.Z}ngOnInit(){this.form.valueChanges.pipe((0,A.b)(200),(0,R.b)(t=>{this.filter=p.Z.merge(this.filter,t),this.emitChanges()}),(0,C.sL)(this.destroyRef)).subscribe()}reset(t){this.filter=t,this.form.patchValue(t)}emitChanges(){this.cd.detectChanges(),this.onChange(p.Z.deepClone(this.filter))}writeValue(t){this.reset(p.Z.deepClone(t))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.form.disable():this.form.enable()}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["report-filter-expression"]],features:[e._Bn([{provide:r.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0}])],decls:5,vars:1,consts:[[1,"grid",3,"formGroup"],[1,"field"],[1,"label"],["type","text","placeholder","required","formControlName","expression",1,"input"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3,"Expression"),e.qZA(),e._UZ(4,"input",3),e.qZA()()),2&o&&e.Q6J("formGroup",n.form)},dependencies:[r.Fj,r.JJ,r.JL,r.sg,r.u],encapsulation:2,changeDetection:0})}return i})();function et(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(),e.hij("[Field = ",t.fieldName,"]")}}function tt(i,a){1&i&&e._UZ(0,"report-filter-date",11)}function it(i,a){1&i&&e._UZ(0,"report-filter-number",11)}function ot(i,a){1&i&&e._UZ(0,"report-filter-string",11)}function rt(i,a){1&i&&e._UZ(0,"report-filter-boolean",11)}function nt(i,a){1&i&&e._UZ(0,"report-filter-group",11)}function st(i,a){if(1&i&&e._UZ(0,"report-filter-reference",12),2&i){const t=e.oxw();e.Q6J("schema",t.data.schema)}}function lt(i,a){1&i&&e._UZ(0,"report-filter-expression",11)}let K=(()=>{class i extends m.M{open(t){return this._open(at,t,{width:"800px"})}static#e=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=e.n5z(i)))(n||i)}})();static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac})}return i})(),at=(()=>{class i extends m.X{constructor(t,o){super(),this.formService=t,this.reportDesignApi=o,this.ReportFilterType=x.$T,this.form=new r.cw({reportProviderId:new r.NI("",{validators:[r.kI.required],nonNullable:!0}),design:new r.NI(null,{validators:[r.kI.required],nonNullable:!0}),filter:new r.NI(null,{validators:[r.kI.required],nonNullable:!0})}),this.fieldName=null,this.form.patchValue({reportProviderId:this.data.schema.reportProviderId,design:this.data.design,filter:this.data.filter}),this.data.filter.fieldName&&(this.fieldName=this.data.filter.fieldName)}save(){this.formService.hasErrors(this.form)||this.reportDesignApi.updateReportFilter(this.form.getRawValue()).subscribe(t=>this._closeDialog(t))}cancel(){this._cancelDialog()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(v.o),e.Y36(N.k))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["update-report-filter-dialog"]],features:[e.qOj],decls:19,vars:10,consts:[[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[4,"ngIf"],[1,"dialog-body"],[1,"grid"],[3,"ngSwitch"],["formControlName","filter",4,"ngSwitchCase"],["formControlName","filter",3,"schema",4,"ngSwitchCase"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"],["formControlName","filter"],["formControlName","filter",3,"schema"]],template:function(o,n){1&o&&(e.TgZ(0,"form",0)(1,"div",1),e._uU(2," Edit Filter "),e.YNc(3,et,2,1,"span",2),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5),e.YNc(7,tt,1,0,"report-filter-date",6)(8,it,1,0,"report-filter-number",6)(9,ot,1,0,"report-filter-string",6)(10,rt,1,0,"report-filter-boolean",6)(11,nt,1,0,"report-filter-group",6)(12,st,1,1,"report-filter-reference",7)(13,lt,1,0,"report-filter-expression",6),e.qZA()()(),e.TgZ(14,"div",8)(15,"button",9),e.NdJ("click",function(){return n.save()}),e._uU(16,"Save"),e.qZA(),e.TgZ(17,"button",10),e.NdJ("click",function(){return n.cancel()}),e._uU(18,"Cancel"),e.qZA()()()),2&o&&(e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("ngIf",n.fieldName),e.xp6(3),e.Q6J("ngSwitch",n.data.filter.filterType),e.xp6(),e.Q6J("ngSwitchCase",n.ReportFilterType.Date),e.xp6(),e.Q6J("ngSwitchCase",n.ReportFilterType.Number),e.xp6(),e.Q6J("ngSwitchCase",n.ReportFilterType.String),e.xp6(),e.Q6J("ngSwitchCase",n.ReportFilterType.Boolean),e.xp6(),e.Q6J("ngSwitchCase",n.ReportFilterType.Group),e.xp6(),e.Q6J("ngSwitchCase",n.ReportFilterType.Reference),e.xp6(),e.Q6J("ngSwitchCase",n.ReportFilterType.Expression))},dependencies:[l.O5,l.RF,l.n9,r._Y,r.JJ,r.JL,r.sg,r.u,Ue,Ge,Le,Ee,Xe,ze,We],encapsulation:2})}return i})(),H=(()=>{class i extends m.M{open(t){return this._open(ct,t,{})}static#e=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=e.n5z(i)))(n||i)}})();static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac})}return i})(),ct=(()=>{class i extends m.X{constructor(t,o){super(),this.formService=t,this.reportDesignApi=o,this.form=new r.cw({reportProviderId:new r.NI("",{validators:[r.kI.required],nonNullable:!0}),design:new r.NI(null,{validators:[r.kI.required],nonNullable:!0}),id:new r.NI("",{validators:[r.kI.required],nonNullable:!0})}),this.form.patchValue({reportProviderId:this.data.schema.reportProviderId,design:this.data.design}),this.form.patchValue(this.data.column)}save(){this.formService.hasErrors(this.form)||this.reportDesignApi.deleteReportColumn(this.form.getRawValue()).subscribe(t=>this._closeDialog(t))}cancel(){this._cancelDialog()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(v.o),e.Y36(N.k))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["delete-report-column-dialog"]],features:[e.qOj],decls:11,vars:1,consts:[[1,"form","dialog",3,"formGroup"],[1,"dialog-head","is-danger"],[1,"dialog-body"],[1,"dialog-buttons"],["type","submit",1,"is-danger",3,"click"],["type","button",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"form",0)(1,"div",1),e._uU(2," Delete Column "),e.qZA(),e.TgZ(3,"div",2)(4,"p"),e._uU(5,"Are you sure you want to delete this report column?"),e.qZA()(),e.TgZ(6,"div",3)(7,"button",4),e.NdJ("click",function(){return n.save()}),e._uU(8,"Delete"),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return n.cancel()}),e._uU(10,"Cancel"),e.qZA()()()),2&o&&e.Q6J("formGroup",n.form)},dependencies:[r._Y,r.JL,r.sg],encapsulation:2})}return i})(),$=(()=>{class i extends m.M{open(t){return this._open(pt,t,{})}static#e=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=e.n5z(i)))(n||i)}})();static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac})}return i})(),pt=(()=>{class i extends m.X{constructor(t,o){super(),this.formService=t,this.reportDesignApi=o,this.form=new r.cw({reportProviderId:new r.NI("",{validators:[r.kI.required],nonNullable:!0}),design:new r.NI(null,{validators:[r.kI.required],nonNullable:!0}),id:new r.NI("",{nonNullable:!0})}),this.form.patchValue({reportProviderId:this.data.schema.reportProviderId,design:this.data.design,id:this.data.filter.id})}save(){this.formService.hasErrors(this.form)||this.reportDesignApi.deleteReportFilter(this.form.getRawValue()).subscribe(t=>this._closeDialog(t))}cancel(){this._cancelDialog()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(v.o),e.Y36(N.k))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["delete-report-filter-dialog"]],features:[e.qOj],decls:11,vars:1,consts:[[1,"form","dialog",3,"formGroup"],[1,"dialog-head","is-danger"],[1,"dialog-body"],[1,"dialog-buttons"],["type","submit",1,"is-danger",3,"click"],["type","button",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"form",0)(1,"div",1),e._uU(2," Delete Filter "),e.qZA(),e.TgZ(3,"div",2)(4,"p"),e._uU(5,"Are you sure you want to delete this report filter?"),e.qZA()(),e.TgZ(6,"div",3)(7,"button",4),e.NdJ("click",function(){return n.save()}),e._uU(8,"Delete"),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return n.cancel()}),e._uU(10,"Cancel"),e.qZA()()()),2&o&&e.Q6J("formGroup",n.form)},dependencies:[r._Y,r.JL,r.sg],encapsulation:2})}return i})(),z=(()=>{class i{constructor(t,o,n,s,u,k){this.insertReportColumnDialog=t,this.insertReportFilterDialog=o,this.updateReportColumnDialog=n,this.updateReportFilterDialog=s,this.deleteReportColumnDialog=u,this.deleteReportFilterDialog=k}insertColumn(t,o){return this.insertReportColumnDialog.open({schema:t,design:o})}updateColumn(t,o,n){return this.updateReportColumnDialog.open({schema:t,design:o,column:n})}deleteColumn(t,o,n){return this.deleteReportColumnDialog.open({schema:t,design:o,column:n})}insertFilter(t,o,n){return this.insertReportFilterDialog.open({schema:t,design:o,parentId:n})}updateFilter(t,o,n){return this.updateReportFilterDialog.open({schema:t,design:o,filter:n})}deleteFilter(t,o,n){return this.deleteReportFilterDialog.open({schema:t,design:o,filter:n})}findFilter(t,o){for(const n of o){if(n.id===t)return n;if(n.filterType===g.$T.Group){const u=this.findFilter(t,n.filters);if(u)return u}}return null}static#e=this.\u0275fac=function(o){return new(o||i)(e.LFG(B),e.LFG(X),e.LFG(j),e.LFG(K),e.LFG(H),e.LFG($))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac})}return i})();var O=c(6236);function ut(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",3)(2,"div",4)(3,"span",14),e._UZ(4,"i",15),e.qZA(),e._uU(5," \xa0 "),e.TgZ(6,"span"),e._uU(7),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"div",16)(10,"a",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.editColumn(s))}),e._uU(11,"edit"),e.qZA(),e._uU(12," \xa0 "),e.TgZ(13,"a",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.deleteColumn(s))}),e._uU(14,"delete"),e.qZA()()()()}if(2&i){const t=a.$implicit,o=e.oxw(2);e.xp6(6),e.Udp("font-weight",t.bold?"bold":"normal"),e.xp6(),e.Oqu(t.title),e.xp6(),e.hij(" \xa0 ",o.collectionDescription(t)," ")}}function dt(i,a){1&i&&(e.TgZ(0,"div",19),e._uU(1," There are no columns specified on this report. "),e.qZA())}function mt(i,a){1&i&&(e.TgZ(0,"div",20)(1,"div",19),e._uU(2," There are no filters specified on this report. "),e.qZA()())}const W=i=>({$implicit:i});function ft(i,a){if(1&i&&e.GkF(0,21),2&i){const t=e.oxw(2),o=e.MAs(2);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,W,t.design.filters))}}function gt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"label",6),e._uU(5,"Columns"),e.qZA(),e.TgZ(6,"div",7),e.NdJ("cdkDropListDropped",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.dropColumn(n))}),e.YNc(7,ut,15,4,"div",8)(8,dt,2,0,"div",9),e.qZA(),e.TgZ(9,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addColumn())}),e._uU(10,"Add Columns"),e.qZA()()(),e.TgZ(11,"div",4)(12,"div",5)(13,"label",6),e._uU(14,"Filters"),e.qZA(),e.YNc(15,mt,3,0,"div",11)(16,ft,1,4,"ng-container",12),e.TgZ(17,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addFilter())}),e._uU(18,"Add Filter"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("cdkDropListDisabled",!1),e.xp6(),e.Q6J("ngForOf",t.design.columns),e.xp6(),e.Q6J("ngIf",0==t.design.columns.length),e.xp6(7),e.Q6J("ngIf",0==t.design.filters.length),e.xp6(),e.Q6J("ngIf",t.design.filters.length>0)}}function ht(i,a){1&i&&e._UZ(0,"i",27)}function _t(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.addFilter(n.id))}),e._uU(1,"add"),e.qZA()}}function vt(i,a){if(1&i&&e.GkF(0,21),2&i){const t=e.oxw(2).$implicit;e.oxw(2);const o=e.MAs(2);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,W,t.filters))}}function Zt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e._uU(1," Click to "),e.TgZ(2,"a",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.addFilter(n.id))}),e._uU(3,"add"),e.qZA(),e._uU(4," a condition to this group. "),e.qZA()}}function Ct(i,a){if(1&i&&(e.TgZ(0,"div",29),e.YNc(1,vt,1,4,"ng-container",12)(2,Zt,5,0,"div",9),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(),e.Q6J("ngIf",t.filters.length>0),e.xp6(),e.Q6J("ngIf",0==t.filters.length)}}function bt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",23)(1,"div",19)(2,"div",3)(3,"div",4)(4,"span",14),e._UZ(5,"i",15),e.qZA(),e._uU(6," \xa0 "),e.TgZ(7,"span"),e._uU(8),e.YNc(9,ht,1,0,"i",24),e.qZA()(),e.TgZ(10,"div",16),e.YNc(11,_t,2,0,"a",25),e._uU(12," \xa0 "),e.TgZ(13,"a",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.editFilter(s))}),e._uU(14,"edit"),e.qZA(),e._uU(15," \xa0 "),e.TgZ(16,"a",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.deleteFilter(s))}),e._uU(17,"delete"),e.qZA()()()(),e.YNc(18,Ct,3,2,"div",26),e.qZA()}if(2&i){const t=a.$implicit,o=e.oxw(2);e.xp6(8),e.hij(" ",t.description," "),e.xp6(),e.Q6J("ngIf",t.editable),e.xp6(2),e.Q6J("ngIf",t.filterType==o.ReportFilterType.Group),e.xp6(7),e.Q6J("ngIf",t.filterType==o.ReportFilterType.Group)}}function Tt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.NdJ("cdkDropListDropped",function(n){const u=e.CHM(t).$implicit,k=e.oxw();return e.KtG(k.dropFilter(n,u))}),e.YNc(1,bt,19,4,"div",22),e.qZA()}if(2&i){const t=a.$implicit;e.Q6J("cdkDropListDisabled",!1),e.xp6(),e.Q6J("ngForOf",t)}}let At=(()=>{class i{constructor(t,o,n,s){this.route=t,this.router=o,this.formService=n,this.reportDesignService=s,this.cd=(0,e.f3M)(e.sBO),this.ReportFilterType=x.$T,this.onChange=_.Z,this.onTouched=_.Z,this.isDisabled=!1}ngOnInit(){}addColumn(){this.reportDesignService.insertColumn(this.schema,this.design).subscribe(t=>{this.design=t,this.emitChanges()})}editColumn(t){this.reportDesignService.updateColumn(this.schema,this.design,t).subscribe(o=>{this.design=o,this.emitChanges()})}deleteColumn(t){this.reportDesignService.deleteColumn(this.schema,this.design,t).subscribe(o=>{this.design=o,this.emitChanges()})}dropColumn(t){var o=t.currentIndex;const s=this.design.columns.splice(t.previousIndex,1);this.design.columns.splice(o,0,s[0]),this.emitChanges()}addFilter(t){this.reportDesignService.insertFilter(this.schema,this.design,t||null).subscribe(o=>{this.design=o,this.emitChanges();var n=this.reportDesignService.findFilter(o.latestFilterId,o.filters);n&&this.reportDesignService.updateFilter(this.schema,this.design,n).subscribe(s=>{this.design=s,this.emitChanges()})})}editFilter(t){this.reportDesignService.updateFilter(this.schema,this.design,t).subscribe(o=>{this.design=o,this.emitChanges()})}deleteFilter(t){this.reportDesignService.deleteFilter(this.schema,this.design,t).subscribe(o=>{this.design=o,this.emitChanges()})}dropFilter(t,o){var n=t.currentIndex;const u=o.splice(t.previousIndex,1);o.splice(n,0,u[0]),this.emitChanges()}collectionDescription(t){if(!t.multiValued||0===t.collection)return"";switch(t.collection){case g.pq.Sum:return"(Sum)";case g.pq.Avg:return"(Average)";case g.pq.Min:return"(Min)";case g.pq.Max:return"(Max)";case g.pq.Count:return"(Count)";case g.pq.List:return"(List)";case g.pq.ListDistinct:return"(List Distinct)"}return"(???)"}emitChanges(){this.cd.detectChanges(),this.onChange(p.Z.deepClone(this.design))}writeValue(t){this.design=p.Z.deepClone(t),this.cd.detectChanges()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.isDisabled=t,this.cd.detectChanges()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(d.gz),e.Y36(d.F0),e.Y36(v.o),e.Y36(z))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["report-designer"]],inputs:{schema:"schema"},features:[e._Bn([{provide:r.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0}])],decls:3,vars:1,consts:[["class","report-designer",4,"ngIf"],["filterTemplate",""],[1,"report-designer"],[1,"columns"],[1,"column"],[1,"field"],[1,"label"],["cdkDropList","","cdkDropListLockAxis","y",1,"report-slots",3,"cdkDropListDisabled","cdkDropListDropped"],["class","report-slot","cdkDrag","",4,"ngFor","ngForOf"],["class","report-slot",4,"ngIf"],[1,"button",3,"click"],["class","report-slots",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["cdkDrag","",1,"report-slot"],["cdkDragHandle",""],[1,"fas","fa-fw","fa-bars"],[1,"column","is-right","is-narrow"],[1,"link","is-primary",3,"click"],[1,"link","is-danger",3,"click"],[1,"report-slot"],[1,"report-slots"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag",""],["class","fas fa-pencil",4,"ngIf"],["class","link is-success",3,"click",4,"ngIf"],["style","padding-left: 2rem",4,"ngIf"],[1,"fas","fa-pencil"],[1,"link","is-success",3,"click"],[2,"padding-left","2rem"]],template:function(o,n){1&o&&e.YNc(0,gt,19,5,"div",0)(1,Tt,2,2,"ng-template",null,1,e.W1O),2&o&&e.Q6J("ngIf",n.design)},dependencies:[l.sg,l.O5,l.tP,O.Wj,O.Zt,O.Bh],styles:['[_ngcontent-%COMP%]:root{--palette-text: #333;--palette-text-disabled: #999}[_ngcontent-%COMP%]:root{--palette-body-text: #000;--palette-body-text-highlight: #485fc7;--palette-body-border: #dbdbdb;--palette-body-background: #F4F4F4;--palette-body-background-alt: #F0F0F0}[_ngcontent-%COMP%]:root{--palette-primary-text: hsl(208, 56%, 46%);--palette-primary-foreground: #FFF;--palette-primary-background: hsl(208, 56%, 46%);--palette-primary-background-hover: hsl(208, 56%, 41%)}[_ngcontent-%COMP%]:root{--palette-secondary-text: hsl(210, 30%, 89%);--palette-secondary-foreground: #333;--palette-secondary-background: hsl(210, 30%, 89%);--palette-secondary-background-hover: hsl(210, 30%, 86%)}[_ngcontent-%COMP%]:root{--palette-success-text: hsl(173, 70%, 35%);--palette-success-foreground: #FFF;--palette-success-background: hsl(173, 70%, 35%);--palette-success-background-hover: hsl(173, 70%, 30%)}[_ngcontent-%COMP%]:root{--palette-warning-text: hsl(25, 100%, 40%);--palette-warning-foreground: #FFF;--palette-warning-background: hsl(25, 100%, 40%);--palette-warning-background-hover: hsl(25, 100%, 35%)}[_ngcontent-%COMP%]:root{--palette-danger-text: hsl(351, 52%, 43%);--palette-danger-foreground: #FFF;--palette-danger-background: hsl(351, 52%, 43%);--palette-danger-background-hover: hsl(351, 52%, 38%)}[_ngcontent-%COMP%]:root{--palette-control-text: #333;--palette-control-text-disabled: #999;--palette-control-background: #FFFFFF;--palette-control-background-alt: #F7F7F7;--palette-control-border: #dbdbdb;--palette-control-border-hover: #cbcbcb;--palette-control-border-focus: hsl(208, 10%, 41%);--palette-control-border-error: var(--palette-danger-text);--palette-control-shadow: RGBA(0, 0, 0, .3)}body.dark-mode[_ngcontent-%COMP%]{--palette-text: #fff;--palette-primary-text: hsl(208, 56%, 66%);--palette-control-border: #cccccc;--palette-control-shadow: RGBA(200, 200, 200, .2);--palette-body-text: #FFF;--palette-body-text-highlight: #67ACDB;--palette-body-background: #2F3434;--palette-body-background-alt: #1F2424;--sidebar-highlight: #09949E;--sidebar-background: #4B5660;--sidebar-background-hover: RGBA(10, 10, 10, .5);--sidebar-background-active: RGBA(10, 10, 10, .7);--navbar-highlight: #09949E;--navbar-background: #4B5660;--navbar-background-hover: RGBA(10, 10, 10, .5);--navbar-background-active: RGBA(10, 10, 10, .7)}[_ngcontent-%COMP%]:root{--font-family: "Poppins", sans-serif}[_ngcontent-%COMP%]:root{--gap: 1rem;--bold-if-light: bold}[_ngcontent-%COMP%]:root{--sidebar-background: hsl(198, 34%, 29%);--sidebar-background-hover: RGBA(51, 51, 51, .7);--sidebar-background-active: RGBA(51, 51, 51, .5);--sidebar-highlight: #0de3f6;--sidebar-width: 200px}[_ngcontent-%COMP%]:root{--navbar-background: hsl(198, 34%, 29%);--navbar-background-hover: RGBA(51, 51, 51, .7);--navbar-background-active: RGBA(51, 51, 51, .5);--navbar-highlight: #0de3f6;--navbar-height: 3rem}body.dark-mode[_ngcontent-%COMP%]{--bold-if-light: normal}'],changeDetection:0})}return i})(),Nt=(()=>{class i{constructor(t,o,n,s,u,k,Y,S){this.route=t,this.router=o,this.formService=n,this.reportApi=s,this.reportGroupApi=u,this.reportDesignApi=k,this.reportLauncherDialog=Y,this.confirmDeleteDialog=S,this.form=new r.cw({id:new r.NI("",{validators:[r.kI.required],nonNullable:!0}),name:new r.NI("",{validators:[r.kI.required],nonNullable:!0}),description:new r.NI("",{nonNullable:!0}),design:new r.NI(null,{validators:[r.kI.required],nonNullable:!0}),isPublic:new r.NI(!1,{nonNullable:!0}),reportGroupId:new r.NI("",{validators:[r.kI.required],nonNullable:!0})})}ngOnInit(){this.reset(this.route.snapshot.data.report),this.reportDesignApi.getReportSchema({reportProviderId:this.item.reportProviderId}).subscribe(t=>{this.reportSchema=t})}reset(t){this.item=t,this.form.patchValue(t),this.form.markAsPristine()}save(t){this.formService.hasErrors(this.form)||this.reportApi.update(this.form.getRawValue(),{successGrowl:"Report  Updated"}).subscribe(o=>{this.reset(o),t&&this.router.navigate(["reporting/report-list"])})}cancel(){this.reset(this.item),this.router.navigate(["reporting/report-list"])}delete(){this.confirmDeleteDialog.open({title:"Report "}).subscribe(()=>{this.reportApi.delete({id:this.item.id},{successGrowl:"Report  Deleted"}).subscribe(()=>{this.reset(this.item),this.router.navigate(["reporting/report-list"])})})}run(){this.reportApi.update(this.form.getRawValue(),{successGrowl:"Report  Updated"}).subscribe(t=>{this.reset(t),this.reportLauncherDialog.open({reportId:this.item.id})})}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(d.gz),e.Y36(d.F0),e.Y36(v.o),e.Y36(I.b),e.Y36(Z.p),e.Y36(N.k),e.Y36(E.P),e.Y36(y.h))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["report-item"]],decls:56,vars:4,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/reporting/report-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[1,"buttons","is-right"],[1,"form",3,"formGroup"],[1,"columns","is-wrap"],[1,"field"],[1,"label"],["type","text","placeholder","required","formControlName","name",1,"input"],[1,"column","is-3"],["formControlName","reportGroupId","placeholder","required",3,"dataSource"],[1,"column","is-narrow"],["formControlName","isPublic"],[1,"column","is-12"],["type","text","placeholder","optional","formControlName","description",1,"input"],["formControlName","design",3,"schema"],[1,"floating-buttons"],[1,"button","is-success",3,"click"],[1,"button",3,"click"],[1,"button","is-danger",3,"click"],[1,"button","is-primary",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"ul",0)(1,"li")(2,"a",1),e._uU(3,"Home"),e.qZA()(),e.TgZ(4,"li")(5,"a",2),e._uU(6,"Reports"),e.qZA()(),e.TgZ(7,"li")(8,"a",3),e._uU(9,"Report"),e.qZA()()(),e.TgZ(10,"div",4)(11,"div",5)(12,"div",6)(13,"h1",7),e._uU(14,"Report"),e.qZA()(),e.TgZ(15,"div",6),e._UZ(16,"div",8),e.qZA()(),e.TgZ(17,"form",9)(18,"div",10)(19,"div",6)(20,"div",11)(21,"label",12),e._uU(22,"Name"),e.qZA(),e._UZ(23,"input",13),e.qZA()(),e.TgZ(24,"div",14)(25,"div",11)(26,"label",12),e._uU(27,"Report Group"),e.qZA(),e._UZ(28,"dropdown-select",15),e.qZA()(),e.TgZ(29,"div",16)(30,"div",11)(31,"label",12),e._uU(32,"Public"),e.qZA(),e._UZ(33,"toggle-input",17),e.qZA()(),e.TgZ(34,"div",18)(35,"div",11)(36,"label",12),e._uU(37,"Description"),e.qZA(),e._UZ(38,"input",19),e.qZA()(),e.TgZ(39,"div",18),e._UZ(40,"report-designer",20),e.qZA()(),e.TgZ(41,"div",21)(42,"button",22),e.NdJ("click",function(){return n.save(!1)}),e._uU(43,"Save"),e.qZA(),e.TgZ(44,"button",22),e.NdJ("click",function(){return n.save(!0)}),e._uU(45,"Save & Close"),e.qZA(),e.TgZ(46,"button",23),e.NdJ("click",function(){return n.cancel()}),e._uU(47,"Cancel"),e.qZA(),e.TgZ(48,"span"),e._uU(49,"\xa0|\xa0"),e.qZA(),e.TgZ(50,"button",24),e.NdJ("click",function(){return n.delete()}),e._uU(51,"Delete"),e.qZA(),e.TgZ(52,"span"),e._uU(53,"\xa0|\xa0"),e.qZA(),e.TgZ(54,"button",25),e.NdJ("click",function(){return n.run()}),e._uU(55,"Save & Run"),e.qZA()()()()),2&o&&(e.xp6(8),e.MGl("routerLink","/reporting/report-item/",n.item.id,""),e.xp6(9),e.Q6J("formGroup",n.form),e.xp6(11),e.Q6J("dataSource",n.reportGroupApi),e.xp6(12),e.Q6J("schema",n.reportSchema))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,d.rH,J.B,F.g,At],encapsulation:2})}return i})();var ee=c(9866);const Rt=[{path:"report-group-list",component:q,data:{activeSideMenu:"Configuration"}},{path:"report-group-item/:id",component:re,resolve:{reportGroup:Z.p.reportGroupResolver("id")},canDeactivate:[ee.u.isPristine()],data:{activeSideMenu:"Configuration"}},{path:"report-list",component:ge,data:{activeSideMenu:"Reports"}},{path:"report-item/:id",component:Nt,resolve:{report:I.b.reportResolver("id")},canDeactivate:[ee.u.isPristine()],data:{activeSideMenu:"Reports"}}];let yt=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(Rt),d.Bz]})}return i})(),Ft=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({providers:[z,D,M,V,B,X,j,K,H,$],imports:[l.ez,U.m,yt]})}return i})()},1986:(ie,w,c)=>{c.d(w,{k:()=>D});var l=c(9212),U=c(7147),d=c(6814);function e(f,y){if(1&f){const h=l.EpF();l.TgZ(0,"a",3),l.NdJ("click",function(){l.CHM(h);const T=l.oxw(2);return l.KtG(T.onAdd())}),l._uU(1,"add"),l.qZA()}}function r(f,y){if(1&f&&l.YNc(0,e,2,0,"a",2),2&f){const h=l.oxw();l.Q6J("ngIf",h.canAdd)}}function m(f,y){if(1&f){const h=l.EpF();l.TgZ(0,"a",6),l.NdJ("click",function(){l.CHM(h);const T=l.oxw().$implicit,q=l.oxw();return l.KtG(q.onEdit(T))}),l._uU(1,"view/edit"),l.qZA()}}function v(f,y){if(1&f){const h=l.EpF();l.TgZ(0,"span"),l._uU(1," \xa0 "),l.TgZ(2,"a",7),l.NdJ("click",function(){l.CHM(h);const T=l.oxw().$implicit,q=l.oxw();return l.KtG(q.onDelete(T))}),l._uU(3,"delete"),l.qZA()()}}function Z(f,y){if(1&f&&l.YNc(0,m,2,0,"a",4)(1,v,4,0,"span",5),2&f){const h=l.oxw();l.Q6J("ngIf",h.canEdit),l.xp6(),l.Q6J("ngIf",h.canDelete)}}let D=(()=>{class f extends U.I{constructor(){super(),this.canAdd=!0,this.add=new l.vpe,this.canEdit=!0,this.edit=new l.vpe,this.canDelete=!0,this.delete=new l.vpe,this.justify="right"}onAdd(){this.add.emit()}onEdit(h){this.edit.emit(h)}onDelete(h){this.delete.emit(h)}static#e=this.\u0275fac=function(b){return new(b||f)};static#t=this.\u0275cmp=l.Xpm({type:f,selectors:[["grid-action-column"]],inputs:{canAdd:"canAdd",canEdit:"canEdit",canDelete:"canDelete"},outputs:{add:"add",edit:"edit",delete:"delete"},features:[l._Bn([{provide:U.I,useExisting:f}]),l.qOj],decls:4,vars:0,consts:[["headTemplate",""],["itemTemplate",""],["class","link is-success",3,"click",4,"ngIf"],[1,"link","is-success",3,"click"],["class","link is-primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"link","is-primary",3,"click"],[1,"link","is-danger",3,"click"]],template:function(b,T){1&b&&l.YNc(0,r,1,1,"ng-template",null,0,l.W1O)(2,Z,2,2,"ng-template",null,1,l.W1O)},dependencies:[d.O5],encapsulation:2})}return f})()}}]);