"use strict";(self.webpackChunkWebfuel_App=self.webpackChunkWebfuel_App||[]).push([[164],{4164:(M,f,s)=>{s.r(f),s.d(f,{HomeModule:()=>Ct});var c=s(177),d=s(2896),u=s(4722),F=s(5377),t=s(4438),l=s(4243),_=s(7520),g=s(9636),v=s(8829),h=s(4052),y=s(9571),C=s(1875);function G(e,r){1&e&&(t.j41(0,"div"),t.EFF(1," Loading... "),t.k0s())}function I(e,r){if(1&e){const i=t.RV6();t.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"span",14),t.nrm(4,"i",15),t.k0s(),t.EFF(5," \xa0 "),t.j41(6,"span"),t.EFF(7),t.k0s(),t.EFF(8," \xa0 "),t.k0s(),t.j41(9,"div",16)(10,"a",17),t.bIt("click",function(){const o=t.eBV(i).$implicit,a=t.XpG(3);return t.Njj(a.deleteWidget(o))}),t.EFF(11,"delete"),t.k0s()()()()}if(2&e){const i=r.$implicit,n=t.XpG(3);t.R7$(7),t.JRh(n.widgetService.widgetTitle(i))}}function A(e,r){1&e&&(t.j41(0,"div",18),t.EFF(1," There are no widgets specified on this dashboard. "),t.k0s())}function w(e,r){if(1&e){const i=t.RV6();t.j41(0,"div",7)(1,"div",8),t.bIt("cdkDropListDropped",function(o){t.eBV(i);const a=t.XpG(2);return t.Njj(a.dropWidget(o))}),t.DNE(2,I,12,1,"div",9)(3,A,2,0,"div",10),t.k0s()()}if(2&e){const i=t.XpG(2);t.R7$(),t.Y8G("cdkDropListDisabled",!1),t.R7$(),t.Y8G("ngForOf",i.widgets),t.R7$(),t.Y8G("ngIf",0==i.widgets.length)}}function W(e,r){if(1&e){const i=t.RV6();t.j41(0,"div",1),t.EFF(1," Manage Widgets "),t.j41(2,"span",2)(3,"a",3),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.addWidget())}),t.EFF(4,"+ add widget"),t.k0s()()(),t.j41(5,"div",4),t.DNE(6,G,2,0,"div")(7,w,4,3),t.k0s(),t.j41(8,"div",5)(9,"button",6),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.close())}),t.EFF(10,"Close"),t.k0s()()}if(2&e){const i=t.XpG();t.R7$(6),t.vxM(6,null===i.widgets?6:7)}}function x(e,r){if(1&e){const i=t.RV6();t.j41(0,"div",18)(1,"div",12)(2,"div",13)(3,"span"),t.EFF(4),t.k0s()(),t.j41(5,"div",16)(6,"a",21),t.bIt("click",function(){const o=t.eBV(i).$implicit,a=t.XpG(2);return t.Njj(a.addWidgetType(o))}),t.EFF(7,"add"),t.k0s()()()()}if(2&e){const i=r.$implicit,n=t.XpG(2);t.R7$(4),t.JRh(n.widgetService.widgetTypeName(i.id))}}function R(e,r){1&e&&(t.j41(0,"div",18),t.EFF(1," No widget types available! "),t.k0s())}function X(e,r){if(1&e){const i=t.RV6();t.j41(0,"div",1),t.EFF(1," Add Widget "),t.k0s(),t.j41(2,"div",4)(3,"div",7)(4,"div",19),t.DNE(5,x,8,1,"div",20)(6,R,2,0,"div",10),t.k0s()()(),t.j41(7,"div",5)(8,"button",6),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.cancelAdd())}),t.EFF(9,"Cancel"),t.k0s()()}if(2&e){const i=t.XpG();t.R7$(5),t.Y8G("ngForOf",i.widgetTypes),t.R7$(),t.Y8G("ngIf",0==i.widgetTypes.length)}}function S(e,r){}let D=(()=>{class e extends _.u{open(i){return this._open($,i,{disableClose:!0})}static{this.\u0275fac=(()=>{let i;return function(o){return(i||(i=t.xGo(e)))(o||e)}})()}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac})}}return e})(),$=(()=>{class e extends _.V{constructor(i,n,o,a){super(),this.formService=i,this.growlService=n,this.widgetApi=o,this.widgetService=a,this.widgets=null,this.widgetTypes=[],this.mode="manage",this.setMode("manage"),this.widgetApi.selectType({userId:this.data.userId}).subscribe(p=>this.widgetTypes=p)}loadWidgets(){this.widgetApi.select({userId:this.data.userId}).subscribe(i=>this.widgets=i)}close(){this._closeDialog(!0)}deleteWidget(i){this.widgetApi.delete({id:i.id},{successGrowl:"Changes saved"}).subscribe(n=>{this.loadWidgets()})}dropWidget(i){var n=i.currentIndex;const a=this.widgets.splice(i.previousIndex,1);this.widgets.splice(n,0,a[0]),this.widgetApi.sort({ids:g.A.map(this.widgets,p=>p.id),userId:this.data.userId},{successGrowl:"Changes saved"}).subscribe(()=>{this.loadWidgets()})}addWidget(){this.setMode("add")}cancelAdd(){this.setMode("manage")}addWidgetType(i){this.widgetApi.create({userId:this.data.userId,widgetTypeId:i.id},{successGrowl:"Changes saved"}).subscribe(()=>{this.setMode("manage")})}editWidget(i){}setMode(i){this.mode=i,this.loadWidgets()}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(v.u),t.rXU(h.Z),t.rXU(l.X),t.rXU(y.C))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["manage-widget-dialog"]],features:[t.Vt3],decls:4,vars:1,consts:[[1,"dialog"],[1,"dialog-head"],[2,"float","right"],[1,"link",3,"click"],[1,"dialog-body"],[1,"dialog-buttons"],["type","button",3,"click"],[1,"report-designer"],["cdkDropList","","cdkDropListLockAxis","y",1,"report-slots",3,"cdkDropListDropped","cdkDropListDisabled"],["class","report-slot","cdkDrag","",4,"ngFor","ngForOf"],["class","report-slot",4,"ngIf"],["cdkDrag","",1,"report-slot"],[1,"columns"],[1,"column"],["cdkDragHandle",""],[1,"fas","fa-fw","fa-bars"],[1,"column","is-right","is-narrow"],[1,"link","is-danger",3,"click"],[1,"report-slot"],[1,"report-slots"],["class","report-slot",4,"ngFor","ngForOf"],[1,"link","is-success",3,"click"]],template:function(n,o){1&n&&(t.j41(0,"div",0),t.DNE(1,W,11,1)(2,X,10,2)(3,S,0,0),t.k0s()),2&n&&(t.R7$(),t.vxM(1,"manage"==o.mode?1:"add"==o.mode?2:"edit"==o.mode?3:-1))},dependencies:[c.Sq,c.bT,C.O7,C.T1,C.Fb],encapsulation:2})}}return e})();var N=s(4312),T=s(3548),U=s(8651),b=s(9079);function P(e,r){if(1&e&&(t.j41(0,"a",3)(1,"div",4),t.nrm(2,"i"),t.k0s(),t.j41(3,"div",5),t.EFF(4),t.k0s(),t.j41(5,"div",6),t.EFF(6),t.k0s(),t.j41(7,"div",7),t.EFF(8,"View Details "),t.nrm(9,"i",8),t.k0s()()),2&e){const i=r.$implicit,n=t.XpG(2);t.FS9("routerLink",i.routerLink),t.Y8G("queryParams",n.routerParams(i)),t.R7$(2),t.HbH(i.icon),t.R7$(2),t.JRh(i.count),t.R7$(2),t.JRh(i.name)}}function V(e,r){if(1&e&&(t.j41(0,"div")(1,"h4"),t.EFF(2,"Project Summary"),t.k0s(),t.j41(3,"div",1),t.DNE(4,P,10,7,"a",2),t.k0s()()),2&e){const i=t.XpG();t.R7$(4),t.Y8G("ngForOf",i.data.projectMetrics)}}let B=(()=>{class e{constructor(i){this.widgetService=i,this.destroyRef=(0,t.WQX)(t.abz),this.data=null}ngOnInit(){this.widgetService.getDataSource(this.widget).pipe((0,b.pQ)(this.destroyRef)).subscribe(i=>{i.complete&&(this.data=JSON.parse(i.data))})}routerParams(i){return i.routerParams?JSON.parse(i.routerParams):{}}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(y.C))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["project-summary-widget"]],inputs:{widget:"widget"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"dashboard-metrics"],["class","dashboard-metric",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"dashboard-metric",3,"routerLink","queryParams"],[1,"icon"],[1,"count"],[1,"name"],[1,"cta"],[1,"fas","fa-arrow-right"]],template:function(n,o){1&n&&t.DNE(0,V,5,1,"div",0),2&n&&t.Y8G("ngIf",null!=o.data)},dependencies:[c.Sq,c.bT,u.Wk],encapsulation:2})}}return e})();function O(e,r){if(1&e&&(t.j41(0,"a",3)(1,"div",4),t.nrm(2,"i"),t.k0s(),t.j41(3,"div",5),t.EFF(4),t.k0s(),t.j41(5,"div",6),t.EFF(6),t.k0s(),t.j41(7,"div",7),t.EFF(8,"View Details "),t.nrm(9,"i",8),t.k0s()()),2&e){const i=r.$implicit,n=t.XpG(2);t.FS9("routerLink",i.routerLink),t.Y8G("queryParams",n.routerParams(i)),t.R7$(2),t.HbH(i.icon),t.R7$(2),t.JRh(i.count),t.R7$(2),t.JRh(i.name)}}function H(e,r){if(1&e&&(t.j41(0,"div")(1,"h4"),t.EFF(2,"Team Support"),t.k0s(),t.j41(3,"div",1),t.DNE(4,O,10,7,"a",2),t.k0s()()),2&e){const i=t.XpG();t.R7$(4),t.Y8G("ngForOf",i.data.supportMetrics)}}let L=(()=>{class e{constructor(i){this.widgetService=i,this.destroyRef=(0,t.WQX)(t.abz),this.data=null}ngOnInit(){this.widgetService.getDataSource(this.widget).pipe((0,b.pQ)(this.destroyRef)).subscribe(i=>{i.complete&&(this.data=JSON.parse(i.data))})}routerParams(i){return i.routerParams?JSON.parse(i.routerParams):{}}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(y.C))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["team-support-widget"]],inputs:{widget:"widget"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"dashboard-metrics"],["class","dashboard-metric",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"dashboard-metric",3,"routerLink","queryParams"],[1,"icon"],[1,"count"],[1,"name"],[1,"cta"],[1,"fas","fa-arrow-right"]],template:function(n,o){1&n&&t.DNE(0,H,5,1,"div",0),2&n&&t.Y8G("ngIf",null!=o.data)},dependencies:[c.Sq,c.bT,u.Wk],encapsulation:2})}}return e})();function Y(e,r){if(1&e){const i=t.RV6();t.j41(0,"div",7)(1,"button",8),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.manageWidgets())}),t.EFF(2,"Manage Widgets"),t.k0s()()}}function J(e,r){1&e&&(t.j41(0,"div"),t.EFF(1," Loading... "),t.k0s())}function z(e,r){if(1&e&&t.nrm(0,"project-summary-widget",9),2&e){const i=t.XpG().$implicit;t.Y8G("widget",i)}}function Q(e,r){if(1&e&&t.nrm(0,"team-support-widget",9),2&e){const i=t.XpG().$implicit;t.Y8G("widget",i)}}function K(e,r){if(1&e&&t.DNE(0,z,1,1)(1,Q,1,1),2&e){let i;const n=r.$implicit,o=t.XpG(2);t.vxM(0,(i=n.widgetTypeId)===o.WidgetTypeEnum.ProjectSummary?0:i===o.WidgetTypeEnum.TeamSupport?1:-1)}}function Z(e,r){if(1&e&&t.Z7z(0,K,2,1,null,null,t.Vm6),2&e){const i=t.XpG();t.Dyx(i.widgets)}}let q=(()=>{class e{constructor(i,n,o,a,p,j,k){this.router=i,this.widgetApi=n,this.manageWidgetDialog=o,this.userService=a,this.staticDataCache=p,this.configurationService=j,this.widgetService=k,this.widgets=null,this.WidgetTypeEnum=F.Md}ngOnInit(){this.configurationService.configuration.subscribe(i=>{this.loadWidgets()})}loadWidgets(){null!=this.configurationService.configuration.value?this.widgetApi.select({userId:this.configurationService.configuration.value.userId}).subscribe(i=>{this.widgets=i}):this.widgets=[]}manageWidgets(){null!=this.widgets&&this.manageWidgetDialog.open({userId:this.configurationService.configuration.value.userId}).subscribe(()=>{this.loadWidgets()})}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(u.Ix),t.rXU(l.X),t.rXU(D),t.rXU(N.D),t.rXU(T.t),t.rXU(U.s),t.rXU(y.C))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-home"]],decls:13,vars:2,consts:[[1,"breadcrumbs"],["routerLink","/home"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],["class","header-buttons",4,"ngIf"],[1,"header-buttons"],[1,"button","is-primary",3,"click"],[3,"widget"]],template:function(n,o){1&n&&(t.j41(0,"ul",0)(1,"li")(2,"a",1),t.EFF(3,"Home"),t.k0s()()(),t.j41(4,"div",2)(5,"div",3)(6,"div",4)(7,"h1",5),t.EFF(8,"Dashboard"),t.k0s()(),t.j41(9,"div",4),t.DNE(10,Y,3,0,"div",6),t.k0s()(),t.DNE(11,J,2,0,"div")(12,Z,2,0),t.k0s()),2&n&&(t.R7$(10),t.Y8G("ngIf",null!==o.widgets),t.R7$(),t.vxM(11,null===o.widgets?11:12))},dependencies:[c.bT,u.Wk,B,L],encapsulation:2})}}return e})();var m=s(4341),tt=s(499),it=s(334),et=s(4247),nt=s(6540),ot=s(7016),st=s(6089),rt=s(9463),at=s(1062),ct=s(1435),dt=s(1050),lt=s(8009);const E=e=>({id:e});function mt(e,r){if(1&e&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"async"),t.k0s()),2&e){let i;const n=r.$implicit,o=t.XpG(3);t.R7$(),t.SpI(" ",null==(i=t.bMT(2,1,o.staticDataCache.supportProvided.get(t.eq3(3,E,n))))?null:i.name," ")}}function pt(e,r){if(1&e&&(t.j41(0,"div"),t.DNE(1,mt,3,5,"div",27),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",i.projectSupportProvidedIds)}}function ut(e,r){if(1&e&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"async"),t.k0s()),2&e){let i;const n=t.XpG().$implicit,o=t.XpG();t.R7$(),t.SpI(" ",null==(i=t.bMT(2,1,o.staticDataCache.workActivity.get(t.eq3(3,E,n.workActivityId))))?null:i.name," ")}}function gt(e,r){if(1&e&&t.DNE(0,pt,2,1,"div",26)(1,ut,3,5,"div",26),2&e){const i=r.$implicit;t.Y8G("ngIf",i.isProjectActivity),t.R7$(),t.Y8G("ngIf",!i.isProjectActivity)}}function vt(e,r){if(1&e&&(t.j41(0,"pre",28),t.EFF(1),t.k0s()),2&e){const i=r.$implicit;t.R7$(),t.JRh(i.description)}}function ft(e,r){if(1&e&&(t.j41(0,"div")(1,"a",29),t.nrm(2,"i",30),t.EFF(3),t.k0s()()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Mz_("href","/project/project-support/",i.projectId,"",t.B4B),t.R7$(2),t.SpI(" ",i.projectPrefixedNumber,"")}}function _t(e,r){if(1&e){const i=t.RV6();t.j41(0,"div")(1,"a",31),t.bIt("click",function(){t.eBV(i);const o=t.XpG().$implicit,a=t.XpG();return t.Njj(a.edit(o))}),t.EFF(2,"edit"),t.k0s(),t.EFF(3," \xa0 "),t.j41(4,"a",32),t.bIt("click",function(){t.eBV(i);const o=t.XpG().$implicit,a=t.XpG();return t.Njj(a.delete(o))}),t.EFF(5,"delete"),t.k0s()()}}function ht(e,r){if(1&e&&t.DNE(0,ft,4,3,"div",26)(1,_t,6,0,"div",26),2&e){const i=r.$implicit;t.Y8G("ngIf",i.isProjectActivity),t.R7$(),t.Y8G("ngIf",!i.isProjectActivity)}}const yt=[{path:"",component:q,data:{activeSideMenu:"Home"}},{path:"my-activity",component:(()=>{class e{constructor(i,n,o,a,p,j,k){this.createUserActivityDialog=i,this.updateUserActivityDialog=n,this.confirmDeleteDialog=o,this.userApi=a,this.userActivityApi=p,this.staticDataCache=j,this.reportService=k,this.destroyRef=(0,t.WQX)(t.abz),this.filterForm=new m.gE({fromDate:new m.MJ(null),toDate:new m.MJ(null),description:new m.MJ("",{nonNullable:!0}),userId:new m.MJ(null)})}ngOnInit(){}resetFilterForm(){this.filterForm.patchValue({fromDate:null,toDate:null,description:""})}createUserActivity(){this.createUserActivityDialog.open()}edit(i){this.updateUserActivityDialog.open({userActivity:i})}delete(i){this.confirmDeleteDialog.open({title:"User Activity"}).subscribe(()=>{this.userActivityApi.delete({id:i.id},{successGrowl:"User Activity Deleted"}).subscribe()})}export(){this.userActivityApi.export(g.A.merge(this.filterForm.getRawValue(),{skip:0,take:0})).subscribe(i=>{this.reportService.runReport(i)})}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(tt.J),t.rXU(it.G),t.rXU(et.K),t.rXU(nt.i),t.rXU(ot.b),t.rXU(T.t),t.rXU(st.G))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["my-activity"]],decls:39,vars:5,consts:[["itemTemplate",""],[1,"breadcrumbs"],["routerLink","/home"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[1,"header-buttons"],[1,"button","is-success",3,"click"],[1,"button","is-primary",3,"click"],[1,"filter-form"],[1,"form",3,"formGroup"],[1,"flex"],[1,"field","is-3"],["placeholder","From Date","formControlName","fromDate",3,"enableClear"],["placeholder","To Date","formControlName","toDate",3,"enableClear"],[1,"field","is-6"],["type","text","formControlName","description","placeholder","Description",1,"input"],[1,"is-12","is-right"],[1,"button","is-small",3,"click"],[3,"dataSource","filterForm"],["name","date"],["name","workTimeInHours","label","Hours","format","0.2-2"],["name","Activity"],["name","description"],["justify","right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"grid-pre"],["target","_blank",1,"link","is-primary",3,"href"],[1,"fas","fa-external-link"],[1,"link","is-primary",3,"click"],[1,"link","is-danger",3,"click"]],template:function(n,o){if(1&n){const a=t.RV6();t.j41(0,"ul",1)(1,"li")(2,"a",2),t.EFF(3,"Home"),t.k0s()()(),t.j41(4,"div",3)(5,"div",4)(6,"div",5)(7,"h1",6),t.EFF(8,"My Activity"),t.k0s()(),t.j41(9,"div",5)(10,"div",7)(11,"button",8),t.bIt("click",function(){return t.eBV(a),t.Njj(o.createUserActivity())}),t.EFF(12,"Add Activity"),t.k0s(),t.j41(13,"button",9),t.bIt("click",function(){return t.eBV(a),t.Njj(o.export())}),t.EFF(14,"Export"),t.k0s()()()(),t.j41(15,"div",10)(16,"form",11)(17,"div",12)(18,"div",13),t.nrm(19,"date-picker",14),t.k0s(),t.j41(20,"div",13),t.nrm(21,"date-picker",15),t.k0s(),t.j41(22,"div",16),t.nrm(23,"input",17),t.k0s(),t.j41(24,"div",18)(25,"button",19),t.bIt("click",function(){return t.eBV(a),t.Njj(o.resetFilterForm())}),t.EFF(26,"show all"),t.k0s()()()()(),t.j41(27,"grid",20),t.nrm(28,"grid-date-column",21)(29,"grid-number-column",22),t.j41(30,"grid-column",23),t.DNE(31,gt,2,2,"ng-template",null,0,t.C5r),t.k0s(),t.j41(33,"grid-column",24),t.DNE(34,vt,2,1,"ng-template",null,0,t.C5r),t.k0s(),t.j41(36,"grid-column",25),t.DNE(37,ht,2,2,"ng-template",null,0,t.C5r),t.k0s()()()}2&n&&(t.R7$(16),t.Y8G("formGroup",o.filterForm),t.R7$(3),t.Y8G("enableClear",!0),t.R7$(2),t.Y8G("enableClear",!0),t.R7$(6),t.Y8G("dataSource",o.userActivityApi)("filterForm",o.filterForm))},dependencies:[c.Sq,c.bT,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,u.Wk,rt.I,at._,ct.C,dt.u,lt.R,c.Jj],encapsulation:2})}}return e})(),data:{activeSideMenu:"My Activity"}}];let Ft=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[u.iI.forChild(yt),u.iI]})}}return e})(),Ct=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({providers:[D],imports:[c.MD,d.G,Ft]})}}return e})()},1050:(M,f,s)=>{s.d(f,{u:()=>t});var c=s(1435),d=s(4438),u=s(177);function F(l,_){if(1&l&&(d.EFF(0),d.nI1(1,"date")),2&l){const g=_.$implicit,v=d.XpG();d.SpI(" ",d.i5U(1,1,g[v.name],"dd MMM yyyy"),"\n")}}let t=(()=>{class l extends c.C{static{this.\u0275fac=(()=>{let g;return function(h){return(g||(g=d.xGo(l)))(h||l)}})()}static{this.\u0275cmp=d.VBU({type:l,selectors:[["grid-date-column"]],features:[d.Jv_([{provide:c.C,useExisting:l}]),d.Vt3],decls:2,vars:0,consts:[["itemTemplate",""]],template:function(v,h){1&v&&d.DNE(0,F,2,4,"ng-template",null,0,d.C5r)},dependencies:[u.vh],encapsulation:2})}}return l})()}}]);