"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[991],{7991:(uo,x,l)=>{l.r(x),l.d(x,{ProjectModule:()=>so});var u=l(177),ie=l(2896),p=l(4722),S=l(1725),h=l(2474),r=l(4341),v=l(5377),F=l(9636),e=l(4438),j=l(6540),T=l(4312),ne=l(8605),ae=l(2221),f=l(3548),N=l(8651),se=l(6089),V=l(8933),k=l(2817),b=l(9463),D=l(1062),y=l(1435),X=l(3376),Y=l(1050),L=l(9779);const le=o=>({id:o});function ce(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.createTest())}),e.EFF(1,"Create Test Project"),e.k0s()}}function ue(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.fullName," ")}function pe(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.fullName," ")}function de(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.fullName," ")}function me(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.fullName," ")}function fe(o,a){if(1&o&&(e.EFF(0),e.nI1(1,"async")),2&o){const t=a.$implicit,n=e.XpG();e.SpI(" ",e.bMT(1,1,n.userService.formatUser(t.leadAdviserUserId))," ")}}function he(o,a){1&o&&(e.j41(0,"span"),e.EFF(1,"\xa0|\xa0"),e.k0s())}function je(o,a){if(1&o&&(e.j41(0,"span"),e.DNE(1,he,2,0,"span",44),e.EFF(2),e.nI1(3,"async"),e.k0s()),2&o){let t;const n=a.$implicit,i=a.index,s=e.XpG(2);e.R7$(),e.Y8G("ngIf",i>0),e.R7$(),e.SpI("",null==(t=e.bMT(3,2,s.staticDataCache.supportTeam.get(e.eq3(4,le,n))))?null:t.name," ")}}function be(o,a){1&o&&e.DNE(0,je,4,6,"span",43),2&o&&e.Y8G("ngForOf",a.$implicit.openSupportRequestTeamIds)}function _e(o,a){if(1&o&&e.EFF(0),2&o){const t=a.$implicit,n=e.XpG();e.SpI(" ",n.clipTitle(t.title)," ")}}function ve(o,a){1&o&&e.nrm(0,"i",45)}function Fe(o,a){if(1&o&&(e.j41(0,"span",46),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.R7$(),e.JRh(0==t.diagnosticCount?"":t.diagnosticCount)}}let ke=(()=>{class o{constructor(t,n,i,s,c,_,U,q,J,lo,co){this.router=t,this.activatedRoute=n,this.projectApi=i,this.userApi=s,this.userService=c,this.reportApi=_,this.runAnnualReportDialog=U,this.staticDataCache=q,this.configurationService=J,this.reportService=lo,this.confirmDialog=co,this.filterForm=new r.gE({number:new r.MJ("",{nonNullable:!0}),fromDate:new r.MJ(null),toDate:new r.MJ(null),statusId:new r.MJ(null),proposedFundingStreamId:new r.MJ(null),leadAdviserUserId:new r.MJ(null),supportAdviserUserId:new r.MJ(null),title:new r.MJ("",{nonNullable:!0}),teamContactName:new r.MJ("",{nonNullable:!0}),openSupportTeamId:new r.MJ(null)})}get developer(){return this.configurationService.hasClaim(t=>t.claims.developer)}ngAfterViewInit(){this.activatedRoute.queryParams.subscribe(t=>this.applyFilterParams(t))}resetFilterForm(){this.filterForm.patchValue({number:"",fromDate:null,toDate:null,statusId:null,proposedFundingStreamId:null,leadAdviserUserId:null,supportAdviserUserId:null,title:"",teamContactName:"",openSupportTeamId:null})}createTest(){this.projectApi.createTest({}).subscribe(()=>{this.projectApi.changed.emit()})}edit(t){this.router.navigate(["project/project-item",t.id])}export(){this.projectApi.export(F.A.merge(this.filterForm.getRawValue(),{skip:0,take:0})).subscribe(t=>{this.reportService.runReport(t)})}annualReport(){this.runAnnualReportDialog.open({}).subscribe(t=>{})}applyFilterParams(t){const n=t.show,i=t.supportTeam,s=t.leadAdviser,c=t.supportAdviser;switch((n||i||s||c)&&this.resetFilterForm(),n){case"active":this.filterForm.patchValue({statusId:v.fB.Active});break;case"on-hold":this.filterForm.patchValue({statusId:v.fB.OnHold});break;case"submitted-on-hold":this.filterForm.patchValue({statusId:v.fB.SubmittedOnHold})}i&&this.filterForm.patchValue({openSupportTeamId:i}),s&&this.filterForm.patchValue({leadAdviserUserId:s}),c&&this.filterForm.patchValue({supportAdviserUserId:c})}clipTitle(t){return t.length>50?t.substring(0,50)+"...":t}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(p.Ix),e.rXU(p.nX),e.rXU(h.A),e.rXU(j.i),e.rXU(T.D),e.rXU(ne.f),e.rXU(ae.X),e.rXU(f.t),e.rXU(N.s),e.rXU(se.G),e.rXU(V.T))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["project-list"]],decls:76,vars:23,consts:[["optionTemplate",""],["pickedTemplate",""],["itemTemplate",""],["headTemplate",""],[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/project/project-list"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[1,"header-buttons"],[1,"button","is-warning"],[1,"button","is-primary",3,"click"],[1,"filter-form"],[1,"form",3,"formGroup"],[1,"flex"],[1,"field","is-3"],["type","text","formControlName","number","placeholder","Number",1,"input"],[1,"field","is-9"],["type","text","formControlName","title","placeholder","Title",1,"input"],["placeholder","Lead Adviser","formControlName","leadAdviserUserId",3,"dataSource","enableClear","enableSearch"],["placeholder","Support Adviser","formControlName","supportAdviserUserId",3,"dataSource","enableClear","enableSearch"],["type","text","formControlName","teamContactName","placeholder","Contact Name",1,"input"],["placeholder","Open Support Request","formControlName","openSupportTeamId",3,"dataSource","enableClear"],["placeholder","Status","formControlName","statusId",3,"dataSource","enableClear"],["placeholder","From Date","formControlName","fromDate",3,"enableClear"],["placeholder","To Date","formControlName","toDate",3,"enableClear"],["placeholder","Proposed Funding Stream","formControlName","proposedFundingStreamId",3,"dataSource","enableClear"],[1,"is-12","is-right"],[1,"button","is-small",3,"click"],["stateKey","ProjectList",3,"dataSource","filterForm"],["name","prefixedNumber","label","Number"],["name","dateOfRequest"],["name","statusId",3,"dataSource"],["name","teamContactFullName","label","Contact Name"],["name","leadAdviserUserId","label","Lead Adviser"],["name","openTeamRequests",3,"sortable"],["name","title"],["name","proposedFundingStreamId","label","Proposed Funding Stream",3,"dataSource"],["name","diagnosticCount","justify","center","cssClass","hidden-xs"],[3,"edit","canAdd","canDelete"],[1,"button","is-warning",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text","is-warning","fas","fa-exclamation-triangle"],[1,"text","is-warning","is-bold"]],template:function(n,i){if(1&n){const s=e.RV6();e.j41(0,"ul",4)(1,"li")(2,"a",5),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",6),e.EFF(6,"Projects"),e.k0s()()(),e.j41(7,"div",7)(8,"div",8)(9,"div",9)(10,"h1",10),e.EFF(11,"Projects"),e.k0s()(),e.j41(12,"div",9)(13,"div",11),e.DNE(14,ce,2,0,"button",12),e.j41(15,"button",13),e.bIt("click",function(){return e.eBV(s),e.Njj(i.annualReport())}),e.EFF(16,"Annual Report"),e.k0s(),e.j41(17,"button",13),e.bIt("click",function(){return e.eBV(s),e.Njj(i.export())}),e.EFF(18,"Export"),e.k0s()()()(),e.j41(19,"div",14)(20,"form",15)(21,"div",16)(22,"div",17),e.nrm(23,"input",18),e.k0s(),e.j41(24,"div",19),e.nrm(25,"input",20),e.k0s()(),e.j41(26,"div",16)(27,"div",17)(28,"dropdown-select",21),e.DNE(29,ue,1,1,"ng-template",null,0,e.C5r)(31,pe,1,1,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(33,"div",17)(34,"dropdown-select",22),e.DNE(35,de,1,1,"ng-template",null,0,e.C5r)(37,me,1,1,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(39,"div",17),e.nrm(40,"input",23),e.k0s(),e.j41(41,"div",17),e.nrm(42,"dropdown-select",24),e.k0s()(),e.j41(43,"div",16)(44,"div",17),e.nrm(45,"dropdown-select",25),e.k0s(),e.j41(46,"div",17),e.nrm(47,"date-picker",26),e.k0s(),e.j41(48,"div",17),e.nrm(49,"date-picker",27),e.k0s(),e.j41(50,"div",17),e.nrm(51,"dropdown-select",28),e.k0s(),e.j41(52,"div",29)(53,"button",30),e.bIt("click",function(){return e.eBV(s),e.Njj(i.resetFilterForm())}),e.EFF(54,"show all"),e.k0s()()()()(),e.j41(55,"grid",31),e.nrm(56,"grid-column",32)(57,"grid-date-column",33)(58,"grid-reference-column",34)(59,"grid-column",35),e.j41(60,"grid-column",36),e.DNE(61,fe,2,3,"ng-template",null,2,e.C5r),e.k0s(),e.j41(63,"grid-column",37),e.DNE(64,be,1,1,"ng-template",null,2,e.C5r),e.k0s(),e.j41(66,"grid-column",38),e.DNE(67,_e,1,1,"ng-template",null,2,e.C5r),e.k0s(),e.nrm(69,"grid-reference-column",39),e.j41(70,"grid-column",40),e.DNE(71,ve,1,0,"ng-template",null,3,e.C5r)(73,Fe,2,1,"ng-template",null,2,e.C5r),e.k0s(),e.j41(75,"grid-action-column",41),e.bIt("edit",function(_){return e.eBV(s),e.Njj(i.edit(_))}),e.k0s()()()}2&n&&(e.R7$(14),e.vxM(14,i.developer?14:-1),e.R7$(6),e.Y8G("formGroup",i.filterForm),e.R7$(8),e.Y8G("dataSource",i.userApi)("enableClear",!0)("enableSearch",!0),e.R7$(6),e.Y8G("dataSource",i.userApi)("enableClear",!0)("enableSearch",!0),e.R7$(8),e.Y8G("dataSource",i.staticDataCache.supportTeam)("enableClear",!0),e.R7$(3),e.Y8G("dataSource",i.staticDataCache.projectStatus)("enableClear",!0),e.R7$(2),e.Y8G("enableClear",!0),e.R7$(2),e.Y8G("enableClear",!0),e.R7$(2),e.Y8G("dataSource",i.staticDataCache.fundingStream)("enableClear",!0),e.R7$(4),e.Y8G("dataSource",i.projectApi)("filterForm",i.filterForm),e.R7$(3),e.Y8G("dataSource",i.staticDataCache.projectStatus),e.R7$(5),e.Y8G("sortable",!1),e.R7$(6),e.Y8G("dataSource",i.staticDataCache.fundingStream),e.R7$(6),e.Y8G("canAdd",!1)("canDelete",!1))},dependencies:[u.Sq,u.bT,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,p.Wk,k.p,b.I,D._,y.C,X.y,Y.u,L.h,u.Jj],encapsulation:2})}}return o})(),C=(()=>{class o{constructor(){this.route=(0,e.WQX)(p.nX),this.router=(0,e.WQX)(p.Ix),this.projectApi=(0,e.WQX)(h.A),this.confirmDialog=(0,e.WQX)(V.T),this.staticDataCache=(0,e.WQX)(f.t),this.projectStatus=null}ngOnInit(){this.reset(this.route.snapshot.data.project)}reset(t){this.item=t,this.resetStatus()}resetStatus(){this.staticDataCache.projectStatus.get({id:this.item.statusId}).subscribe(t=>{this.projectStatus=t,this.locked?this.applyLock():this.clearLock()})}applyLock(){}clearLock(){}get locked(){return this.item.locked}get discarded(){return this.item.discarded}unlock(){this.confirmDialog.open({title:"Unlock Project",message:"Are you sure you want to return this project to Active status?"}).subscribe(()=>{this.projectApi.unlock({id:this.item.id},{successGrowl:"Project Unlocked"}).subscribe(t=>{this.reset(t)})})}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["ng-component"]],decls:0,vars:0,template:function(n,i){},encapsulation:2})}}return o})();var d=l(8829),ge=l(5437),B=l(2571),O=l(5343);let A=(()=>{class o{constructor(){this.formControl=new r.MJ(null),this.destroyRef=(0,e.WQX)(e.abz),this.placeholder="",this.prefix="",this.onChange=O.l,this.onTouched=O.l}ngOnInit(){}onFocus(){}onBlur(){var t=this.toNum(this.formControl.getRawValue());this.formControl.setValue(this.toTxt(t)),this.onChange(t),this.onTouched()}toTxt(t){if(null===t)return null;var n=F.A.formatNumber(F.A.parseNumber(t,!1),0);return n&&n.length>0&&this.prefix&&(n=this.prefix+n),n}toNum(t){return null==t?null:F.A.parseNumber(t,!1)}writeValue(t){this.formControl.setValue(this.toTxt(t),{emitEvent:!1})}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formControl.disable():this.formControl.enable()}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["number-input"]],inputs:{placeholder:"placeholder",prefix:"prefix"},features:[e.Jv_([{provide:r.kq,useExisting:(0,e.Rfq)(()=>o),multi:!0}])],decls:2,vars:2,consts:[[1,"control"],["type","text",1,"input",2,"text-align","right",3,"blur","focus","placeholder","formControl"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"input",1),e.bIt("blur",function(){return i.onBlur()})("focus",function(){return i.onFocus()}),e.k0s()()),2&n&&(e.R7$(),e.Y8G("placeholder",i.placeholder)("formControl",i.formControl))},dependencies:[r.me,r.BC,r.l_],encapsulation:2,changeDetection:0})}}return o})();var E=l(1449),H=l(3671);let g=(()=>{class o{constructor(t){this.route=t}ngOnInit(){this.reset(this.route.snapshot.data.project)}reset(t){this.item=t}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(p.nX))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["project-tabs"]],decls:23,vars:14,consts:[[1,"tabs"],["routerLinkActive","is-active"],[3,"routerLink"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"ul")(2,"li",1)(3,"a",2),e.EFF(4,"Project"),e.k0s()(),e.j41(5,"li",1)(6,"a",2),e.EFF(7,"Request"),e.k0s()(),e.j41(8,"li",1)(9,"a",2),e.EFF(10,"Researcher"),e.k0s()(),e.j41(11,"li",1)(12,"a",2),e.EFF(13,"Support"),e.k0s()(),e.j41(14,"li",1)(15,"a",2),e.EFF(16,"Files"),e.k0s()(),e.j41(17,"li",1)(18,"a",2),e.EFF(19,"Submissions"),e.k0s()(),e.j41(20,"li",1)(21,"a",2),e.EFF(22,"History"),e.k0s()()()()),2&n&&(e.R7$(3),e.Mz_("routerLink","../../project-item/",i.item.id,""),e.R7$(3),e.Mz_("routerLink","../../project-request/",i.item.id,""),e.R7$(3),e.Mz_("routerLink","../../project-researcher/",i.item.id,""),e.R7$(3),e.Mz_("routerLink","../../project-support/",i.item.id,""),e.R7$(3),e.Mz_("routerLink","../../project-files/",i.item.id,""),e.R7$(3),e.Mz_("routerLink","../../project-submission/",i.item.id,""),e.R7$(3),e.Mz_("routerLink","../../project-history/",i.item.id,""))},dependencies:[p.Wk,p.wQ],encapsulation:2})}}return o})();function Se(o,a){if(1&o&&(e.j41(0,"div"),e.nrm(1,"i",61),e.EFF(2),e.k0s()),2&o){const t=a.$implicit;e.ZvI("diagnostic-item severity-",t.severity,""),e.R7$(2),e.SpI(" ",t.message," ")}}function Ce(o,a){if(1&o&&(e.j41(0,"div",59),e.DNE(1,Se,3,4,"div",60),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.item.diagnosticList)}}function Ie(o,a){if(1&o&&(e.j41(0,"span",62),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI("(changing from ",t.projectStatus.name,")")}}function Ne(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.fullName," ")}function Ee(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.fullName," ")}function Re(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.fullName," ")}function Pe(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.fullName," ")}function we(o,a){if(1&o){const t=e.RV6();e.EFF(0," | "),e.j41(1,"button",67),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.enrich())}),e.EFF(2,"Enrich"),e.k0s()}}function Te(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",63)(1,"button",64),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save(!1))}),e.EFF(2,"Save"),e.k0s(),e.j41(3,"button",64),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save(!0))}),e.EFF(4,"Save & Close"),e.k0s(),e.j41(5,"button",65),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancel())}),e.EFF(6,"Cancel"),e.k0s(),e.DNE(7,we,3,0,"button",66),e.k0s()}if(2&o){const t=e.XpG();e.R7$(7),e.vxM(7,t.isDeveloper()?7:-1)}}function De(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",69),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.unlock())}),e.EFF(1,"Unlock"),e.k0s()}}function ye(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",63),e.DNE(1,De,2,0,"button",68),e.j41(2,"button",65),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancel())}),e.EFF(3,"Close"),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.canUnlock())}}function Ae(o,a){1&o&&(e.j41(0,"p"),e.EFF(1,"Enquiry came via NIHR round robin link"),e.k0s())}let Ge=(()=>{class o extends C{constructor(t,n,i,s){super(),this.formService=t,this.userApi=n,this.projectAdviserApi=i,this.configurationService=s,this.destroyRef=(0,e.WQX)(e.abz),this.filterStatus=c=>!(c.locked&&!this.canUnlock()),this.form=new r.gE({id:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),statusId:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),closureDate:new r.MJ(null),administratorComments:new r.MJ("",{nonNullable:!0}),title:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),willStudyUseCTUId:new r.MJ(null),isPaidRSSAdviserLeadId:new r.MJ(null),isPaidRSSAdviserCoapplicantId:new r.MJ(null),rssHubProvidingAdviceIds:new r.MJ([],{nonNullable:!0}),monetaryValueOfFundingApplication:new r.MJ(null),submittedFundingStreamId:new r.MJ(null),submittedFundingStreamFreeText:new r.MJ("",{nonNullable:!0}),submittedFundingStreamName:new r.MJ("",{nonNullable:!0}),leadAdviserUserId:new r.MJ(null),outlineSubmissionDeadline:new r.MJ(null),outlineSubmissionStatusId:new r.MJ(null),outlineOutcomeExpectedDate:new r.MJ(null),outlineOutcomeId:new r.MJ(null),fullSubmissionDeadline:new r.MJ(null),fullSubmissionStatusId:new r.MJ(null),fullOutcomeExpectedDate:new r.MJ(null),fullOutcomeId:new r.MJ(null),projectStartDate:new r.MJ(null),recruitmentTarget:new r.MJ(null),numberOfProjectSites:new r.MJ(null),isInternationalMultiSiteStudyId:new r.MJ(null),socialCare:new r.MJ(!1,{nonNullable:!0}),publicHealth:new r.MJ(!1,{nonNullable:!0}),projectAdviserUserIds:new r.MJ([],{nonNullable:!0}),isRoundRobinEnquiry:new r.MJ(!1,{nonNullable:!0})})}ngOnInit(){super.ngOnInit(),this.projectAdviserApi.selectUserIdsByProjectId({projectId:this.item.id}).subscribe(t=>{this.form.patchValue({projectAdviserUserIds:t})})}canUnlock(){return this.configurationService.hasClaim(t=>t.claims.canUnlockProjects)}isAdministrator(){return this.configurationService.hasClaim(t=>t.claims.administrator)}isDeveloper(){return this.configurationService.hasClaim(t=>t.claims.developer)}reset(t){super.reset(t),this.form.patchValue(t),this.form.markAsPristine()}applyLock(){this.form.disable()}clearLock(){this.form.enable(),this.isAdministrator()||this.form.controls.administratorComments.disable()}isRoundRobinEnquiry(){return this.form.getRawValue().isRoundRobinEnquiry}save(t){this.formService.hasErrors(this.form)||(this.form.value.statusId!=this.item.statusId?(this.form.value.statusId==v.fB.Closed||this.form.value.statusId==v.fB.ClosedNotSubmitted)&&this.item.diagnosticCount>0?this.confirmDialog.open({title:"Closing project with open diagnostics",message:"Are you sure you want to close this project with open diagnostic issues?",style:"danger"}).subscribe(()=>{this._save(t)}):this.confirmDialog.open({title:"Status changing",message:"Are you sure you want to change the status of this project?"}).subscribe(()=>{this._save(t)}):this._save(t))}_save(t){this.projectApi.update(this.form.getRawValue(),{successGrowl:"Project Updated"}).subscribe(n=>{this.reset(n),t&&this.router.navigate(["project/project-list"])})}cancel(){this.reset(this.item),this.router.navigate(["project/project-list"])}enrich(){this.projectApi.enrich({id:this.item.id}).subscribe(t=>{this.reset(t)})}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(d.u),e.rXU(j.i),e.rXU(ge.S),e.rXU(N.s))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["project-item"]],features:[e.Vt3],decls:177,vars:41,consts:[["optionTemplate",""],["pickedTemplate",""],[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/project/project-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],["class","diagnostic-list message is-danger",4,"ngIf"],[1,"form",3,"formGroup"],[1,"flex"],[1,"field","is-12"],[1,"label"],["type","text","placeholder","required","formControlName","title",1,"input"],[1,"flex","no-margin"],[1,"is-9"],[1,"field","is-4"],["class","text is-warning",4,"ngIf"],["placeholder","required","formControlName","statusId",3,"optionFilter","dataSource"],["placeholder","optional","formControlName","closureDate",3,"enableClear"],["placeholder","required","formControlName","leadAdviserUserId",3,"dataSource","enableClear","enableSearch"],["formControlName","administratorComments","placeholder","optional"],[1,"is-3"],[1,"field"],["placeholder","click to add...","formControlName","projectAdviserUserIds",3,"dataSource","verticalStack","enableSearch"],[1,"field","is-6"],["placeholder","required","formControlName","willStudyUseCTUId",3,"dataSource"],["placeholder","required","prefix","\xa3","formControlName","monetaryValueOfFundingApplication"],["placeholder","required","formControlName","submittedFundingStreamId",3,"dataSource","freeTextControl"],["type","text","placeholder","optional","formControlName","submittedFundingStreamName",1,"input"],["placeholder","optional","formControlName","rssHubProvidingAdviceIds",3,"dataSource"],["placeholder","required","formControlName","isPaidRSSAdviserLeadId",3,"dataSource"],["placeholder","required","formControlName","isPaidRSSAdviserCoapplicantId",3,"dataSource"],[1,"is-6"],[1,"form-heading","is-12"],[2,"margin-bottom","0.5rem"],[2,"margin-top","0"],[1,"field","is-inline","is-12"],["placeholder","optional","formControlName","outlineSubmissionDeadline",3,"enableClear"],["placeholder","optional","formControlName","outlineSubmissionStatusId",3,"dataSource"],["placeholder","optional","formControlName","outlineOutcomeExpectedDate",3,"enableClear"],["placeholder","optional","formControlName","outlineOutcomeId",3,"dataSource"],["placeholder","optional","formControlName","fullSubmissionDeadline",3,"enableClear"],["placeholder","optional","formControlName","fullSubmissionStatusId",3,"dataSource"],["placeholder","optional","formControlName","fullOutcomeExpectedDate",3,"enableClear"],["placeholder","optional","formControlName","fullOutcomeId",3,"dataSource"],[1,"field","is-3","is-6-md"],["placeholder","optional","formControlName","projectStartDate"],["type","number","placeholder","optional","formControlName","recruitmentTarget",1,"input"],["type","number","placeholder","optional","formControlName","numberOfProjectSites",1,"input"],["placeholder","optional","formControlName","isInternationalMultiSiteStudyId",3,"dataSource"],[1,"field","is-3"],["formControlName","socialCare"],["formControlName","publicHealth"],["class","floating-buttons",4,"ngIf"],[2,"opacity","0.5"],[4,"ngIf"],[1,"diagnostic-list","message","is-danger"],[3,"class",4,"ngFor","ngForOf"],[1,"fas","fa-exclamation-triangle"],[1,"text","is-warning"],[1,"floating-buttons"],[1,"button","is-success",3,"click"],[1,"button",3,"click"],[1,"button","is-primary"],[1,"button","is-primary",3,"click"],["class","button is-warning",3,"click",4,"ngIf"],[1,"button","is-warning",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"ul",2)(1,"li")(2,"a",3),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",4),e.EFF(6,"Projects"),e.k0s()(),e.j41(7,"li")(8,"a",5),e.EFF(9,"Project"),e.k0s()()(),e.j41(10,"div",6)(11,"div",7)(12,"div",8)(13,"h1",9),e.EFF(14),e.k0s()()(),e.nrm(15,"project-tabs"),e.DNE(16,Ce,2,1,"div",10),e.j41(17,"form",11)(18,"div",12)(19,"div",13)(20,"label",14),e.EFF(21,"Working title of the project"),e.k0s(),e.nrm(22,"input",15),e.k0s()(),e.j41(23,"div",16)(24,"div",17)(25,"div",12)(26,"div",18)(27,"label",14),e.EFF(28," Status "),e.DNE(29,Ie,2,1,"span",19),e.k0s(),e.nrm(30,"dropdown-select",20),e.k0s(),e.j41(31,"div",18)(32,"label",14),e.EFF(33,"Closure date"),e.k0s(),e.nrm(34,"date-picker",21),e.k0s(),e.j41(35,"div",18)(36,"label",14),e.EFF(37,"Lead Adviser"),e.k0s(),e.j41(38,"dropdown-select",22),e.DNE(39,Ne,1,1,"ng-template",null,0,e.C5r)(41,Ee,1,1,"ng-template",null,1,e.C5r),e.k0s()()(),e.j41(43,"div",12)(44,"div",13)(45,"label",14),e.EFF(46,"Administrator Comments"),e.k0s(),e.nrm(47,"text-area",23),e.k0s()()(),e.j41(48,"div",24)(49,"div",25)(50,"label",14),e.EFF(51,"Support Advisers"),e.k0s(),e.j41(52,"dropdown-multi-select",26),e.DNE(53,Re,1,1,"ng-template",null,0,e.C5r)(55,Pe,1,1,"ng-template",null,1,e.C5r),e.k0s()()()(),e.j41(57,"div",12)(58,"div",27)(59,"label",14),e.EFF(60,"Will this study use a CTU?"),e.k0s(),e.nrm(61,"dropdown-select",28),e.k0s(),e.j41(62,"div",27)(63,"label",14),e.EFF(64,"Monetary value of funding application"),e.k0s(),e.nrm(65,"number-input",29),e.k0s()(),e.j41(66,"div",12)(67,"div",27)(68,"label",14),e.EFF(69,"Funding stream submitted to"),e.k0s(),e.nrm(70,"dropdown-select",30),e.k0s(),e.j41(71,"div",27)(72,"label",14),e.EFF(73,"Funding stream name"),e.k0s(),e.nrm(74,"input",31),e.k0s()(),e.j41(75,"div",12)(76,"div",13)(77,"label",14),e.EFF(78," RSS hubs involved in providing advice (other than Imperial College London and Partners) "),e.k0s(),e.nrm(79,"dropdown-multi-select",32),e.k0s()(),e.j41(80,"div",12)(81,"div",27)(82,"label",14),e.EFF(83,"Is a paid RSS staff member, who provided advice, the lead/co-lead for this application?"),e.k0s(),e.nrm(84,"dropdown-select",33),e.k0s(),e.j41(85,"div",27)(86,"label",14),e.EFF(87,"Is a paid RSS staff member, who provided advice, a co-applicant for this application?"),e.k0s(),e.nrm(88,"dropdown-select",34),e.k0s()(),e.j41(89,"div",12)(90,"div",35)(91,"div",12)(92,"div",36)(93,"h2",37),e.EFF(94,"Outline Application"),e.k0s(),e.nrm(95,"hr",38),e.k0s(),e.j41(96,"div",39)(97,"label",14),e.EFF(98,"Outline submission deadline"),e.k0s(),e.nrm(99,"date-picker",40),e.k0s(),e.j41(100,"div",39)(101,"label",14),e.EFF(102,"Outline submission status"),e.k0s(),e.nrm(103,"dropdown-select",41),e.k0s(),e.j41(104,"div",39)(105,"label",14),e.EFF(106,"Outline outcome expected"),e.k0s(),e.nrm(107,"date-picker",42),e.k0s(),e.j41(108,"div",39)(109,"label",14),e.EFF(110,"Outline outcome"),e.k0s(),e.nrm(111,"dropdown-select",43),e.k0s()()(),e.j41(112,"div",35)(113,"div",12)(114,"div",36)(115,"h2",37),e.EFF(116,"Full Application"),e.k0s(),e.nrm(117,"hr",38),e.k0s(),e.j41(118,"div",39)(119,"label",14),e.EFF(120,"Full submission deadline"),e.k0s(),e.nrm(121,"date-picker",44),e.k0s(),e.j41(122,"div",39)(123,"label",14),e.EFF(124,"Full submission status"),e.k0s(),e.nrm(125,"dropdown-select",45),e.k0s(),e.j41(126,"div",39)(127,"label",14),e.EFF(128,"Full outcome expected"),e.k0s(),e.nrm(129,"date-picker",46),e.k0s(),e.j41(130,"div",39)(131,"label",14),e.EFF(132,"Full outcome"),e.k0s(),e.nrm(133,"dropdown-select",47),e.k0s()()()(),e.nrm(134,"hr"),e.j41(135,"h3"),e.EFF(136,"For Clinical Trial Submissions"),e.k0s(),e.j41(137,"div",12)(138,"div",48)(139,"label",14),e.EFF(140,"Project start date"),e.k0s(),e.nrm(141,"date-picker",49),e.k0s(),e.j41(142,"div",48)(143,"label",14),e.EFF(144,"Recruitment target"),e.k0s(),e.nrm(145,"input",50),e.k0s(),e.j41(146,"div",48)(147,"label",14),e.EFF(148,"Number of project sites"),e.k0s(),e.nrm(149,"input",51),e.k0s(),e.j41(150,"div",48)(151,"label",14),e.EFF(152,"Is this an international multi-site study"),e.k0s(),e.nrm(153,"dropdown-select",52),e.k0s()(),e.nrm(154,"hr"),e.j41(155,"h2"),e.EFF(156,"Other Information"),e.k0s(),e.j41(157,"div",12)(158,"div",53)(159,"label",14),e.EFF(160,"Social care"),e.k0s(),e.nrm(161,"toggle-input",54),e.k0s(),e.j41(162,"div",53)(163,"label",14),e.EFF(164,"Public health"),e.k0s(),e.nrm(165,"toggle-input",55),e.k0s()(),e.DNE(166,Te,8,1,"div",56)(167,ye,4,1,"div",56),e.k0s(),e.j41(168,"p")(169,"span"),e.EFF(170),e.nI1(171,"date"),e.k0s(),e.EFF(172," \xa0\xa0 "),e.j41(173,"span",57),e.EFF(174),e.nI1(175,"date"),e.k0s()(),e.DNE(176,Ae,2,0,"p",58),e.k0s()),2&n&&(e.R7$(8),e.Mz_("routerLink","/project/project-item/",i.item.id,""),e.R7$(6),e.SpI("Project ",i.item.prefixedNumber,""),e.R7$(2),e.Y8G("ngIf",i.item.diagnosticCount>0),e.R7$(),e.Y8G("formGroup",i.form),e.R7$(12),e.Y8G("ngIf",i.projectStatus&&i.projectStatus.id!=i.form.value.statusId),e.R7$(),e.Y8G("optionFilter",i.filterStatus)("dataSource",i.staticDataCache.projectStatus),e.R7$(4),e.Y8G("enableClear",!0),e.R7$(4),e.Y8G("dataSource",i.userApi)("enableClear",!0)("enableSearch",!0),e.R7$(14),e.Y8G("dataSource",i.userApi)("verticalStack",!0)("enableSearch",!0),e.R7$(9),e.Y8G("dataSource",i.staticDataCache.willStudyUseCTU),e.R7$(9),e.Y8G("dataSource",i.staticDataCache.fundingStream)("freeTextControl",i.form.controls.submittedFundingStreamFreeText),e.R7$(9),e.Y8G("dataSource",i.staticDataCache.rssHub),e.R7$(5),e.Y8G("dataSource",i.staticDataCache.isPaidRSSAdviserLead),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.isPaidRSSAdviserCoapplicant),e.R7$(11),e.Y8G("enableClear",!0),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.outlineSubmissionStatus),e.R7$(4),e.Y8G("enableClear",!0),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.outlineOutcome),e.R7$(10),e.Y8G("enableClear",!0),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.fullSubmissionStatus),e.R7$(4),e.Y8G("enableClear",!0),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.fullOutcome),e.R7$(20),e.Y8G("dataSource",i.staticDataCache.isInternationalMultiSiteStudy),e.R7$(13),e.Y8G("ngIf",!i.locked),e.R7$(),e.Y8G("ngIf",i.locked),e.R7$(3),e.SpI("Created ",e.i5U(171,35,i.item.createdAt,"dd MMM yy"),"."),e.R7$(4),e.SpI("Checked ",e.i5U(175,38,i.item.heartbeatExecutedAt,"dd MMM yy HH:mm"),"."),e.R7$(2),e.Y8G("ngIf",i.isRoundRobinEnquiry()))},dependencies:[u.Sq,u.bT,r.qT,r.me,r.Q0,r.BC,r.cb,r.j4,r.JD,p.Wk,B.Q,A,k.p,E.C,b.I,H.A,g,u.vh],encapsulation:2})}}return o})();var I=l(850);function $e(o,a){if(1&o&&(e.j41(0,"div",32)(1,"a",33),e.nrm(2,"i",34),e.EFF(3," Click here to view the original support request for this project"),e.k0s()()),2&o){const t=e.XpG();e.R7$(),e.Mz_("href","/support-request/support-request-item/",t.item.supportRequestId,"",e.B4B)}}function Me(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",35)(1,"button",36),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save(!1))}),e.EFF(2,"Save"),e.k0s(),e.j41(3,"button",36),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save(!0))}),e.EFF(4,"Save & Close"),e.k0s(),e.j41(5,"button",37),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancel())}),e.EFF(6,"Cancel"),e.k0s()()}}function Ue(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",39),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.unlock())}),e.EFF(1,"Unlock"),e.k0s()}}function qe(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",35),e.DNE(1,Ue,2,0,"button",38),e.j41(2,"button",37),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancel())}),e.EFF(3,"Close"),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.canUnlock())}}let Je=(()=>{class o extends C{constructor(t,n){super(),this.formService=t,this.configurationService=n,this.form=new r.gE({id:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),title:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),isFellowshipId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),nihrApplicationId:new r.MJ("",{nonNullable:!0}),proposedFundingStreamName:new r.MJ("",{nonNullable:!0}),targetSubmissionDate:new r.MJ(null),experienceOfResearchAwards:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),isTeamMembersConsultedId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),isResubmissionId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),briefDescription:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),supportRequested:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),applicationStageId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),applicationStageFreeText:new r.MJ("",{nonNullable:!0}),proposedFundingStreamId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),proposedFundingCallTypeId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),howDidYouFindUsId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),howDidYouFindUsFreeText:new r.MJ("",{nonNullable:!0}),whoElseIsOnTheStudyTeam:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),isCTUAlreadyInvolvedId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),isCTUAlreadyInvolvedFreeText:new r.MJ("",{nonNullable:!0}),professionalBackgroundIds:new r.MJ([],{validators:[I.b.minArrayLength(1)],nonNullable:!0}),professionalBackgroundFreeText:new r.MJ("",{nonNullable:!0})})}ngOnInit(){super.ngOnInit()}canUnlock(){return this.configurationService.hasClaim(t=>t.claims.canUnlockProjects)}reset(t){super.reset(t),this.form.patchValue(t),this.form.markAsPristine()}applyLock(){this.form.disable()}clearLock(){this.form.enable()}save(t){this.formService.hasErrors(this.form)||this.projectApi.updateRequest(this.form.getRawValue(),{successGrowl:"Project Updated"}).subscribe(n=>{this.reset(n),t&&this.router.navigate(["project/project-list"])})}cancel(){this.reset(this.item),this.router.navigate(["project/project-list"])}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(d.u),e.rXU(N.s))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["project-request"]],features:[e.Vt3],decls:89,vars:22,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/project/project-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[1,"form",3,"formGroup"],[1,"flex"],["class","is-12",4,"ngIf"],[1,"field","is-12"],[1,"label"],["type","text","placeholder","required","formControlName","title",1,"input"],[1,"field","is-6"],["placeholder","required","formControlName","applicationStageId",3,"dataSource","freeTextControl"],["placeholder","required","formControlName","isFellowshipId",3,"dataSource"],["placeholder","required","formControlName","proposedFundingStreamId",3,"dataSource"],["type","text","placeholder","optional","formControlName","proposedFundingStreamName",1,"input"],["placeholder","required","formControlName","proposedFundingCallTypeId",3,"dataSource"],["type","text","placeholder","optional","formControlName","nihrApplicationId","maxlength","64",1,"input"],["placeholder","optional","formControlName","targetSubmissionDate",3,"enableClear"],["placeholder","required","formControlName","isTeamMembersConsultedId",3,"dataSource"],["placeholder","required","formControlName","isResubmissionId",3,"dataSource"],["freeTextPlaceholder","Please specify which CTU is already involved...","placeholder","required","formControlName","isCTUAlreadyInvolvedId",3,"dataSource","freeTextControl"],["placeholder","required","formControlName","howDidYouFindUsId",3,"dataSource","freeTextControl"],["formControlName","experienceOfResearchAwards","placeholder","required"],["formControlName","briefDescription","placeholder","required"],["formControlName","supportRequested","placeholder","required"],["formControlName","whoElseIsOnTheStudyTeam","placeholder","required","maxlength","2000"],["placeholder","required","formControlName","professionalBackgroundIds",3,"dataSource","enableClear","freeTextControl"],["class","floating-buttons",4,"ngIf"],[1,"is-12"],[1,"link","is-primary",3,"href"],[1,"fas","fa-link"],[1,"floating-buttons"],[1,"button","is-success",3,"click"],[1,"button",3,"click"],["class","button is-warning",3,"click",4,"ngIf"],[1,"button","is-warning",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",2),e.EFF(6,"Projects"),e.k0s()(),e.j41(7,"li")(8,"a",3),e.EFF(9,"Project"),e.k0s()()(),e.j41(10,"div",4)(11,"div",5)(12,"div",6)(13,"h1",7),e.EFF(14),e.k0s()()(),e.nrm(15,"project-tabs"),e.j41(16,"form",8)(17,"div",9),e.DNE(18,$e,4,2,"div",10),e.j41(19,"div",11)(20,"label",12),e.EFF(21,"Working title of the project"),e.k0s(),e.nrm(22,"input",13),e.k0s(),e.j41(23,"div",14)(24,"label",12),e.EFF(25,"Stage of application"),e.k0s(),e.nrm(26,"dropdown-select",15),e.k0s(),e.j41(27,"div",14)(28,"label",12),e.EFF(29,"Is this application for a fellowship?"),e.k0s(),e.nrm(30,"dropdown-select",16),e.k0s(),e.j41(31,"div",14)(32,"label",12),e.EFF(33,"Proposed funding stream"),e.k0s(),e.nrm(34,"dropdown-select",17),e.k0s(),e.j41(35,"div",14)(36,"label",12),e.EFF(37,"Funding stream name / specialist call if known"),e.k0s(),e.nrm(38,"input",18),e.k0s(),e.j41(39,"div",14)(40,"label",12),e.EFF(41,"Type of call"),e.k0s(),e.nrm(42,"dropdown-select",19),e.k0s(),e.j41(43,"div",14)(44,"label",12),e.EFF(45,"NIHR application ID if known"),e.k0s(),e.nrm(46,"input",20),e.k0s(),e.j41(47,"div",14)(48,"label",12),e.EFF(49,"Target submission date (if known)"),e.k0s(),e.nrm(50,"date-picker",21),e.k0s(),e.j41(51,"div",14)(52,"label",12),e.EFF(53,"Have your team members been consulted for support?"),e.k0s(),e.nrm(54,"dropdown-select",22),e.k0s(),e.j41(55,"div",14)(56,"label",12),e.EFF(57,"Has the application or similar been submitted to a funder before?"),e.k0s(),e.nrm(58,"dropdown-select",23),e.k0s(),e.j41(59,"div",14)(60,"label",12),e.EFF(61,"Have you already got a CTU involved and if so which one?"),e.k0s(),e.nrm(62,"dropdown-select",24),e.k0s(),e.j41(63,"div",14)(64,"label",12),e.EFF(65,"How did you hear about our hub?"),e.k0s(),e.nrm(66,"dropdown-select",25),e.k0s(),e.j41(67,"div",11)(68,"label",12),e.EFF(69,"What is your (or the CIs) experience of securing funding awards?"),e.k0s(),e.nrm(70,"text-area",26),e.k0s(),e.j41(71,"div",11)(72,"label",12),e.EFF(73," Please add a brief description of your proposed study. Where possible include an outline of research question, aims, need and methods (including analysis), potential impact. [max 500 words] "),e.k0s(),e.nrm(74,"text-area",27),e.k0s(),e.j41(75,"div",11)(76,"label",12),e.EFF(77," What support are you looking for from RSS? Eg funding advice, methods advice, PPIE and EDI advice, CTU support, training in methods for grants? "),e.k0s(),e.nrm(78,"text-area",28),e.k0s(),e.j41(79,"div",11)(80,"label",12),e.EFF(81," Who else is on your study team and what is their expertise? "),e.k0s(),e.nrm(82,"text-area",29),e.k0s(),e.j41(83,"div",11)(84,"label",12),e.EFF(85,"What is the professional background of all team/applicants? (select all that apply)"),e.k0s(),e.nrm(86,"dropdown-multi-select",30),e.k0s()(),e.DNE(87,Me,7,0,"div",31)(88,qe,4,1,"div",31),e.k0s()()),2&n&&(e.R7$(8),e.Mz_("routerLink","/project/project-item/",i.item.id,""),e.R7$(6),e.SpI("Project ",i.item.prefixedNumber,""),e.R7$(2),e.Y8G("formGroup",i.form),e.R7$(2),e.Y8G("ngIf",i.item.supportRequestId),e.R7$(8),e.Y8G("dataSource",i.staticDataCache.applicationStage)("freeTextControl",i.form.controls.applicationStageFreeText),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.isFellowship),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.fundingStream),e.R7$(8),e.Y8G("dataSource",i.staticDataCache.fundingCallType),e.R7$(8),e.Y8G("enableClear",!0),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.isTeamMembersConsulted),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.isResubmission),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.isCTUAlreadyInvolved)("freeTextControl",i.form.controls.isCTUAlreadyInvolvedFreeText),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.howDidYouFindUs)("freeTextControl",i.form.controls.howDidYouFindUsFreeText),e.R7$(20),e.Y8G("dataSource",i.staticDataCache.researcherProfessionalBackground)("enableClear",!0)("freeTextControl",i.form.controls.professionalBackgroundFreeText),e.R7$(),e.Y8G("ngIf",!i.locked),e.R7$(),e.Y8G("ngIf",i.locked))},dependencies:[u.bT,r.qT,r.me,r.BC,r.cb,r.tU,r.j4,r.JD,p.Wk,B.Q,k.p,E.C,b.I,g],encapsulation:2})}}return o})();var R=l(9079),P=l(152),xe=l(5312),G=l(4247),m=l(7520),W=l(9438),z=l(5820);function Ve(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.name," ")}function Xe(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.name," ")}function Ye(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.fullName," ")}function Le(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.fullName," ")}function Be(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.name," ")}function Oe(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.name," ")}function He(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",30),e.EFF(1),e.j41(2,"a",31),e.bIt("click",function(i){const s=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.removeExistingFile(s,i))}),e.nrm(3,"i",32),e.k0s()()}if(2&o){const t=a.$implicit;e.R7$(),e.SpI(" ",t.fileName,"\xa0\xa0\xa0")}}function We(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",33),e.EFF(1),e.j41(2,"a",31),e.bIt("click",function(i){const s=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.removeUploadedFile(s,i))}),e.nrm(3,"i",32),e.k0s()()}if(2&o){const t=a.$implicit;e.R7$(),e.SpI(" ",t.name,"\xa0\xa0\xa0")}}let Q=(()=>{class o extends m.u{open(t){return this._open(ze,t,{width:"1000px",disableClose:!0})}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(o)))(i||o)}})()}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac})}}return o})(),ze=(()=>{class o extends W.J{constructor(t,n,i,s){super(),this.formService=t,this.userApi=n,this.staticDataCache=i,this.configurationService=s,this.form=new r.gE({projectSupportGroupId:new r.MJ("",{nonNullable:!0}),date:new r.MJ(null),teamIds:new r.MJ([],{validators:[I.b.minArrayLength(1)],nonNullable:!0}),adviserIds:new r.MJ([],{validators:[I.b.minArrayLength(1)],nonNullable:!0}),supportProvidedIds:new r.MJ([],{validators:[I.b.minArrayLength(1)],nonNullable:!0}),description:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),workTimeInHours:new r.MJ(null,{validators:[r.k0.required,r.k0.min(0),r.k0.max(8)],nonNullable:!0}),supportRequestedTeamId:new r.MJ(null),isPrePostAwardId:new r.MJ(v.cV.PreAward,{nonNullable:!0}),files:new r.MJ([],{nonNullable:!0})}),this.form.patchValue({projectSupportGroupId:this.data.projectSupportGroupId}),this.configurationService.configuration.subscribe(c=>{this.form.patchValue({adviserIds:null==c?.userId?[]:[c.userId]})})}save(){this.submitting||(this.submitting=!0,!1===this.form.valid?this.deferredSubmitFiles():this.submitFiles())}deferredSubmitFiles(){setTimeout(()=>{this.formService.hasErrors(this.form)?this.submitting=!1:this.submitFiles()},250)}cancel(){this._cancelDialog()}submitForm(){this.form.patchValue({files:this.existingFiles}),this.projectSupportApi.create(this.form.getRawValue(),{successGrowl:"Project Support Added"}).subscribe(t=>{this.submitting=!1,this._closeDialog(t)},t=>{this.submitting=!1})}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(d.u),e.rXU(j.i),e.rXU(f.t),e.rXU(N.s))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["create-project-support-dialog"]],features:[e.Vt3],decls:70,vars:15,consts:[["optionTemplate",""],["pickedTemplate",""],[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[2,"float","right"],[3,"click"],[1,"fas","fa-upload"],[1,"fas","fa-file-plus"],[1,"dialog-body"],[1,"grid"],[1,"flex"],[1,"field","is-6"],[1,"label"],["placeholder","optional (defaults to today)","formControlName","date"],["type","number","min","0","max","8","formControlName","workTimeInHours","placeholder","required",1,"input"],["placeholder","required","formControlName","isPrePostAwardId",3,"dataSource"],["placeholder","required","formControlName","teamIds",3,"dataSource"],["placeholder","required","formControlName","adviserIds",3,"dataSource"],["placeholder","required","formControlName","supportProvidedIds",3,"dataSource","closeOnSelect"],[1,"field","is-12"],["placeholder","optional","formControlName","supportRequestedTeamId",3,"dataSource","enableClear"],["formControlName","description","placeholder","required",3,"height"],[2,"font-size","0.8em","text-align","right","margin-top","4px"],[1,"file-attachments"],[1,"tags"],["class","tag is-primary",4,"ngFor","ngForOf"],["class","tag is-success",4,"ngFor","ngForOf"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"],[1,"tag","is-primary"],[1,"link",2,"font-size","1.2em",3,"click"],[1,"fas","fa-times"],[1,"tag","is-success"]],template:function(n,i){if(1&n){const s=e.RV6();e.j41(0,"form",2)(1,"div",3),e.EFF(2," Add Project Support "),e.j41(3,"span",4)(4,"a",5),e.bIt("click",function(){return e.eBV(s),e.Njj(i.addUploadedFiles())}),e.nrm(5,"i",6),e.EFF(6," Upload Files"),e.k0s(),e.EFF(7," \xa0\xa0\xa0 "),e.j41(8,"a",5),e.bIt("click",function(){return e.eBV(s),e.Njj(i.addAttachedFiles())}),e.nrm(9,"i",7),e.EFF(10," Attach Existing Files"),e.k0s()()(),e.j41(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"label",12),e.EFF(16,"Date of support"),e.k0s(),e.nrm(17,"date-picker",13),e.k0s(),e.j41(18,"div",11)(19,"label",12),e.EFF(20,"Time in hours per adviser (0 - 8)"),e.k0s(),e.nrm(21,"input",14),e.k0s(),e.j41(22,"div",11)(23,"label",12),e.EFF(24,"Pre/Post Award"),e.k0s(),e.nrm(25,"dropdown-select",15),e.k0s(),e.j41(26,"div",11)(27,"label",12),e.EFF(28,"Teams (include all teams providing support)"),e.k0s(),e.j41(29,"dropdown-multi-select",16),e.DNE(30,Ve,1,1,"ng-template",null,0,e.C5r)(32,Xe,1,1,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(34,"div",11)(35,"label",12),e.EFF(36,"Advisers (include all advisers providing support)"),e.k0s(),e.j41(37,"dropdown-multi-select",17),e.DNE(38,Ye,1,1,"ng-template",null,0,e.C5r)(40,Le,1,1,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(42,"div",11)(43,"label",12),e.EFF(44,"Support provided (include all types of support provided)"),e.k0s(),e.nrm(45,"dropdown-multi-select",18),e.k0s(),e.j41(46,"div",19)(47,"label",12),e.EFF(48,"Request additional support from another team"),e.k0s(),e.j41(49,"dropdown-select",20),e.DNE(50,Be,1,1,"ng-template",null,0,e.C5r)(52,Oe,1,1,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(54,"div",19)(55,"label",12),e.EFF(56,"Description of support provided/requested"),e.k0s(),e.nrm(57,"html-editor",21),e.j41(58,"div",22),e.EFF(59),e.nI1(60,"number"),e.k0s()()(),e.j41(61,"div",23)(62,"div",24),e.DNE(63,He,4,1,"div",25)(64,We,4,1,"div",26),e.k0s()()()(),e.j41(65,"div",27)(66,"button",28),e.bIt("click",function(){return e.eBV(s),e.Njj(i.save())}),e.EFF(67,"Add"),e.k0s(),e.j41(68,"button",29),e.bIt("click",function(){return e.eBV(s),e.Njj(i.cancel())}),e.EFF(69,"Cancel"),e.k0s()()()}2&n&&(e.Y8G("formGroup",i.form),e.R7$(25),e.Y8G("dataSource",i.staticDataCache.isPrePostAward),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.supportTeam),e.R7$(8),e.Y8G("dataSource",i.userApi),e.R7$(8),e.Y8G("dataSource",i.staticDataCache.supportProvided)("closeOnSelect",!1),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.supportTeam)("enableClear",!0),e.R7$(8),e.Y8G("height",300),e.R7$(2),e.SpI("",e.i5U(60,12,i.form.getRawValue().description.length||0,"1.0-0")," / 20,000 characters of html"),e.R7$(4),e.Y8G("ngForOf",i.existingFiles),e.R7$(),e.Y8G("ngForOf",i.uploadedFiles))},dependencies:[u.Sq,r.qT,r.me,r.Q0,r.BC,r.cb,r.VZ,r.zX,r.j4,r.JD,k.p,E.C,b.I,z.S,u.QX],encapsulation:2})}}return o})();function Qe(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.name," ")}function Ze(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.name," ")}function Ke(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.fullName," ")}function et(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.fullName," ")}function tt(o,a){if(1&o&&(e.j41(0,"div",10)(1,"div",23)(2,"label",12),e.EFF(3,"Date of support"),e.k0s(),e.nrm(4,"date-picker",24),e.k0s(),e.j41(5,"div",23)(6,"label",12),e.EFF(7,"Time in hours per adviser (0 - 8)"),e.k0s(),e.nrm(8,"input",25),e.k0s(),e.j41(9,"div",23)(10,"label",12),e.EFF(11,"Pre/Post Award"),e.k0s(),e.nrm(12,"dropdown-select",26),e.k0s(),e.j41(13,"div",23)(14,"label",12),e.EFF(15,"Teams (include all teams providing support)"),e.k0s(),e.j41(16,"dropdown-multi-select",27),e.DNE(17,Qe,1,1,"ng-template",null,0,e.C5r)(19,Ze,1,1,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(21,"div",23)(22,"label",12),e.EFF(23,"Advisers (include all advisers providing support)"),e.k0s(),e.j41(24,"dropdown-multi-select",28),e.DNE(25,Ke,1,1,"ng-template",null,0,e.C5r)(27,et,1,1,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(29,"div",23)(30,"label",12),e.EFF(31,"Support provided (include all types of support provided)"),e.k0s(),e.nrm(32,"dropdown-multi-select",29),e.k0s()()),2&o){const t=e.XpG();e.R7$(12),e.Y8G("dataSource",t.staticDataCache.isPrePostAward),e.R7$(4),e.Y8G("dataSource",t.staticDataCache.supportTeam),e.R7$(8),e.Y8G("dataSource",t.userApi),e.R7$(8),e.Y8G("dataSource",t.staticDataCache.supportProvided)("closeOnSelect",!1)}}function ot(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.name," ")}function rt(o,a){1&o&&e.EFF(0),2&o&&e.SpI(" ",a.$implicit.name," ")}function it(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",30),e.EFF(1),e.j41(2,"a",31),e.bIt("click",function(i){const s=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.removeExistingFile(s,i))}),e.nrm(3,"i",32),e.k0s()()}if(2&o){const t=a.$implicit;e.R7$(),e.SpI(" ",t.fileName,"\xa0\xa0\xa0")}}function nt(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",33),e.EFF(1),e.j41(2,"a",31),e.bIt("click",function(i){const s=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.removeUploadedFile(s,i))}),e.nrm(3,"i",32),e.k0s()()}if(2&o){const t=a.$implicit;e.R7$(),e.SpI(" ",t.name,"\xa0\xa0\xa0")}}let Z=(()=>{class o extends m.u{open(t){return this._open(at,t,{width:"1000px",disableClose:!0})}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(o)))(i||o)}})()}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac})}}return o})(),at=(()=>{class o extends W.J{constructor(t,n,i){super(),this.formService=t,this.userApi=n,this.staticDataCache=i,this.form=new r.gE({id:new r.MJ("",{nonNullable:!0}),date:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),teamIds:new r.MJ([],{validators:[I.b.minArrayLength(1)],nonNullable:!0}),adviserIds:new r.MJ([],{validators:[I.b.minArrayLength(1)],nonNullable:!0}),supportProvidedIds:new r.MJ([],{nonNullable:!0}),description:new r.MJ("",{nonNullable:!0}),workTimeInHours:new r.MJ(null,{validators:[r.k0.required,r.k0.min(0),r.k0.max(8)],nonNullable:!0}),supportRequestedTeamId:new r.MJ(null),isPrePostAwardId:new r.MJ(v.cV.PreAward,{nonNullable:!0}),files:new r.MJ([],{nonNullable:!0})}),this.form.patchValue(this.data.projectSupport),this.existingFiles=this.data.projectSupport.files}save(){this.submitting||this.formService.hasErrors(this.form)||(this.submitting=!0,this.submitFiles())}cancel(){this._cancelDialog()}submitForm(){this.form.patchValue({files:this.existingFiles}),this.projectSupportApi.update(this.form.getRawValue(),{successGrowl:"Project Support Updated"}).subscribe(t=>{this.submitting=!1,this._closeDialog(t)},t=>{this.submitting=!1})}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(d.u),e.rXU(j.i),e.rXU(f.t))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["update-project-support-dialog"]],features:[e.Vt3],decls:38,vars:11,consts:[["optionTemplate",""],["pickedTemplate",""],[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[2,"float","right"],[3,"click"],[1,"fas","fa-upload"],[1,"fas","fa-file-plus"],[1,"dialog-body"],["class","flex",4,"ngIf"],[1,"flex"],[1,"field","is-12"],[1,"label"],["placeholder","optional","formControlName","supportRequestedTeamId",3,"dataSource","enableClear"],["formControlName","description","placeholder","required",3,"height"],[2,"font-size","0.8em","text-align","right","margin-top","4px"],[1,"file-attachments"],[1,"tags"],["class","tag is-primary",4,"ngFor","ngForOf"],["class","tag is-success",4,"ngFor","ngForOf"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"],[1,"field","is-6"],["placeholder","required","formControlName","date"],["type","number","min","0","max","8","formControlName","workTimeInHours","placeholder","required",1,"input"],["placeholder","required","formControlName","isPrePostAwardId",3,"dataSource"],["placeholder","required","formControlName","teamIds",3,"dataSource"],["placeholder","required","formControlName","adviserIds",3,"dataSource"],["placeholder","required","formControlName","supportProvidedIds",3,"dataSource","closeOnSelect"],[1,"tag","is-primary"],[1,"link",2,"font-size","1.2em",3,"click"],[1,"fas","fa-times"],[1,"tag","is-success"]],template:function(n,i){if(1&n){const s=e.RV6();e.j41(0,"form",2)(1,"div",3),e.EFF(2," Update Project Support "),e.j41(3,"span",4)(4,"a",5),e.bIt("click",function(){return e.eBV(s),e.Njj(i.addUploadedFiles())}),e.nrm(5,"i",6),e.EFF(6," Upload Files"),e.k0s(),e.EFF(7," \xa0\xa0\xa0 "),e.j41(8,"a",5),e.bIt("click",function(){return e.eBV(s),e.Njj(i.addAttachedFiles())}),e.nrm(9,"i",7),e.EFF(10," Attach Existing Files"),e.k0s()()(),e.j41(11,"div",8),e.DNE(12,tt,33,5,"div",9),e.j41(13,"div",10)(14,"div",11)(15,"label",12),e.EFF(16,"Request additional support from another team"),e.k0s(),e.j41(17,"dropdown-select",13),e.DNE(18,ot,1,1,"ng-template",null,0,e.C5r)(20,rt,1,1,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(22,"div",11)(23,"label",12),e.EFF(24,"Description of support provided/requested"),e.k0s(),e.nrm(25,"html-editor",14),e.j41(26,"div",15),e.EFF(27),e.nI1(28,"number"),e.k0s()()(),e.j41(29,"div",16)(30,"div",17),e.DNE(31,it,4,1,"div",18)(32,nt,4,1,"div",19),e.k0s()()(),e.j41(33,"div",20)(34,"button",21),e.bIt("click",function(){return e.eBV(s),e.Njj(i.save())}),e.EFF(35,"Save"),e.k0s(),e.j41(36,"button",22),e.bIt("click",function(){return e.eBV(s),e.Njj(i.cancel())}),e.EFF(37,"Cancel"),e.k0s()()()}2&n&&(e.Y8G("formGroup",i.form),e.R7$(12),e.Y8G("ngIf",!0!==i.data.requestTeamSupport),e.R7$(5),e.Y8G("dataSource",i.staticDataCache.supportTeam)("enableClear",!0),e.R7$(8),e.Y8G("height",300),e.R7$(2),e.SpI("",e.i5U(28,8,i.form.getRawValue().description.length||0,"1.0-0")," / 20,000 characters of html"),e.R7$(4),e.Y8G("ngForOf",i.existingFiles),e.R7$(),e.Y8G("ngForOf",i.uploadedFiles))},dependencies:[u.Sq,u.bT,r.qT,r.me,r.Q0,r.BC,r.cb,r.VZ,r.zX,r.j4,r.JD,k.p,E.C,b.I,z.S,u.QX],encapsulation:2})}}return o})();var w=l(8304);let K=(()=>{class o extends m.u{open(t){return this._open(st,t,{width:"1000px",disableClose:!0})}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(o)))(i||o)}})()}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac})}}return o})(),st=(()=>{class o extends m.V{constructor(t,n,i,s){super(),this.formService=t,this.projectSupportApi=n,this.userApi=i,this.staticDataCache=s,this.form=new r.gE({id:new r.MJ("",{nonNullable:!0}),supportRequestedCompletedDate:new r.MJ(null),supportRequestedCompletedNotes:new r.MJ("",{nonNullable:!0})}),this.form.patchValue(this.data.projectSupport)}save(){this.formService.hasErrors(this.form)||this.projectSupportApi.updateCompletion(this.form.getRawValue(),{successGrowl:"Project Support Updated"}).subscribe(t=>{this._closeDialog(t)})}cancel(){this._cancelDialog()}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(d.u),e.rXU(w.n),e.rXU(j.i),e.rXU(f.t))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["update-project-support-completion-dialog"]],features:[e.Vt3],decls:18,vars:1,consts:[[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[1,"dialog-body"],[1,"flex"],[1,"field","is-12"],[1,"label"],["formControlName","supportRequestedCompletedNotes","placeholder","required",1,"textarea",2,"height","200px"],[1,"field","is-6"],["placeholder","optional","formControlName","supportRequestedCompletedDate"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"form",0)(1,"div",1),e.EFF(2," Update Project Support "),e.k0s(),e.j41(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e.EFF(7,"Notes"),e.k0s(),e.nrm(8,"textarea",6),e.k0s(),e.j41(9,"div",7)(10,"label",5),e.EFF(11,"Date"),e.k0s(),e.nrm(12,"date-picker",8),e.k0s()()(),e.j41(13,"div",9)(14,"button",10),e.bIt("click",function(){return i.save()}),e.EFF(15,"Save"),e.k0s(),e.j41(16,"button",11),e.bIt("click",function(){return i.cancel()}),e.EFF(17,"Cancel"),e.k0s()()()),2&n&&e.Y8G("formGroup",i.form)},dependencies:[r.qT,r.me,r.BC,r.cb,r.j4,r.JD,b.I],encapsulation:2})}}return o})();function lt(o,a){1&o&&(e.j41(0,"td",10),e.nrm(1,"i",11),e.k0s())}function ct(o,a){1&o&&(e.j41(0,"td",12),e.nrm(1,"i",13),e.k0s())}function ut(o,a){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.DNE(3,lt,2,0,"td",8)(4,ct,2,0,"td",9),e.k0s()),2&o){const t=a.$implicit,n=e.XpG();e.R7$(2),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",!n.containsCategory(t)),e.R7$(),e.Y8G("ngIf",n.containsCategory(t))}}let ee=(()=>{class o extends m.u{open(t){return this._open(pt,t,{width:"1000px"})}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(o)))(i||o)}})()}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac})}}return o})(),pt=(()=>{class o extends m.V{constructor(t,n,i,s){super(),this.formService=t,this.projectSupportApi=n,this.userApi=i,this.staticDataCache=s,this.items=[],this.categories=[],this.items=this.data.items,this.staticDataCache.supportProvided.query({skip:0,take:100}).subscribe(c=>this.categories=c.items)}cancel(){this._cancelDialog()}containsCategory(t){return F.A.some(this.items||[],n=>F.A.some(n.supportProvidedIds,i=>i==t.id))}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(d.u),e.rXU(w.n),e.rXU(j.i),e.rXU(f.t))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["summarise-project-support-dialog"]],features:[e.Vt3],decls:15,vars:1,consts:[[1,"dialog"],[1,"dialog-head"],[1,"dialog-body"],[1,"project-support-summary","table"],["colspan","2"],[4,"ngFor","ngForOf"],[1,"dialog-buttons"],["type","button",3,"click"],["class","inactive",4,"ngIf"],["class","active",4,"ngIf"],[1,"inactive"],[1,"far","fa-fw","fa-times"],[1,"active"],[1,"fas","fa-fw","fa-check"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2," Summarise Project Support "),e.k0s(),e.j41(3,"div",2)(4,"div",3)(5,"table")(6,"thead")(7,"tr")(8,"th",4),e.EFF(9,"Support Provided"),e.k0s()()(),e.j41(10,"tbody"),e.DNE(11,ut,5,3,"tr",5),e.k0s()()()(),e.j41(12,"div",6)(13,"button",7),e.bIt("click",function(){return i.cancel()}),e.EFF(14,"Close"),e.k0s()()()),2&n&&(e.R7$(11),e.Y8G("ngForOf",i.categories))},dependencies:[u.Sq,u.bT],encapsulation:2})}}return o})(),te=(()=>{class o extends m.u{open(t){return this._open(dt,t,{width:"1000px"})}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(o)))(i||o)}})()}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac})}}return o})(),dt=(()=>{class o extends m.V{constructor(t,n,i,s){super(),this.formService=t,this.projectSupportApi=n,this.userApi=i,this.staticDataCache=s,this.form=new r.gE({id:new r.MJ("",{nonNullable:!0}),supportRequestedCompletedDate:new r.MJ(null),supportRequestedCompletedNotes:new r.MJ("",{nonNullable:!0})}),this.form.patchValue(this.data.projectSupport)}save(){this.formService.hasErrors(this.form)||this.projectSupportApi.complete(this.form.getRawValue(),{successGrowl:"Project Support Completed"}).subscribe(t=>{this._closeDialog(t)})}cancel(){this._cancelDialog()}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(d.u),e.rXU(w.n),e.rXU(j.i),e.rXU(f.t))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["complete-project-support-dialog"]],features:[e.Vt3],decls:20,vars:1,consts:[[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[1,"dialog-body"],[1,"flex"],[1,"field","is-12"],[1,"label"],["formControlName","supportRequestedCompletedNotes","placeholder","required",1,"textarea",2,"height","200px"],[1,"field","is-6"],["placeholder","optional (defaults to today)","formControlName","supportRequestedCompletedDate"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"form",0)(1,"div",1),e.EFF(2," Mark team support request as completed "),e.k0s(),e.j41(3,"div",2)(4,"p"),e.EFF(5,"Please ensure you have recorded all support provided by your team."),e.k0s(),e.j41(6,"div",3)(7,"div",4)(8,"label",5),e.EFF(9,"Notes"),e.k0s(),e.nrm(10,"textarea",6),e.k0s(),e.j41(11,"div",7)(12,"label",5),e.EFF(13,"Date"),e.k0s(),e.nrm(14,"date-picker",8),e.k0s()()(),e.j41(15,"div",9)(16,"button",10),e.bIt("click",function(){return i.save()}),e.EFF(17,"Save"),e.k0s(),e.j41(18,"button",11),e.bIt("click",function(){return i.cancel()}),e.EFF(19,"Cancel"),e.k0s()()()),2&n&&e.Y8G("formGroup",i.form)},dependencies:[r.qT,r.me,r.BC,r.cb,r.j4,r.JD,b.I],encapsulation:2})}}return o})();const mt=(o,a)=>a.id,ft=(o,a)=>({"is-warning":o,"is-success":a}),$=o=>({id:o});function ht(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",6)(1,"div",13)(2,"button",14),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.summariseProjectSupport())}),e.EFF(3,"View Summary"),e.k0s(),e.j41(4,"button",14),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addProjectSupport())}),e.EFF(5,"Add Support"),e.k0s()()()}}function jt(o,a){1&o&&(e.j41(0,"div")(1,"p"),e.EFF(2,"Loading..."),e.k0s()())}function bt(o,a){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",15)(2,"span",16),e.nrm(3,"toggle-input",17)(4,"toggle-input",18),e.k0s(),e.j41(5,"span",19),e.nrm(6,"toggle-input",20),e.k0s(),e.j41(7,"span",21)(8,"div",22),e.nrm(9,"input",23),e.j41(10,"div",24),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.clearFilename())}),e.nrm(11,"i",25),e.k0s()()()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.form),e.R7$(3),e.Y8G("formGroup",t.filterForm),e.R7$(2),e.Y8G("formGroup",t.clientFilterForm)}}function _t(o,a){1&o&&(e.j41(0,"div")(1,"div",26),e.EFF(2,"No items to display"),e.k0s()())}function vt(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"async"),e.k0s()),2&o){let t;const n=a.$implicit,i=e.XpG(3);e.R7$(),e.SpI("\xa0|\xa0",null==(t=e.bMT(2,1,i.staticDataCache.supportTeam.get(e.eq3(3,$,n))))?null:t.name,"")}}function Ft(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.Lme("",t.workTimeInHours," hour",1==t.workTimeInHours?"":"s"," |")}}function kt(o,a){1&o&&(e.j41(0,"span"),e.EFF(1,"\xa0|\xa0"),e.k0s())}function gt(o,a){if(1&o&&(e.j41(0,"span"),e.DNE(1,kt,2,0,"span",9),e.EFF(2),e.nI1(3,"async"),e.k0s()),2&o){const t=a.$implicit,n=a.index,i=e.XpG(3);e.R7$(),e.Y8G("ngIf",n>0),e.R7$(),e.JRh(e.bMT(3,2,i.userService.formatUser(t)))}}function St(o,a){if(1&o&&(e.j41(0,"span",37),e.EFF(1),e.nI1(2,"async"),e.k0s()),2&o){let t;const n=a.$implicit,i=e.XpG(3);e.R7$(),e.JRh(null==(t=e.bMT(2,1,i.staticDataCache.supportProvided.get(e.eq3(3,$,n))))?null:t.name)}}function Ct(o,a){if(1&o&&(e.j41(0,"div",38),e.nrm(1,"div",39),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.Y8G("innerHtml",t.description,e.npT)}}function It(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,s=e.XpG(2);return e.Njj(s.requestTeamSupport(i))}),e.EFF(1," request support from another team "),e.k0s()}}function Nt(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",40),e.DNE(1,It,2,0,"button",41),e.j41(2,"button",14),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.editProjectSupport(i))}),e.EFF(3,"edit"),e.k0s(),e.j41(4,"button",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.deleteProjectSupport(i))}),e.EFF(5,"delete"),e.k0s()()}if(2&o){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",null===t.supportRequestedTeamId)}}function Et(o,a){1&o&&(e.j41(0,"div",47),e.EFF(1,"open"),e.k0s())}function Rt(o,a){1&o&&(e.j41(0,"div",48),e.EFF(1,"complete"),e.k0s())}function Pt(o,a){if(1&o&&(e.j41(0,"b",46),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&o){const t=e.XpG(2).$implicit;e.R7$(),e.SpI("Completed ",e.i5U(2,1,t.supportRequestedCompletedDate,"dd-MMM-yy"),"")}}function wt(o,a){if(1&o&&(e.j41(0,"pre",38),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2).$implicit;e.R7$(),e.JRh(t.supportRequestedCompletedNotes)}}function Tt(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",51),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).$implicit,s=e.XpG(2);return e.Njj(s.resendNotification(i))}),e.EFF(1," resend notification to referred team "),e.k0s()}}function Dt(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).$implicit,s=e.XpG(2);return e.Njj(s.completeProjectSupport(i))}),e.EFF(1," mark as complete "),e.k0s()}}function yt(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).$implicit,s=e.XpG(2);return e.Njj(s.editProjectSupportCompletion(i))}),e.EFF(1," edit completion note "),e.k0s()}}function At(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3).$implicit,s=e.XpG(2);return e.Njj(s.uncompleteProjectSupport(i))}),e.EFF(1," delete completion note "),e.k0s()}}function Gt(o,a){if(1&o&&(e.j41(0,"div",40),e.DNE(1,Tt,2,0,"button",49)(2,Dt,2,0,"button",41)(3,yt,2,0,"button",41)(4,At,2,0,"button",50),e.k0s()),2&o){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngIf",null===t.supportRequestedCompletedAt),e.R7$(),e.Y8G("ngIf",null===t.supportRequestedCompletedAt),e.R7$(),e.Y8G("ngIf",null!==t.supportRequestedCompletedAt),e.R7$(),e.Y8G("ngIf",null!==t.supportRequestedTeamId&&null!==t.supportRequestedCompletedAt)}}function $t(o,a){if(1&o&&(e.j41(0,"div")(1,"div",43),e.DNE(2,Et,2,0,"div",44)(3,Rt,2,0,"div",45),e.j41(4,"b"),e.EFF(5),e.nI1(6,"async"),e.nI1(7,"date"),e.k0s(),e.DNE(8,Pt,3,4,"b",46),e.k0s(),e.DNE(9,wt,2,1,"pre",34)(10,Gt,5,4,"div",35),e.k0s()),2&o){let t;const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.Y8G("ngIf",null===n.supportRequestedCompletedAt),e.R7$(),e.Y8G("ngIf",null!==n.supportRequestedCompletedAt),e.R7$(2),e.Lme("Support requested from ",null==(t=e.bMT(6,7,i.staticDataCache.supportTeam.get(e.eq3(12,$,n.supportRequestedTeamId))))?null:t.name," at ",e.i5U(7,9,null==n?null:n.supportRequestedAt,"dd-MMM-yy"),"."),e.R7$(3),e.vxM(8,n.supportRequestedCompletedDate?8:-1),e.R7$(),e.Y8G("ngIf",n.supportRequestedCompletedNotes),e.R7$(),e.Y8G("ngIf",!i.locked)}}function Mt(o,a){if(1&o&&(e.j41(0,"a",54),e.nrm(1,"i",55),e.EFF(2),e.k0s()),2&o){const t=a.$implicit,n=e.XpG(4);e.FS9("href",n.sasRedirect(t),e.B4B),e.R7$(2),e.SpI("\xa0",(null==t?null:t.fileName)||"NULL"," ")}}function Ut(o,a){if(1&o&&(e.j41(0,"div",52),e.DNE(1,Mt,3,2,"a",53),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",t.files)}}function qt(o,a){if(1&o&&(e.j41(0,"div",28)(1,"div",29)(2,"span"),e.EFF(3),e.nI1(4,"date"),e.k0s(),e.DNE(5,vt,3,5,"span",30),e.j41(6,"span",31),e.DNE(7,Ft,2,2,"span",9),e.EFF(8),e.k0s()(),e.j41(9,"div",32),e.DNE(10,gt,4,4,"span",30),e.k0s(),e.j41(11,"div",32),e.DNE(12,St,3,5,"span",33),e.k0s(),e.DNE(13,Ct,2,1,"div",34)(14,Nt,6,1,"div",35)(15,$t,11,14,"div",9)(16,Ut,2,1,"div",36),e.k0s()),2&o){const t=a.$implicit,n=e.XpG(2);e.Y8G("ngClass",e.l_i(14,ft,n.isOpen(t),n.isComplete(t))),e.R7$(3),e.JRh(e.i5U(4,11,t.date,"dd-MMM-yy")),e.R7$(2),e.Y8G("ngForOf",t.teamIds),e.R7$(2),e.Y8G("ngIf",t.workTimeInHours),e.R7$(),e.SpI(" ",t.isPrePostAwardId==n.IsPrePostAwardEnum.PreAward?"Pre-Award":"Post-Award"," "),e.R7$(2),e.Y8G("ngForOf",t.adviserIds),e.R7$(2),e.Y8G("ngForOf",t.supportProvidedIds),e.R7$(),e.Y8G("ngIf",t.description),e.R7$(),e.Y8G("ngIf",!n.locked),e.R7$(),e.Y8G("ngIf",null!==t.supportRequestedTeamId),e.R7$(),e.Y8G("ngIf",t.files.length>0)}}function Jt(o,a){if(1&o&&(e.j41(0,"div",27),e.Z7z(1,qt,17,17,"div",28,mt),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Dyx(t.clientItems)}}let xt=(()=>{class o extends C{constructor(t,n,i,s,c,_,U,q,J){super(),this.formService=t,this.userService=n,this.confirmDeleteDialog=i,this.createProjectSupportDialog=s,this.updateProjectSupportDialog=c,this.updateProjectSupportCompletionDialog=_,this.summariseProjectSupportDialog=U,this.completeProjectSupportDialog=q,this.projectSupportApi=J,this.destroyRef=(0,e.WQX)(e.abz),this.filterForm=new r.gE({openTeamSupportOnly:new r.MJ(!1,{nonNullable:!0})}),this.clientFilterForm=new r.gE({filename:new r.MJ("",{nonNullable:!0})}),this.form=new r.gE({id:new r.MJ("",{nonNullable:!0}),mockInterviews:new r.MJ(!1,{nonNullable:!0}),grantsmanshipReview:new r.MJ(!1,{nonNullable:!0})}),this.IsPrePostAwardEnum=v.cV,this.serverItems=null,this.clientItems=null}ngOnInit(){super.ngOnInit(),this.loadProjectSupport(),this.projectSupportApi.changed.pipe((0,P.B)(200),(0,R.pQ)(this.destroyRef)).subscribe(()=>this.loadProjectSupport()),this.filterForm.valueChanges.pipe((0,P.B)(200),(0,R.pQ)(this.destroyRef)).subscribe(()=>this.loadProjectSupport()),this.clientFilterForm.valueChanges.pipe((0,P.B)(200),(0,R.pQ)(this.destroyRef)).subscribe(()=>this.filterClientItems()),this.form.valueChanges.pipe((0,P.B)(200),(0,R.pQ)(this.destroyRef)).subscribe(()=>{this.projectApi.updateSupportSettings(this.form.getRawValue(),{successGrowl:"Project Updated"}).subscribe(n=>{this.reset(n)})});var t=F.A.getLocalStorage("SupportFileSearch");t&&(this.clientFilterForm.patchValue({filename:t}),F.A.setLocalStorage("SupportFileSearch",null))}applyLock(){this.form.disable({emitEvent:!1})}clearLock(){this.form.enable({emitEvent:!1})}reset(t){super.reset(t),this.form.patchValue(t,{emitEvent:!1}),this.form.markAsPristine()}cancel(){this.reset(this.item),this.router.navigate(["project/project-list"])}isOpen(t){return null!==t.supportRequestedTeamId&&null===t.supportRequestedCompletedAt}isComplete(t){return null!==t.supportRequestedTeamId&&null!==t.supportRequestedCompletedAt}passesClientFilter(t){return!this.clientFilterForm.value.filename||t.files.some(n=>n.fileName.toLowerCase().includes(this.clientFilterForm.getRawValue().filename.toLowerCase()))}clearFilename(){this.clientFilterForm.patchValue({filename:""})}loadProjectSupport(){this.projectSupportApi.query({projectSupportGroupId:this.item.projectSupportGroupId,openTeamSupportOnly:this.filterForm.value.openTeamSupportOnly??!1,skip:0,take:100}).subscribe(t=>{this.serverItems=t.items,this.filterClientItems()})}filterClientItems(){this.clientItems=null===this.serverItems?null:this.serverItems.filter(t=>this.passesClientFilter(t))}addProjectSupport(){this.locked||this.createProjectSupportDialog.open({projectSupportGroupId:this.item.projectSupportGroupId})}editProjectSupport(t){this.locked||this.updateProjectSupportDialog.open({projectSupportGroupId:t.projectSupportGroupId,projectSupport:t})}editProjectSupportCompletion(t){this.locked||this.updateProjectSupportCompletionDialog.open({projectSupport:t}).subscribe(()=>{this.projectSupportApi.changed.next(null)})}deleteProjectSupport(t){this.locked||this.confirmDeleteDialog.open({title:"Project Support"}).subscribe(()=>{this.projectSupportApi.delete({id:t.id},{successGrowl:"Project Support Deleted"}).subscribe()})}summariseProjectSupport(){this.summariseProjectSupportDialog.open({items:this.clientItems})}completeProjectSupport(t){this.completeProjectSupportDialog.open({projectSupport:t}).subscribe(()=>{this.projectSupportApi.changed.next(null)})}requestTeamSupport(t){this.locked||this.updateProjectSupportDialog.open({projectSupportGroupId:t.projectSupportGroupId,projectSupport:t,requestTeamSupport:!0}).subscribe(()=>{this.projectSupportApi.changed.next(null)})}uncompleteProjectSupport(t){this.locked||this.confirmDialog.open({title:"Delete Completion Note",message:"Are you sure you want to mark this project support as incomplete?"}).subscribe(n=>{this.projectSupportApi.uncomplete({id:t.id},{successGrowl:"Project Support Marked as Incomplete"}).subscribe(()=>{this.projectSupportApi.changed.next(null)})})}resendNotification(t){this.locked||this.confirmDialog.open({title:"Resend Notification",message:"Are you sure you want to resend the notification email to the referred team?"}).subscribe(n=>{this.projectSupportApi.resendNotification({id:t.id},{successGrowl:"Notification email resent"}).subscribe(()=>{this.projectSupportApi.changed.next(null)})})}sasRedirect(t){return t?xe.c.apiHost+"api/file-storage-entry/sas-redirect/"+t.id:""}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(d.u),e.rXU(T.D),e.rXU(G.K),e.rXU(Q),e.rXU(Z),e.rXU(K),e.rXU(ee),e.rXU(te),e.rXU(w.n))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["project-support"]],features:[e.Vt3],decls:24,vars:8,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/project/project-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],["class","column",4,"ngIf"],[4,"ngIf"],["class","project-support-list",4,"ngIf"],[1,"floating-buttons"],[1,"button",3,"click"],[1,"header-buttons"],[1,"button","is-primary",3,"click"],[2,"padding","0.5rem 0 0.5rem 0","display","flex"],[2,"display","flex",3,"formGroup"],["label","Mock Interviews","formControlName","mockInterviews"],["label","Grantsmanship Review","formControlName","grantsmanshipReview"],[2,"margin-left","auto",3,"formGroup"],["label","Show open team support requests only","formControlName","openTeamSupportOnly"],[2,"margin-left","1rem",3,"formGroup"],[1,"control"],["type","text","placeholder","Search by file name","formControlName","filename",1,"input",2,"width","350px"],[1,"icon","is-secondary",3,"click"],[1,"fas","fa-times"],[1,"message","is-primary"],[1,"project-support-list"],[1,"card",3,"ngClass"],[1,"card-title",2,"font-weight","bold"],[4,"ngFor","ngForOf"],[2,"flex-grow","1","text-align","right"],[1,"card-title"],["class","tag",4,"ngFor","ngForOf"],["class","card-narrative",4,"ngIf"],["class","card-buttons",4,"ngIf"],["class","file-links",4,"ngIf"],[1,"tag"],[1,"card-narrative"],[1,"typeography-content",3,"innerHtml"],[1,"card-buttons"],["class","button is-primary",3,"click",4,"ngIf"],[1,"button","is-danger",3,"click"],[1,"card-title",2,"display","flex","align-items","center"],["class","tag is-warning",4,"ngIf"],["class","tag is-success",4,"ngIf"],[2,"margin-left","auto"],[1,"tag","is-warning"],[1,"tag","is-success"],["class","button is-warning",3,"click",4,"ngIf"],["class","button is-danger",3,"click",4,"ngIf"],[1,"button","is-warning",3,"click"],[1,"file-links"],["class","link is-primary","target","_blank",3,"href",4,"ngFor","ngForOf"],["target","_blank",1,"link","is-primary",3,"href"],[1,"fas","fa-link"]],template:function(n,i){1&n&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",2),e.EFF(6,"Projects"),e.k0s()(),e.j41(7,"li")(8,"a",3),e.EFF(9,"Project"),e.k0s()()(),e.j41(10,"div",4)(11,"div",5)(12,"div",6)(13,"h1",7),e.EFF(14),e.k0s()(),e.DNE(15,ht,6,0,"div",8),e.k0s(),e.nrm(16,"project-tabs"),e.DNE(17,jt,3,0,"div",9)(18,bt,12,3,"div",9)(19,_t,3,0,"div",9)(20,Jt,3,0,"div",10),e.j41(21,"div",11)(22,"button",12),e.bIt("click",function(){return i.cancel()}),e.EFF(23,"Close"),e.k0s()()()),2&n&&(e.R7$(8),e.Mz_("routerLink","/project/project-item/",i.item.id,""),e.R7$(6),e.SpI("Project ",i.item.prefixedNumber,""),e.R7$(),e.Y8G("ngIf",!i.locked),e.R7$(2),e.Y8G("ngIf",null===i.clientItems),e.R7$(),e.Y8G("ngIf",null!==i.clientItems),e.R7$(),e.Y8G("ngIf",null!==i.clientItems&&0==i.clientItems.length),e.R7$(),e.Y8G("ngIf",null!==i.clientItems&&i.clientItems.length>0))},dependencies:[u.YU,u.Sq,u.bT,r.me,r.BC,r.cb,r.j4,r.JD,p.Wk,H.A,g,u.Jj,u.vh],encapsulation:2})}}return o})();var M=l(5043);let oe=(()=>{class o extends m.u{open(t){return this._open(Vt,t,{width:"1000px"})}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(o)))(i||o)}})()}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac})}}return o})(),Vt=(()=>{class o extends m.V{constructor(t,n,i,s){super(),this.formService=t,this.projectSubmissionApi=n,this.userApi=i,this.staticDataCache=s,this.form=new r.gE({projectId:new r.MJ("",{nonNullable:!0}),fundingStreamId:new r.MJ(null,{validators:[r.k0.required]}),submissionDate:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),nihrReference:new r.MJ("",{nonNullable:!0}),submissionStatusId:new r.MJ(null,{validators:[r.k0.required]}),submissionStageId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),submissionOutcomeId:new r.MJ(null),fundingAmountOnSubmission:new r.MJ(null,{validators:[r.k0.min(0),r.k0.max(999999999)],nonNullable:!0}),outcomeExpectedDate:new r.MJ(null)}),this.form.patchValue({projectId:this.data.projectId,fundingStreamId:this.data.fundingStreamId})}save(){this.formService.hasErrors(this.form)||this.projectSubmissionApi.create(this.form.getRawValue(),{successGrowl:"Project Submission Added"}).subscribe(t=>{this._closeDialog(t)})}cancel(){this._cancelDialog()}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(d.u),e.rXU(M.U),e.rXU(j.i),e.rXU(f.t))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["create-project-submission-dialog"]],features:[e.Vt3],decls:42,vars:5,consts:[[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[1,"dialog-body"],[1,"grid","has-columns-2"],[1,"field"],[1,"label"],["placeholder","required","formControlName","fundingStreamId",3,"dataSource"],["placeholder","required","formControlName","submissionDate"],["type","text","placeholder","optional","formControlName","nihrReference",1,"input"],["placeholder","required","formControlName","submissionStatusId",3,"dataSource"],["placeholder","required","formControlName","submissionStageId",3,"dataSource"],["placeholder","optional","formControlName","outcomeExpectedDate"],["placeholder","optional","formControlName","submissionOutcomeId",3,"dataSource"],["placeholder","optional","formControlName","fundingAmountOnSubmission"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"form",0)(1,"div",1),e.EFF(2," Add Project Submission "),e.k0s(),e.j41(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e.EFF(7,"Funding stream"),e.k0s(),e.nrm(8,"dropdown-select",6),e.k0s(),e.j41(9,"div",4)(10,"label",5),e.EFF(11,"Submission date"),e.k0s(),e.nrm(12,"date-picker",7),e.k0s(),e.j41(13,"div",4)(14,"label",5),e.EFF(15,"NIHR reference"),e.k0s(),e.nrm(16,"input",8),e.k0s(),e.j41(17,"div",4)(18,"label",5),e.EFF(19,"Project submitted?"),e.k0s(),e.nrm(20,"dropdown-select",9),e.k0s(),e.j41(21,"div",4)(22,"label",5),e.EFF(23,"Submission stage"),e.k0s(),e.nrm(24,"dropdown-select",10),e.k0s(),e.j41(25,"div",4)(26,"label",5),e.EFF(27,"Outcome expected date"),e.k0s(),e.nrm(28,"date-picker",11),e.k0s(),e.j41(29,"div",4)(30,"label",5),e.EFF(31,"Submission outcome"),e.k0s(),e.nrm(32,"dropdown-select",12),e.k0s(),e.j41(33,"div",4)(34,"label",5),e.EFF(35,"Funding amount on submission"),e.k0s(),e.nrm(36,"number-input",13),e.k0s()()(),e.j41(37,"div",14)(38,"button",15),e.bIt("click",function(){return i.save()}),e.EFF(39,"Add"),e.k0s(),e.j41(40,"button",16),e.bIt("click",function(){return i.cancel()}),e.EFF(41,"Cancel"),e.k0s()()()),2&n&&(e.Y8G("formGroup",i.form),e.R7$(8),e.Y8G("dataSource",i.staticDataCache.fundingStream),e.R7$(12),e.Y8G("dataSource",i.staticDataCache.submissionStatus),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.submissionStage),e.R7$(8),e.Y8G("dataSource",i.staticDataCache.submissionOutcome))},dependencies:[r.qT,r.me,r.BC,r.cb,r.j4,r.JD,A,k.p,b.I],encapsulation:2})}}return o})(),re=(()=>{class o extends m.u{open(t){return this._open(Xt,t,{width:"1000px"})}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(o)))(i||o)}})()}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac})}}return o})(),Xt=(()=>{class o extends m.V{constructor(t,n,i,s){super(),this.formService=t,this.projectSubmissionApi=n,this.userApi=i,this.staticDataCache=s,this.form=new r.gE({id:new r.MJ("",{nonNullable:!0}),fundingStreamId:new r.MJ(null,{validators:[r.k0.required]}),submissionDate:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),nihrReference:new r.MJ("",{nonNullable:!0}),submissionStatusId:new r.MJ(null,{validators:[r.k0.required]}),submissionStageId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),submissionOutcomeId:new r.MJ(null),fundingAmountOnSubmission:new r.MJ(null,{validators:[r.k0.min(0),r.k0.max(999999999)],nonNullable:!0}),outcomeExpectedDate:new r.MJ(null)}),this.form.patchValue(this.data.projectSubmission)}save(){this.formService.hasErrors(this.form)||this.projectSubmissionApi.update(this.form.getRawValue(),{successGrowl:"Project Submission Updated"}).subscribe(t=>{this._closeDialog(t)})}cancel(){this._cancelDialog()}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(d.u),e.rXU(M.U),e.rXU(j.i),e.rXU(f.t))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["update-project-submission-dialog"]],features:[e.Vt3],decls:42,vars:5,consts:[[1,"form","dialog",3,"formGroup"],[1,"dialog-head"],[1,"dialog-body"],[1,"grid","has-columns-2"],[1,"field"],[1,"label"],["placeholder","required","formControlName","fundingStreamId",3,"dataSource"],["placeholder","required","formControlName","submissionDate"],["type","text","placeholder","optional","formControlName","nihrReference",1,"input"],["placeholder","required","formControlName","submissionStatusId",3,"dataSource"],["placeholder","required","formControlName","submissionStageId",3,"dataSource"],["placeholder","optional","formControlName","outcomeExpectedDate"],["placeholder","optional","formControlName","submissionOutcomeId",3,"dataSource"],["placeholder","optional","formControlName","fundingAmountOnSubmission"],[1,"dialog-buttons"],["type","submit",1,"is-success",3,"click"],["type","button",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"form",0)(1,"div",1),e.EFF(2," Update Project Submission "),e.k0s(),e.j41(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e.EFF(7,"Funding stream"),e.k0s(),e.nrm(8,"dropdown-select",6),e.k0s(),e.j41(9,"div",4)(10,"label",5),e.EFF(11,"Submission date"),e.k0s(),e.nrm(12,"date-picker",7),e.k0s(),e.j41(13,"div",4)(14,"label",5),e.EFF(15,"NIHR reference"),e.k0s(),e.nrm(16,"input",8),e.k0s(),e.j41(17,"div",4)(18,"label",5),e.EFF(19,"Project submitted?"),e.k0s(),e.nrm(20,"dropdown-select",9),e.k0s(),e.j41(21,"div",4)(22,"label",5),e.EFF(23,"Submission stage"),e.k0s(),e.nrm(24,"dropdown-select",10),e.k0s(),e.j41(25,"div",4)(26,"label",5),e.EFF(27,"Outcome expected date"),e.k0s(),e.nrm(28,"date-picker",11),e.k0s(),e.j41(29,"div",4)(30,"label",5),e.EFF(31,"Submission outcome"),e.k0s(),e.nrm(32,"dropdown-select",12),e.k0s(),e.j41(33,"div",4)(34,"label",5),e.EFF(35,"Funding amount on submission"),e.k0s(),e.nrm(36,"number-input",13),e.k0s()()(),e.j41(37,"div",14)(38,"button",15),e.bIt("click",function(){return i.save()}),e.EFF(39,"Save"),e.k0s(),e.j41(40,"button",16),e.bIt("click",function(){return i.cancel()}),e.EFF(41,"Cancel"),e.k0s()()()),2&n&&(e.Y8G("formGroup",i.form),e.R7$(8),e.Y8G("dataSource",i.staticDataCache.fundingStream),e.R7$(12),e.Y8G("dataSource",i.staticDataCache.submissionStatus),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.submissionStage),e.R7$(8),e.Y8G("dataSource",i.staticDataCache.submissionOutcome))},dependencies:[r.qT,r.me,r.BC,r.cb,r.j4,r.JD,A,k.p,b.I],encapsulation:2})}}return o})();var Yt=l(8009);function Lt(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",6)(1,"div",21)(2,"button",22),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.add())}),e.EFF(3,"Add Submission"),e.k0s()()()}}let Bt=(()=>{class o extends C{constructor(t,n,i,s,c){super(),this.formService=t,this.createProjectSubmissionDialog=n,this.updateProjectSubmissionDialog=i,this.confirmDeleteDialog=s,this.projectSubmissionApi=c,this.form=new r.gE({})}cancel(){this.reset(this.item),this.router.navigate(["project/project-list"])}filter(t){t.projectId=this.item.id}add(){this.locked||this.createProjectSubmissionDialog.open({projectId:this.item.id,fundingStreamId:this.item.proposedFundingStreamId})}edit(t){this.locked||this.updateProjectSubmissionDialog.open({projectSubmission:t})}delete(t){this.locked||this.confirmDeleteDialog.open({title:"Project Submission"}).subscribe(n=>{this.projectSubmissionApi.delete({id:t.id},{successGrowl:"Project Submission Deleted"}).subscribe()})}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(d.u),e.rXU(oe),e.rXU(re),e.rXU(G.K),e.rXU(M.U))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["project-submission"]],features:[e.Vt3],decls:30,vars:12,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/project/project-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],["class","column",4,"ngIf"],[3,"filter","dataSource"],["name","fundingStreamId",3,"dataSource"],["name","submissionDate"],["name","nihrReference","label","NIHR Reference"],["name","submissionStatusId","label","Sumitted",3,"dataSource"],["name","submissionStageId","label","Stage",3,"dataSource"],["name","fundingAmountOnSubmission","label","Funding Amount","prefix","\xa3"],["name","outcomeExpectedDate"],["name","submissionOutcomeId","label","Outcome",3,"dataSource"],[3,"edit","delete","canAdd","canEdit","canDelete"],[1,"floating-buttons"],[1,"button",3,"click"],[1,"header-buttons"],[1,"button","is-primary",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",2),e.EFF(6,"Projects"),e.k0s()(),e.j41(7,"li")(8,"a",3),e.EFF(9,"Project"),e.k0s()()(),e.j41(10,"div",4)(11,"div",5)(12,"div",6)(13,"h1",7),e.EFF(14),e.k0s()(),e.DNE(15,Lt,4,0,"div",8),e.k0s(),e.nrm(16,"project-tabs"),e.j41(17,"grid",9),e.bIt("filter",function(c){return i.filter(c)}),e.nrm(18,"grid-reference-column",10)(19,"grid-date-column",11)(20,"grid-column",12)(21,"grid-reference-column",13)(22,"grid-reference-column",14)(23,"grid-number-column",15)(24,"grid-date-column",16)(25,"grid-reference-column",17),e.j41(26,"grid-action-column",18),e.bIt("edit",function(c){return i.edit(c)})("delete",function(c){return i.delete(c)}),e.k0s()(),e.j41(27,"div",19)(28,"button",20),e.bIt("click",function(){return i.cancel()}),e.EFF(29,"Close"),e.k0s()()()),2&n&&(e.R7$(8),e.Mz_("routerLink","/project/project-item/",i.item.id,""),e.R7$(6),e.SpI("Project ",i.item.prefixedNumber,""),e.R7$(),e.Y8G("ngIf",!i.locked),e.R7$(2),e.Y8G("dataSource",i.projectSubmissionApi),e.R7$(),e.Y8G("dataSource",i.staticDataCache.fundingStream),e.R7$(3),e.Y8G("dataSource",i.staticDataCache.submissionStatus),e.R7$(),e.Y8G("dataSource",i.staticDataCache.submissionStage),e.R7$(3),e.Y8G("dataSource",i.staticDataCache.submissionOutcome),e.R7$(),e.Y8G("canAdd",!1)("canEdit",!i.locked)("canDelete",!i.locked))},dependencies:[u.bT,p.Wk,D._,y.C,X.y,Y.u,Yt.R,L.h,g],encapsulation:2})}}return o})();var Ot=l(6628);let Ht=(()=>{class o extends C{constructor(t,n){super(),this.formService=t,this.confirmDeleteDialog=n,this.destroyRef=(0,e.WQX)(e.abz),this.form=new r.gE({})}cancel(){this.reset(this.item),this.router.navigate(["project/project-list"])}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(d.u),e.rXU(G.K))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["project-files"]],features:[e.Vt3],decls:17,vars:6,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/project/project-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[3,"fileStorageGroupId","projectId","locked"]],template:function(n,i){1&n&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",2),e.EFF(6,"Projects"),e.k0s()(),e.j41(7,"li")(8,"a",3),e.EFF(9,"Project"),e.k0s()()(),e.j41(10,"div",4)(11,"div",5)(12,"div",6)(13,"h1",7),e.EFF(14),e.k0s()()(),e.nrm(15,"project-tabs")(16,"file-browser",8),e.k0s()),2&n&&(e.R7$(8),e.Mz_("routerLink","/project/project-item/",i.item.id,""),e.R7$(6),e.SpI("Project ",i.item.prefixedNumber,""),e.R7$(2),e.Y8G("fileStorageGroupId",i.item.fileStorageGroupId)("projectId",i.item.id)("locked",i.locked))},dependencies:[p.Wk,Ot.w,g],encapsulation:2})}}return o})();var Wt=l(4696),zt=l(1321);function Qt(o,a){if(1&o&&(e.EFF(0),e.nI1(1,"async")),2&o){const t=a.$implicit,n=e.XpG();e.SpI(" ",e.bMT(1,1,n.userService.formatUser(t.createdByUserId))," ")}}function Zt(o,a){if(1&o&&(e.j41(0,"pre",15),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.R7$(),e.JRh(t.message)}}let Kt=(()=>{class o{constructor(t,n,i,s,c,_){this.route=t,this.router=n,this.formService=i,this.projectChangeLogApi=s,this.staticDataCache=c,this.userService=_,this.destroyRef=(0,e.WQX)(e.abz),this.form=new r.gE({})}ngOnInit(){this.reset(this.route.snapshot.data.project)}reset(t){this.item=t}filter(t){t.projectId=this.item.id}cancel(){this.reset(this.item),this.router.navigate(["project/project-list"])}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(p.nX),e.rXU(p.Ix),e.rXU(d.u),e.rXU(Wt.G),e.rXU(f.t),e.rXU(T.D))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["project-history"]],decls:27,vars:4,consts:[["itemTemplate",""],[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/project/project-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[3,"filter","dataSource"],["name","createdAt"],["name","createdBy"],["name","message"],[1,"floating-buttons"],[1,"button",3,"click"],[1,"grid-pre"]],template:function(n,i){if(1&n){const s=e.RV6();e.j41(0,"ul",1)(1,"li")(2,"a",2),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",3),e.EFF(6,"Projects"),e.k0s()(),e.j41(7,"li")(8,"a",4),e.EFF(9,"Project"),e.k0s()()(),e.j41(10,"div",5)(11,"div",6)(12,"div",7)(13,"h1",8),e.EFF(14),e.k0s()()(),e.nrm(15,"project-tabs"),e.j41(16,"grid",9),e.bIt("filter",function(_){return e.eBV(s),e.Njj(i.filter(_))}),e.nrm(17,"grid-datetime-column",10),e.j41(18,"grid-column",11),e.DNE(19,Qt,2,3,"ng-template",null,0,e.C5r),e.k0s(),e.j41(21,"grid-column",12),e.DNE(22,Zt,2,1,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(24,"div",13)(25,"button",14),e.bIt("click",function(){return e.eBV(s),e.Njj(i.cancel())}),e.EFF(26,"Close"),e.k0s()()()}2&n&&(e.R7$(8),e.Mz_("routerLink","/project/project-item/",i.item.id,""),e.R7$(6),e.SpI("Project ",i.item.prefixedNumber,""),e.R7$(2),e.Y8G("dataSource",i.projectChangeLogApi))},dependencies:[p.Wk,D._,y.C,zt.F,g,u.Jj],encapsulation:2})}}return o})();var eo=l(5701);function to(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",49)(1,"button",50),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save(!1))}),e.EFF(2,"Save"),e.k0s(),e.j41(3,"button",50),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save(!0))}),e.EFF(4,"Save & Close"),e.k0s(),e.j41(5,"button",51),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancel())}),e.EFF(6,"Cancel"),e.k0s()()}}function oo(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",53),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.unlock())}),e.EFF(1,"Unlock"),e.k0s()}}function ro(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",49),e.DNE(1,oo,2,0,"button",52),e.j41(2,"button",51),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancel())}),e.EFF(3,"Close"),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.canUnlock())}}let io=(()=>{class o extends C{constructor(t,n){super(),this.formService=t,this.configurationService=n,this.form=new r.gE({id:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),teamContactTitle:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),teamContactFirstName:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),teamContactLastName:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),teamContactEmail:new r.MJ("",{validators:[r.k0.required,r.k0.email],nonNullable:!0}),teamContactAltEmail:new r.MJ("",{validators:[r.k0.email],nonNullable:!0}),teamContactRoleId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),teamContactRoleFreeText:new r.MJ("",{nonNullable:!0}),teamContactMailingPermission:new r.MJ(!1,{validators:[r.k0.requiredTrue],nonNullable:!0}),teamContactPrivacyStatementRead:new r.MJ(!1,{validators:[r.k0.requiredTrue],nonNullable:!0}),teamContactServiceAgreementRead:new r.MJ(!1,{validators:[r.k0.requiredTrue],nonNullable:!0}),leadApplicantTitle:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),leadApplicantFirstName:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),leadApplicantLastName:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),leadApplicantEmail:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),leadApplicantJobRole:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),leadApplicantCareerStage:new r.MJ("",{nonNullable:!0}),leadApplicantCareerStageId:new r.MJ(null,{}),leadApplicantOrganisationTypeId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),leadApplicantOrganisation:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),leadApplicantDepartment:new r.MJ("",{nonNullable:!0}),leadApplicantLocationId:new r.MJ(null,{}),leadApplicantAddressLine1:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),leadApplicantAddressLine2:new r.MJ("",{nonNullable:!0}),leadApplicantAddressTown:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),leadApplicantAddressCounty:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),leadApplicantAddressCountry:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),leadApplicantAddressPostcode:new r.MJ("",{validators:[r.k0.required],nonNullable:!0}),leadApplicantORCID:new r.MJ("",{nonNullable:!0}),isLeadApplicantNHSId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),leadApplicantAgeRangeId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),leadApplicantGenderId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0}),leadApplicantEthnicityId:new r.MJ(null,{validators:[r.k0.required],nonNullable:!0})})}ngOnInit(){super.ngOnInit()}canUnlock(){return this.configurationService.hasClaim(t=>t.claims.canUnlockProjects)}reset(t){super.reset(t),this.form.patchValue(t),this.form.markAsPristine()}applyLock(){this.form.disable()}clearLock(){this.form.enable()}save(t){this.formService.hasErrors(this.form)||this.projectApi.updateResearcher(this.form.getRawValue(),{successGrowl:"Project Updated"}).subscribe(n=>{this.reset(n),t&&this.router.navigate(["project/project-list"])})}cancel(){this.reset(this.item),this.router.navigate(["project/project-list"])}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(d.u),e.rXU(N.s))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["project-researcher"]],features:[e.Vt3],decls:164,vars:21,consts:[[1,"breadcrumbs"],["routerLink","/home"],["routerLink","/project/project-list"],[3,"routerLink"],[1,"container"],[1,"columns"],[1,"column"],[1,"title"],[1,"form",3,"formGroup"],[1,"flex"],[1,"field","is-4"],[1,"label"],["placeholder","required","formControlName","teamContactTitle",3,"dataSource"],["type","text","placeholder","required","formControlName","teamContactFirstName",1,"input"],["type","text","placeholder","required","formControlName","teamContactLastName",1,"input"],["type","text","placeholder","required","formControlName","teamContactEmail",1,"input"],["type","text","placeholder","optional","formControlName","teamContactAltEmail","maxlength","64",1,"input"],["placeholder","required","formControlName","teamContactRoleId",3,"dataSource","freeTextControl"],[1,"field","is-12"],[1,"checkbox"],["type","checkbox","formControlName","teamContactMailingPermission"],["type","checkbox","formControlName","teamContactPrivacyStatementRead"],["type","checkbox","formControlName","teamContactServiceAgreementRead"],["target","_blank","href","https://www.imperial.ac.uk/nihr-research-support-service/service-agreement/",1,"link","is-primary"],[1,"fas","fa-external-link"],["placeholder","required","formControlName","leadApplicantTitle",3,"dataSource"],["type","text","placeholder","required","formControlName","leadApplicantFirstName",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantLastName",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantEmail","maxlength","64",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantJobRole",1,"input"],["placeholder","required","formControlName","leadApplicantCareerStageId",3,"dataSource"],["placeholder","required","formControlName","leadApplicantOrganisationTypeId",3,"dataSource"],["type","text","placeholder","required","formControlName","leadApplicantOrganisation",1,"input"],["type","text","placeholder","optional","formControlName","leadApplicantDepartment",1,"input"],["type","text","placeholder","optional","formControlName","leadApplicantORCID",1,"input"],["placeholder","required","formControlName","leadApplicantLocationId",3,"dataSource"],[1,"field","is-8"],["placeholder","required","formControlName","isLeadApplicantNHSId",3,"dataSource"],[1,"is-6"],["type","text","placeholder","required","formControlName","leadApplicantAddressLine1",1,"input"],["type","text","placeholder","optional","formControlName","leadApplicantAddressLine2",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantAddressTown",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantAddressCounty",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantAddressCountry",1,"input"],["type","text","placeholder","required","formControlName","leadApplicantAddressPostcode",1,"input"],["placeholder","required","formControlName","leadApplicantAgeRangeId",3,"dataSource"],["placeholder","required","formControlName","leadApplicantGenderId",3,"dataSource"],["placeholder","required","formControlName","leadApplicantEthnicityId",3,"dataSource"],["class","floating-buttons",4,"ngIf"],[1,"floating-buttons"],[1,"button","is-success",3,"click"],[1,"button",3,"click"],["class","button is-warning",3,"click",4,"ngIf"],[1,"button","is-warning",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.EFF(3,"Home"),e.k0s()(),e.j41(4,"li")(5,"a",2),e.EFF(6,"Projects"),e.k0s()(),e.j41(7,"li")(8,"a",3),e.EFF(9,"Project"),e.k0s()()(),e.j41(10,"div",4)(11,"div",5)(12,"div",6)(13,"h1",7),e.EFF(14),e.k0s()()(),e.nrm(15,"project-tabs"),e.j41(16,"form",8)(17,"h2"),e.EFF(18,"Contact Details"),e.k0s(),e.j41(19,"div",9)(20,"div",10)(21,"label",11),e.EFF(22,"Title"),e.k0s(),e.nrm(23,"dropdown-text-input",12),e.k0s(),e.j41(24,"div",10)(25,"label",11),e.EFF(26,"First name"),e.k0s(),e.nrm(27,"input",13),e.k0s(),e.j41(28,"div",10)(29,"label",11),e.EFF(30,"Last name"),e.k0s(),e.nrm(31,"input",14),e.k0s(),e.j41(32,"div",10)(33,"label",11),e.EFF(34,"Email"),e.k0s(),e.nrm(35,"input",15),e.k0s(),e.j41(36,"div",10)(37,"label",11),e.EFF(38,"Alternative Email"),e.k0s(),e.nrm(39,"input",16),e.k0s(),e.j41(40,"div",10)(41,"label",11),e.EFF(42,"Role in application"),e.k0s(),e.nrm(43,"dropdown-select",17),e.k0s(),e.j41(44,"div",18)(45,"div",19)(46,"label"),e.nrm(47,"input",20),e.EFF(48," Please tick this checkbox to confirm you give us permission to contact you via email."),e.k0s()()(),e.j41(49,"div",18)(50,"div",19)(51,"label"),e.nrm(52,"input",21),e.EFF(53," Please tick this checkbox to confirm you have read our privacy statement."),e.k0s()()(),e.j41(54,"div",18)(55,"div",19)(56,"label"),e.nrm(57,"input",22),e.EFF(58," Please tick this checkbox to confirm you have read our "),e.j41(59,"a",23),e.EFF(60,"service agreement "),e.nrm(61,"i",24),e.k0s(),e.EFF(62,"."),e.k0s()()()(),e.j41(63,"h2"),e.EFF(64,"Chief Investigator Details"),e.k0s(),e.j41(65,"div",9)(66,"div",10)(67,"label",11),e.EFF(68,"Title"),e.k0s(),e.nrm(69,"dropdown-text-input",25),e.k0s(),e.j41(70,"div",10)(71,"label",11),e.EFF(72,"First name"),e.k0s(),e.nrm(73,"input",26),e.k0s(),e.j41(74,"div",10)(75,"label",11),e.EFF(76,"Last name"),e.k0s(),e.nrm(77,"input",27),e.k0s(),e.j41(78,"div",10)(79,"label",11),e.EFF(80,"Email"),e.k0s(),e.nrm(81,"input",28),e.k0s(),e.j41(82,"div",10)(83,"label",11),e.EFF(84,"Job Role"),e.k0s(),e.nrm(85,"input",29),e.k0s(),e.j41(86,"div",10)(87,"label",11),e.EFF(88,"Career Stage"),e.k0s(),e.nrm(89,"dropdown-select",30),e.k0s(),e.j41(90,"div",10)(91,"label",11),e.EFF(92,"Organisation Type"),e.k0s(),e.nrm(93,"dropdown-select",31),e.k0s(),e.j41(94,"div",10)(95,"label",11),e.EFF(96,"Organisation"),e.k0s(),e.nrm(97,"input",32),e.k0s(),e.j41(98,"div",10)(99,"label",11),e.EFF(100,"Department"),e.k0s(),e.nrm(101,"input",33),e.k0s(),e.j41(102,"div",10)(103,"label",11),e.EFF(104,"ORCID"),e.k0s(),e.nrm(105,"input",34),e.k0s(),e.j41(106,"div",10)(107,"label",11),e.EFF(108,"Where are they located?"),e.k0s(),e.nrm(109,"dropdown-select",35),e.k0s(),e.j41(110,"div",36)(111,"label",11),e.EFF(112," Is the chief investigator an NHS employee seeking RSS support for the first time?\xa0 "),e.k0s(),e.nrm(113,"dropdown-select",37),e.k0s()(),e.j41(114,"div",9)(115,"div",38)(116,"h3"),e.EFF(117,"Work Address"),e.k0s(),e.j41(118,"div",9)(119,"div",18)(120,"label",11),e.EFF(121,"Line 1"),e.k0s(),e.nrm(122,"input",39),e.k0s(),e.j41(123,"div",18)(124,"label",11),e.EFF(125,"Line 2"),e.k0s(),e.nrm(126,"input",40),e.k0s(),e.j41(127,"div",18)(128,"label",11),e.EFF(129,"Town/City"),e.k0s(),e.nrm(130,"input",41),e.k0s(),e.j41(131,"div",18)(132,"label",11),e.EFF(133,"County"),e.k0s(),e.nrm(134,"input",42),e.k0s(),e.j41(135,"div",18)(136,"label",11),e.EFF(137,"Country"),e.k0s(),e.nrm(138,"input",43),e.k0s(),e.j41(139,"div",18)(140,"label",11),e.EFF(141,"Postcode"),e.k0s(),e.nrm(142,"input",44),e.k0s()()(),e.j41(143,"div",38)(144,"h3"),e.EFF(145,"Enthnicity, Diversity & Inclusion"),e.k0s(),e.j41(146,"div",9)(147,"div",18)(148,"label",11),e.EFF(149,"Age Range"),e.k0s(),e.nrm(150,"dropdown-select",45),e.k0s(),e.j41(151,"div",18)(152,"label",11),e.EFF(153,"Gender"),e.k0s(),e.nrm(154,"dropdown-select",46),e.k0s(),e.j41(155,"div",18)(156,"label",11),e.EFF(157,"Ethnicity"),e.k0s(),e.nrm(158,"dropdown-select",47),e.k0s()()()(),e.DNE(159,to,7,0,"div",48)(160,ro,4,1,"div",48),e.k0s(),e.j41(161,"p"),e.EFF(162),e.nI1(163,"date"),e.k0s()()),2&n&&(e.R7$(8),e.Mz_("routerLink","/project/project-item/",i.item.id,""),e.R7$(6),e.SpI("Project ",i.item.prefixedNumber,""),e.R7$(2),e.Y8G("formGroup",i.form),e.R7$(7),e.Y8G("dataSource",i.staticDataCache.title),e.R7$(20),e.Y8G("dataSource",i.staticDataCache.researcherRole)("freeTextControl",i.form.controls.teamContactRoleFreeText),e.R7$(26),e.Y8G("dataSource",i.staticDataCache.title),e.R7$(20),e.Y8G("dataSource",i.staticDataCache.researcherCareerStage),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.researcherOrganisationType),e.R7$(16),e.Y8G("dataSource",i.staticDataCache.researcherLocation),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.isLeadApplicantNHS),e.R7$(37),e.Y8G("dataSource",i.staticDataCache.ageRange),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.gender),e.R7$(4),e.Y8G("dataSource",i.staticDataCache.ethnicity),e.R7$(),e.Y8G("ngIf",!i.locked),e.R7$(),e.Y8G("ngIf",i.locked),e.R7$(2),e.SpI("Created ",e.i5U(163,18,i.item.createdAt,"dd MMM yy HH:mm"),""))},dependencies:[u.bT,r.qT,r.me,r.Zm,r.BC,r.cb,r.tU,r.j4,r.JD,p.Wk,k.p,eo.A,g,u.vh],encapsulation:2})}}return o})();const no=[{path:"project-list",component:ke,data:{activeSideMenu:"Projects"}},{path:"project-item/:id",component:Ge,resolve:{project:h.A.projectResolver("id")},canDeactivate:[S.S.isPristine()],data:{activeSideMenu:"Projects"}},{path:"project-request/:id",component:Je,resolve:{project:h.A.projectResolver("id")},canDeactivate:[S.S.isPristine()],data:{activeSideMenu:"Projects"}},{path:"project-researcher/:id",component:io,resolve:{project:h.A.projectResolver("id")},canDeactivate:[S.S.isPristine()],data:{activeSideMenu:"Projects"}},{path:"project-support/:id",component:xt,resolve:{project:h.A.projectResolver("id")},data:{activeSideMenu:"Projects"}},{path:"project-submission/:id",component:Bt,resolve:{project:h.A.projectResolver("id")},canDeactivate:[S.S.isPristine()],data:{activeSideMenu:"Projects"}},{path:"project-files/:id",component:Ht,resolve:{project:h.A.projectResolver("id")},canDeactivate:[S.S.isPristine()],data:{activeSideMenu:"Projects"}},{path:"project-history/:id",component:Kt,resolve:{project:h.A.projectResolver("id")},canDeactivate:[S.S.isPristine()],data:{activeSideMenu:"Projects"}}];let ao=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[p.iI.forChild(no),p.iI]})}}return o})(),so=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({providers:[Q,oe,Z,K,re,ee,te],imports:[u.MD,ie.G,ao]})}}return o})()}}]);