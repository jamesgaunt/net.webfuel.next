<div class="container">
  <img src="https://www.webfuel.com/external/rss.png" alt="NIHR Research Support Service" style="width: 550px;" />

  <h1>Imperial College London and Partners Hub</h1>
  <hr />

  <!--
    <h2>Holiday closure: December and January</h2>
    <p>Our service will be closed for the holidays, between Friday 20th December and Thursday 2nd January.</p>
    <p>We won't be able to respond to research support requests during the closure period.</p>
  -->

  <p><b>Reminder:</b></p>
  <ul>
    <li>To make sure we can provide you with the best possible support, please submit your request at least <b>five working weeks</b> before your funding submission deadline.<br /><br /></li>
    <li>We cannot accept requests made less than four working weeks before your funding application deadline, as we need enough time for our expert advisers to review your documents and provide tailored advice.<br /><br /></li>
    <li>Holiday closure days are not considered working days, so please plan accordingly.<br /><br /></li>
  </ul>

  <!--
  <p>Thank you for your understanding. We hope you have a happy holiday season.</p>
    -->
  <p>Thank you for your understanding.</p>
  <hr />
  <h2>Research Support Service request form</h2>
  <div *ngIf="stage == 'input'">
    <p>To request free advice from our NIHR RSS hub on your funding application, please complete the form below.</p>
    <form class="form" [formGroup]="form">

      <!-- Project Details-->
      <h2>Project Details</h2>
      <p>Please tell us more about your project. Please complete all required fields, selecting 'Not Known' if necessary.</p>
      <div class="flex">
        <div class="field is-12">
          <label class="label">Working title of the project</label>
          <input class="input" type="text" placeholder="required" formControlName="title" maxlength="1000" />
        </div>
        <div class="field is-12">
          <label class="label">Is this request linked to a current project?</label>
          <div class="checkbox">
            <label><input type="checkbox" formControlName="isThisRequestLinkedToAnExistingProject" /> Please tick this checkbox if you have already submitted a request in relation to this project.</label>
          </div>
        </div>
        <div class="field is-6">
          <label class="label">Stage of application</label>
          <dropdown-select [dataSource]="staticDataCache.applicationStage" [freeTextControl]="form.controls.applicationStageFreeText" placeholder="required" formControlName="applicationStageId"></dropdown-select>
        </div>
        <div class="field is-6">
          <label class="label">Is this application for a fellowship?</label>
          <dropdown-select [dataSource]="staticDataCache.isFellowship" placeholder="required" formControlName="isFellowshipId"></dropdown-select>
        </div>
        <div class="field is-6">
          <label class="label">Proposed funding stream</label>
          <dropdown-select [dataSource]="staticDataCache.fundingStream" placeholder="required" formControlName="proposedFundingStreamId"></dropdown-select>
        </div>
        <div class="field is-6">
          <label class="label">Funding stream name / specialist call if known</label>
          <input class="input" type="text" placeholder="optional" formControlName="proposedFundingStreamName" maxlength="64" />
        </div>
        <div class="field is-6">
          <label class="label">Type of call</label>
          <dropdown-select [dataSource]="staticDataCache.fundingCallType" placeholder="required" formControlName="proposedFundingCallTypeId"></dropdown-select>
        </div>
        <div class="field is-6">
          <label class="label">NIHR application ID if known</label>
          <input class="input" type="text" placeholder="optional" formControlName="nihrApplicationId" maxlength="64" />
        </div>
        <div class="field is-6">
          <label class="label">
            Target submission date (if known)
            <span class="error" *ngIf="form.controls.targetSubmissionDate.errors?.['dateMustBeInFuture']">(this date must be in the future)</span>
          </label>
          <date-picker placeholder="optional" formControlName="targetSubmissionDate"></date-picker>
        </div>
        <div class="field is-6">
          <label class="label">Have your team members been consulted for support?</label>
          <dropdown-select [dataSource]="staticDataCache.isTeamMembersConsulted" placeholder="required" formControlName="isTeamMembersConsultedId"></dropdown-select>
        </div>
        <div class="field is-6">
          <label class="label">Has the application or similar been submitted to a funder before?</label>
          <dropdown-select [dataSource]="staticDataCache.isResubmission" placeholder="required" formControlName="isResubmissionId"></dropdown-select>
        </div>
        <div class="field is-6">
          <label class="label">Have you already got a CTU involved and if so which one?</label>
          <dropdown-select [dataSource]="staticDataCache.isCTUAlreadyInvolved" [freeTextControl]="form.controls.isCTUAlreadyInvolvedFreeText" freeTextPlaceholder="Please specify which CTU is already involved..." placeholder="required" formControlName="isCTUAlreadyInvolvedId"></dropdown-select>
        </div>
        <div class="field is-6">
          <label class="label">How did you hear about our hub?</label>
          <dropdown-select [dataSource]="staticDataCache.howDidYouFindUs" [freeTextControl]="form.controls.howDidYouFindUsFreeText" placeholder="required" formControlName="howDidYouFindUsId"></dropdown-select>
        </div>
        <div class="field is-12">
          <label class="label">What is your (or the CIs)  experience of securing funding awards?</label>
          <text-area formControlName="experienceOfResearchAwards" placeholder="required" maxlength="1000"></text-area>
        </div>
        <div class="field is-12">
          <label class="label">
            Please add a brief description of your proposed study. Where possible include an outline of research question, aims, need and methods (you can also upload additional information below). [max 500 words]
          </label>
          <text-area formControlName="briefDescription" placeholder="required" maxlength="5000"></text-area>
        </div>
        <div class="field is-12">
          <label class="label">
            What support are you looking for from RSS?  Eg funding advice, methods advice, PPIE and EDI advice, CTU support, training in methods for grants, plain english summary review?
            <br /><i>* If you are requesting a grantsmanship review as a standalone service, please state ‘grantsmanship review service’ below.</i>
          </label>
          <text-area formControlName="supportRequested" placeholder="required" maxlength="2000"></text-area>
        </div>
        <div class="field is-12">
          <label class="label">
            Who else is on your study team and what is their expertise?
          </label>
          <text-area formControlName="whoElseIsOnTheStudyTeam" placeholder="required" maxlength="2000"></text-area>
        </div>
        <div class="field is-12">
          <label class="label">What is the professional background of all team/applicants? (select all that apply)</label>
          <dropdown-multi-select [dataSource]="staticDataCache.professionalBackground" [enableClear]="true" [freeTextControl]="form.controls.professionalBackgroundFreeText" placeholder="required" formControlName="professionalBackgroundIds"></dropdown-multi-select>
        </div>
        <div class="field is-6">
          <label class="label">Would you like to receive a grantsmanship review?</label>
          <dropdown-select [dataSource]="staticDataCache.isYesNo" [enableClear]="true" placeholder="optional" formControlName="wouldYouLikeToReceiveAGrantsmanshipReviewId"></dropdown-select>
        </div>
        <div class="field is-6">
          <label class="label">Is your support request only for a grantsmanship review?</label>
          <dropdown-select [dataSource]="staticDataCache.isYesNo" [enableClear]="true" placeholder="optional" formControlName="isYourSupportRequestOnlyForAGrantsmanshipReviewId"></dropdown-select>
        </div>
      </div>

      <!-- Team Contact Details -->
      <hr class="external-form-divider" />
      <h2>Contact Details</h2>
      <p>Please enter the details for the person we will contact regarding this project (this may or may not be the chief investigator).</p>
      <div class="flex">
        <div class="field is-4">
          <label class="label">Title</label>
          <dropdown-text-input placeholder="required" [dataSource]="staticDataCache.title" formControlName="teamContactTitle" />
        </div>
        <div class="field is-4">
          <label class="label">First name</label>
          <input class="input" type="text" placeholder="required" formControlName="teamContactFirstName" maxlength="64" />
        </div>
        <div class="field is-4">
          <label class="label">Last name</label>
          <input class="input" type="text" placeholder="required" formControlName="teamContactLastName" maxlength="64" />
        </div>
        <div class="field is-4">
          <label class="label">Email</label>
          <input class="input" type="text" placeholder="required" formControlName="teamContactEmail" maxlength="64" />
        </div>
        <div class="field is-4">
          <label class="label">Alternative Email</label>
          <input class="input" type="text" placeholder="optional" formControlName="teamContactAltEmail" maxlength="64" />
        </div>
        <div class="field is-4">
          <label class="label">Role in application</label>
          <dropdown-select [dataSource]="staticDataCache.researcherRole" [freeTextControl]="form.controls.teamContactRoleFreeText" placeholder="required" formControlName="teamContactRoleId"></dropdown-select>
        </div>
        <div class="field is-12">
          <div class="checkbox">
            <label><input type="checkbox" formControlName="teamContactMailingPermission" /> Please tick this checkbox to confirm you give us permission to contact you via email.</label>
          </div>
        </div>
        <div class="field is-12">
          <div class="checkbox">
            <label><input type="checkbox" formControlName="teamContactPrivacyStatementRead" /> Please tick this checkbox to confirm you have read our <a target="_blank" href="https://www.imperial.ac.uk/school-public-health/research/nihr-research-support-service/nihr-research-support-privacy-notice/" class="link is-primary">privacy notice <i class="fas fa-external-link"></i></a>.</label>
          </div>
        </div>
        <div class="field is-12">
          <div class="checkbox">
            <label><input type="checkbox" formControlName="teamContactServiceAgreementRead" /> Please tick this checkbox to confirm you have read our <a target="_blank" href="https://www.imperial.ac.uk/nihr-research-support-service/service-agreement/" class="link is-primary">service agreement <i class="fas fa-external-link"></i></a>.</label>
          </div>
        </div>
      </div>

      <!-- Lead Applicant Details -->
      <hr class="external-form-divider" />
      <h2>Chief Investigator / Fellowship Applicant / Lead Applicant Details</h2>
      <p>Please enter the details for the chief investigator for this project. If you are not a CI (i.e, you are an applicant from a company), please add the lead applicant’s name and details here.</p>
      <div class="flex" *ngIf="!isTeamContactAlsoChiefInvestigator()">
        <div class="field is-4">
          <label class="label">Title</label>
          <dropdown-text-input placeholder="required" [dataSource]="staticDataCache.title" formControlName="leadApplicantTitle" />
        </div>
        <div class="field is-4">
          <label class="label">First name</label>
          <input class="input" type="text" placeholder="required" formControlName="leadApplicantFirstName" maxlength="64" />
        </div>
        <div class="field is-4">
          <label class="label">Last name</label>
          <input class="input" type="text" placeholder="required" formControlName="leadApplicantLastName" maxlength="64" />
        </div>
      </div>
      <div class="flex">
        <div class="field is-4" *ngIf="!isTeamContactAlsoChiefInvestigator()">
          <label class="label">Email</label>
          <input class="input" type="text" placeholder="required" formControlName="leadApplicantEmail" maxlength="64" />
        </div>
        <div class="field is-4">
          <label class="label">Job Role</label>
          <input class="input" type="text" placeholder="required" formControlName="leadApplicantJobRole" maxlength="64" />
        </div>
        <div class="field is-4">
          <label class="label">Career Stage</label>
          <dropdown-select [dataSource]="staticDataCache.researcherCareerStage" placeholder="required" formControlName="leadApplicantCareerStageId"></dropdown-select>
        </div>
        <div class="field is-4">
          <label class="label">Organisation Type</label>
          <dropdown-select [dataSource]="staticDataCache.researcherOrganisationType" [filterHidden]="true" placeholder="required" formControlName="leadApplicantOrganisationTypeId"></dropdown-select>
        </div>
        <div class="field is-4">
          <label class="label">Organisation</label>
          <input class="input" type="text" placeholder="required" formControlName="leadApplicantOrganisation" maxlength="64" />
        </div>
        <div class="field is-4">
          <label class="label">Department</label>
          <input class="input" type="text" placeholder="optional" formControlName="leadApplicantDepartment" maxlength="64" />
        </div>
        <div class="field is-4">
          <label class="label">ORCID</label>
          <input class="input" type="text" placeholder="optional" formControlName="leadApplicantORCID" maxlength="64" />
        </div>
        <div class="field is-4">
          <label class="label">Where are they located?</label>
          <dropdown-select [dataSource]="staticDataCache.researcherLocation" placeholder="required" formControlName="leadApplicantLocationId"></dropdown-select>
        </div>
        <div class="field is-8">
          <label class="label">
            Is the chief investigator / fellowship applicant an NHS employee seeking RSS support for the first time? 
          </label>
          <dropdown-select [dataSource]="staticDataCache.isLeadApplicantNHS" placeholder="required" formControlName="isLeadApplicantNHSId"></dropdown-select>
        </div>
      </div>
      <div class="flex">
        <div class="is-6">
          <h3>Work Address</h3>
          <div class="flex">
            <div class="field is-12">
              <label class="label">Line 1</label>
              <input class="input" type="text" placeholder="required" formControlName="leadApplicantAddressLine1" maxlength="64" />
            </div>
            <div class="field is-12">
              <label class="label">Line 2</label>
              <input class="input" type="text" placeholder="optional" formControlName="leadApplicantAddressLine2" maxlength="64" />
            </div>
            <div class="field is-12">
              <label class="label">Town/City</label>
              <input class="input" type="text" placeholder="required" formControlName="leadApplicantAddressTown" maxlength="64" />
            </div>
            <div class="field is-12">
              <label class="label">County</label>
              <input class="input" type="text" placeholder="required" formControlName="leadApplicantAddressCounty" maxlength="64" />
            </div>
            <div class="field is-12">
              <label class="label">Country</label>
              <input class="input" type="text" placeholder="required" formControlName="leadApplicantAddressCountry" maxlength="64" />
            </div>
            <div class="field is-12">
              <label class="label">Postcode</label>
              <input class="input" type="text" placeholder="required" formControlName="leadApplicantAddressPostcode" maxlength="64" />
            </div>
          </div>
        </div>
        <div class="is-6">
          <h3>Enthnicity, Diversity &amp; Inclusion</h3>
          <div class="flex">
            <div class="field is-12">
              <label class="label">Age Range</label>
              <dropdown-select [dataSource]="staticDataCache.ageRange" placeholder="required" formControlName="leadApplicantAgeRangeId"></dropdown-select>
            </div>
            <div class="field is-12">
              <label class="label">Gender</label>
              <dropdown-select [dataSource]="staticDataCache.gender" placeholder="required" formControlName="leadApplicantGenderId"></dropdown-select>
            </div>
            <div class="field is-12">
              <label class="label">Ethnicity</label>
              <dropdown-select [dataSource]="staticDataCache.ethnicity" placeholder="required" formControlName="leadApplicantEthnicityId"></dropdown-select>
            </div>
          </div>
        </div>
      </div>

      <hr class="external-form-divider" />
      <h2>Supporting Documents</h2>
      <p>If available, please provide copies of draft documentation, protocols, background information or feedback from any previous applications.</p>
      <p class="text is-warning">Please ensure all files are saved and closed on your computer. You may receive an error message if you attempt to upload a file which you have open in another application.</p>
      <file-input formControlName="files" [progress]="progress"></file-input>

      <hr class="external-form-divider" />
      <h2>Submit Your Application</h2>

      <div class="buttons">
        <button type="button" [disabled]="submitting" [class.processing]="submitting" class="button is-success" (click)="submit()">
          <span class="text">
            Submit Application
          </span>
          <span class="spin">
            <i class="far fa-spin fa-sync-alt"></i>
          </span>
        </button>
        &nbsp;
        <span class="text is-danger is-bold">{{ errorMessage }}</span>
      </div>
      <hr class="external-form-divider" />
    </form>
  </div>
  <div *ngIf="stage == 'submitted'">
    <p>Thank you for submitting your support request. A member of our team will be in touch shortly. We aim to respond within 10 working days.</p>
  </div>
  <div *ngIf="stage == 'error'">
    <div class="message is-danger">
      An error occured while attempting to submit your support request.
    </div>
  </div>
</div>
<br />

